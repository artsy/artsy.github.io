<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Artsy Engineering</title>
    <description></description>
    <link>http://artsy.github.io/</link>
    <atom:link href="http://artsy.github.io/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 26 Jul 2017 18:25:00 +0000</pubDate>
    <lastBuildDate>Wed, 26 Jul 2017 18:25:00 +0000</lastBuildDate>
    <generator>Jekyll v2.5.3</generator>
    
      <item>
        <title>Artsy API Ready for Production Non-Commercial Use</title>
        <description>&lt;p&gt;About 3 years ago, dB. announced that Artsy &lt;a href=&quot;/blog/2014/09/12/designing-the-public-artsy-api/&quot;&gt;had a public API&lt;/a&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The Artsy API currently provides access to images of historic artwork and related information on &lt;a href=&quot;https://artsy.net&quot;&gt;artsy.net&lt;/a&gt; for educational and other non-commercial purposes. You can try it for playing, testing, and learning, but not yet for production. The scope of the API will expand in the future as it gains some traction.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;We&#39;ve wrapped up some legal work around the developer API terms and services, &lt;a href=&quot;https://github.com/artsy/doppler/pull/119&quot;&gt;the PR is here&lt;/a&gt; and I&#39;m happy to announce that the API is ready for non-commercial production use.&lt;/p&gt;

&lt;p&gt;The &lt;strong&gt;TDLR&lt;/strong&gt; &lt;a href=&quot;https://developers.artsy.net/terms&quot;&gt;Terms and Conditions&lt;/a&gt; today for using the Artsy API is:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Non-commercial use only.&lt;/li&gt;
&lt;li&gt;You only get access to public-domain artworks.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The API:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Is a &lt;a href=&quot;https://robots.thoughtbot.com/writing-a-hypermedia-api-client-in-ruby&quot;&gt;Hypermedia&lt;/a&gt; API.&lt;/li&gt;
&lt;li&gt;Covers &lt;a href=&quot;https://developers.artsy.net/docs/artists&quot;&gt;Artists&lt;/a&gt;, &lt;a href=&quot;https://developers.artsy.net/docs/artworks&quot;&gt;Artworks&lt;/a&gt;, &lt;a href=&quot;https://developers.artsy.net/docs/genes&quot;&gt;Genes&lt;/a&gt;, &lt;a href=&quot;https://developers.artsy.net/docs/shows&quot;&gt;Shows&lt;/a&gt;, &lt;a href=&quot;https://developers.artsy.net/docs/partners&quot;&gt;Partners&lt;/a&gt; and &lt;a href=&quot;https://developers.artsy.net/docs/&quot;&gt;more&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;If you have a great idea for an app that can use public-domain data, then the Artsy API is the right place to look: &lt;a href=&quot;d&quot;&gt;https://developers.artsy.net&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Sun, 23 Jul 2017 00:00:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/07/23/api-open-non-commercial/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/07/23/api-open-non-commercial/</guid>
        
        
        <category>api</category>
        
        <category>open-source</category>
        
      </item>
    
      <item>
        <title>Using GitHub Issues for Blog Comments</title>
        <description>&lt;p&gt;I&#39;ve worked on a few large-scale OSS projects, and I believe that people find it easier to just leave a comment and rely on a contributor to explain a problem rather than consulting the documentation. I consider doing everything you can to make people find their own answers a strong part of &lt;a href=&quot;/blog/2016/07/03/handling-big-projects/&quot;&gt;defensive open source&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For the posts I write, I have an even lower tolerance for comments. For example, I added the ability to turn off comments per-post and haven&#39;t allowed comments on any posts I&#39;ve written here. A lot of transitory discussion around an article happens on twitter via &lt;a href=&quot;https://twitter.com/ArtsyOpenSource/&quot;&gt;@ArtsyOpenSource&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&#39;m willing to give it another shot though, and so I got around to creating a simple system for allowing opt-in comments on posts using GitHub Issues. The rest of this post will be about how you can do it also, and a bit about why I think GitHub Issues are a happy medium for the comments.&lt;/p&gt;

&lt;!-- more --&gt;




&lt;div&gt;&lt;div class=&quot;comment&quot;&gt;&lt;div class=&quot;comment-header&quot;&gt;&lt;a class=&quot;comment-username&quot; href=&quot;https://github.com/orta&quot;&gt;&lt;img src=&quot;https://avatars6.githubusercontent.com/u/49038?v=4&quot; alt=&quot;&quot; width=&quot;40&quot; height=&quot;40&quot;&gt;orta&lt;/a&gt; commented &lt;a class=&quot;comment-date&quot; href=&quot;https://github.com/artsy/artsy.github.io/issues/355#issuecomment-313158506&quot;&gt;2 days ago&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;comment-body&quot;&gt;&lt;p&gt;Comments can be worth a shot.&lt;/p&gt;
&lt;p&gt;With a static site like ours it can be a bit tricky, but with an external server and some simple JavaScript it can work out &lt;g-emoji alias=&quot;+1&quot; fallback-src=&quot;https://assets-cdn.github.com/images/icons/emoji/unicode/1f44d.png&quot; ios-version=&quot;6.0&quot;&gt;üëç&lt;/g-emoji&gt;.&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;


&lt;a name=&quot;Getting.set.up&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Getting set up&lt;/h1&gt;

&lt;p&gt;The general concept is that you have some JavaScript in your page which requests a list of comments from GitHub. These are available as a JSON API, you can grab that then style the results. Sounds easy right?&lt;/p&gt;

&lt;p&gt;Turns out to be a bit more complicated. GitHub&#39;s API has rate-limits for IP addresses, and they&#39;re reasonably low. So, you&#39;ll want to use authenticated requests, but you don&#39;t really want to include your access tokens inside the JavaScript on your blog.&lt;/p&gt;

&lt;p&gt;I&#39;ve worked around this with a project called &lt;a href=&quot;https://github.com/orta/gh-commentify&quot;&gt;gh-commentify&lt;/a&gt;, a node app whose job is to wrap your comment API requests with an access token. You can create your own instance on heroku using &lt;a href=&quot;https://heroku.com/deploy?template=https://github.com/orta/gh-commentify&quot;&gt;this link&lt;/a&gt;. It gets scoped to a single org/user, so you can avoid others using your heroku instance for their blog.&lt;/p&gt;

&lt;p&gt;From there you need to be able to declare in a post what issue it is hooked up to. This blog uses Jekyll, which has &lt;a href=&quot;https://jekyllrb.com/docs/frontmatter/&quot;&gt;YAML Front Matter&lt;/a&gt; on posts. So, I edited our post templates to look for a key &lt;code&gt;comment_id&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;From there you need to grab the comments JSON, and move them into the DOM.&lt;/p&gt;

&lt;p&gt;I based my work on these two posts:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://ivanzuzak.info/2011/02/18/github-hosted-comments-for-github-hosted-blogs.html&quot;&gt;GitHub hosted comments for GitHub hosted blogs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://donw.io/post/github-comments/&quot;&gt;Replacing Disqus with Github Comments&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;However this version is more reliable (GitHub authenticated requests) and has fewer dependencies (no jQuery for example).&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;html&#39;&gt;&lt;span class=&#39;line&#39;&gt;{% if page.comment_id %}
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nt&quot;&gt;&amp;lt;article&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#39;post&amp;#39;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    {% include gh_comments.html %}
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/article&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;{% endif %}
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;This then imports the required JavaScript into the page. It feels a lot like this:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;21&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;22&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;23&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;24&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;25&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;26&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;27&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;28&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;29&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;30&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;31&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;32&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;33&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;34&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;35&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;36&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;37&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;38&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;39&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;40&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;41&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;javascript&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;writeToComment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;innerHTML&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;html&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;document&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;comments&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;loadComments&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nx&quot;&gt;writeToComment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;h2&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Comments&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;commentHTML&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[...]&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;writeToComment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;div&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;commentHTML&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callToAction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[...]&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nx&quot;&gt;writeToComment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;div&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;writeFirstComment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callToAction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[...]&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nx&quot;&gt;writeToComment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;div&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callToAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c1&quot;&gt;// This is mostly there now: http://caniuse.com/#feat=fetch&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;s2&quot;&gt;&amp;quot;https://artsy-blog-gh-commentify.herokuapp.com/repos/artsy/artsy.github.io/issues/{{ page.comment_id }}/comments&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;window&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Accept&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;application/vnd.github.v3.html+json&amp;quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;nx&quot;&gt;loadComments&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;nx&quot;&gt;writeFirstComment&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;No-one is going to award this JavaScript with a prize for elegance, but it works just fine. That&#39;s basically it, you can edit the DOM however you want.&lt;/p&gt;

&lt;p&gt;The full PR for these changes is here: &lt;a href=&quot;https://github.com/artsy/artsy.github.io/pull/363&quot;&gt;artsy.github.io#363&lt;/a&gt; - and you can see the current &lt;a href=&quot;https://github.com/artsy/artsy.github.io/blob/source/_includes/gh_comments.html&quot;&gt;HTML/JS here&lt;/a&gt;.&lt;/p&gt;

&lt;a name=&quot;Styling&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Styling&lt;/h1&gt;

&lt;p&gt;The style of our comments are built to evoke the GitHub UI for issues. This is done to prime people for a relatively different type of comment creation, but still feel like it&#39;s a part of the Artsy OSS style.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/comments-are-on/example-comment.png&quot;&gt;&lt;/p&gt;

&lt;div&gt;&lt;div class=&quot;comment&quot;&gt;&lt;div class=&quot;comment-header&quot;&gt;&lt;a class=&quot;comment-username&quot; href=&quot;https://github.com/orta&quot;&gt;&lt;img src=&quot;https://avatars6.githubusercontent.com/u/49038?v=4&quot; alt=&quot;&quot; width=&quot;40&quot; height=&quot;40&quot;&gt;orta&lt;/a&gt; commented &lt;a class=&quot;comment-date&quot; href=&quot;https://github.com/artsy/artsy.github.io/issues/355#issuecomment-313158506&quot;&gt;10 days ago&lt;/a&gt;&lt;/div&gt;&lt;div class=&quot;comment-body&quot;&gt;&lt;p&gt;This is done and dusted.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;


&lt;a name=&quot;Why.GitHub.&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Why GitHub?&lt;/h1&gt;

&lt;p&gt;It&#39;s easier for you to keep track of the conversations, you&#39;re likely already having a lot of conversations in a place like GitHub. This means you can use the same flow and tools as your daily job, not relying on a third party service&#39;s emails.&lt;/p&gt;

&lt;p&gt;You have good admin tools: you can edit comments, block and report problematic users. These are tools that you have for all repos.&lt;/p&gt;

&lt;p&gt;People will be using their developer accounts, which I&#39;d like to hope they will take pride in. You&#39;re probably more likely to get high quality responses. The lack of threading is a bit of a shame in this context, but we&#39;ve lived with it in GitHub Issues for this long, so I&#39;m OK with this.&lt;/p&gt;

&lt;p&gt;This setup makes it trivial to drop comments from the blog anytime, and you still have all the comments around in a constructive way after. We don&#39;t have to hope that other services have export features and open data. Everything public is &lt;a href=&quot;https://github.com/blog/2298-github-data-ready-for-you-to-explore-with-bigquery&quot;&gt;open data&lt;/a&gt; on GitHub.&lt;/p&gt;

&lt;p&gt;So: low maintenance, works on static sites, data isn&#39;t silo-ed and it&#39;s more likely to result in positive interactions.&lt;/p&gt;
</description>
        <pubDate>Sat, 15 Jul 2017 00:00:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/07/15/Comments-are-on/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/07/15/Comments-are-on/</guid>
        
        
        <category>blogging</category>
        
        <category>github</category>
        
        <category>javascript</category>
        
      </item>
    
      <item>
        <title>Intro to React Native for an iOS Developer</title>
        <description>&lt;p&gt;React Native is a new native library that vastly changes the way in which you can create applications. The majority of the information and tutorials on the subject come from the angle of &lt;em&gt;&quot;you are a web developer, and want to do native&quot;&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;This makes sense, given that the size of the JavaScript/web audience is much bigger than native developers, and far more open in the idea of writing apps using JavaScript. For web developers it opens a new creative space to work, however for native developers it provides a way to work with different tools on the same problem. Considering that most developers with a few years on the platform will be comfortable with the Xcode toolset, recommending a change this drastic is a tough sell.&lt;/p&gt;

&lt;p&gt;We&#39;ve been using React Native now for about a year and a half, and have started to slow down on sweeping changes inside the codebase. This is great because it means we&#39;re spending less time trying to get things to work, and more time building on top of a solid foundations. Now that we&#39;re settled, it&#39;s time to start deeply understanding what happens with React Native.&lt;/p&gt;

&lt;p&gt;I&#39;d like cover a lot of the common questions we get asked about from the perspective of native developers:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;What is React Native?&lt;/li&gt;
&lt;li&gt;How do you use React Native?&lt;/li&gt;
&lt;li&gt;When is React Native a good technology choice?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This article covers an awful lot, so free up at least 45 minutes, make a tea and then come back to this on your computer. It&#39;s worth your time if you&#39;re interested in all the hype around React Native.&lt;/p&gt;

&lt;!-- more --&gt;




&lt;div class=&quot;mobile-only&quot;&gt;
&lt;p&gt;
  &lt;strong&gt;Before you get started&lt;/strong&gt;, it looks like you&#39;re using a really small screen, this post is built for larger screens and having a terminal around will make it much easier to understand the ideas inside the post. &lt;strong&gt;So if you can, please switch to a different device.&lt;/strong&gt; You will be missing sections otherwise.
&lt;/p&gt;
&lt;/div&gt;


&lt;p&gt;At the highest level, React Native is a way to write React apps that run as native programs. You write your app&#39;s code in JavaScript, and React Native bridges that code with native UIView elements. React Native has two stated aims:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Learn Once, Write Anywhere.&lt;/li&gt;
&lt;li&gt;Make a native developer experience as fast as the web developer&#39;s.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;strong&gt;&quot;Learn Once, Write Anywhere&quot;&lt;/strong&gt; is a play on Java&#39;s &lt;em&gt;&quot;Write Once, Run Anywhere&quot;&lt;/em&gt; - something that has not worked well for user-interface heavy mobile clients. The idea of running the same code everywhere encourages platform-less APIs which water down the positives of each platform.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&quot;Learn once&quot;&lt;/strong&gt; in this context means that you can re-use the same ideas and tools across many platforms. You don&#39;t lose your ability to write the same user experiences as you can with native code, but you can re-use your existing skills across different platforms. That is the &lt;strong&gt;&quot;Write Anywhere&quot;&lt;/strong&gt; aspect.&lt;/p&gt;

&lt;p&gt;React Native makes it feasible to share a lot of code between iOS, Android and Web. It is not a panacea for making a cross-platform app though; cross-platform is not an &lt;em&gt;explicit&lt;/em&gt; goal of the project. The project moves towards making the best per-platform apps.&lt;/p&gt;

&lt;p&gt;To make a developer experience &lt;strong&gt;as fast as the web developer&#39;s&lt;/strong&gt; you need to really reflect on how slow native development is. A change in one part of the app required a full restart of the simulator, and for the developer to get back into the same position to see the changes. As a web developer you would just refresh the browser. For example with the simplest Xcode iOS app template, I made a single line change and did an incremental rebuild and it took 9 seconds to get me back into my app with the new change, on a 2015 MacBook Pro. 9 seconds per change leaves a lot of time to lose focus, and discourages playfulness.&lt;/p&gt;

&lt;p&gt;If those are the stated goals of React Native specifically, what are the goals of React?&lt;/p&gt;

&lt;a name=&quot;React&quot;&gt;&lt;/a&gt;
&lt;h1&gt;React&lt;/h1&gt;

&lt;p&gt;React provides a single-direction Component model that &lt;em&gt;can&lt;/em&gt; handle what is traditionally handled by the MVC paradigm. The library was created originally for the web, where updates at the equivalent of &lt;code&gt;UIView&lt;/code&gt; level are considered slow. React provides a diffing engine for a tree of components that would &lt;em&gt;eventually&lt;/em&gt; be represented as HTML, allowing you to write the end-state of your interface and React would apply the difference to only the HTML that changes.&lt;/p&gt;

&lt;p&gt;React was built out of a desire to abstract away a web page&#39;s true view hierarchy (called the DOM) so that they could make changes to all of their views and then React would handle finding the differences between view states.&lt;/p&gt;

&lt;p&gt;This pattern is applied by providing a consistent way to represent a component&#39;s state. Imagine if every &lt;code&gt;UIView&lt;/code&gt; subclass had a &quot;&lt;code&gt;setState&lt;/code&gt;&quot; function where you can send a subset of all available options (backgroundColor, frame, alpha, etc) and then eventually UIKit would re-concile all changes to all views in batches.&lt;/p&gt;

&lt;p&gt;To get a sense of what this feels like, I&#39;ve created a simplified version of the React components for one of the screens in our app, the  &lt;a href=&quot;https://github.com/artsy/emission/blob/e4bbde386d54bc8ca73565d667e2701ab0fad0f0/src/lib/Components/Consignments/Components/ArtistSearchResults.tsx&quot;&gt;full implementation is here&lt;/a&gt;. You can see the original design, a prototype of how that is then split into components, then the tree strucutre for those components and finally the props for each component.&lt;/p&gt;

&lt;div class=&quot;expand-please&quot;&gt;
&lt;p&gt;Warning: You may need to expand the width of this window to see the full diagram.&lt;/p&gt;
&lt;/div&gt;


&lt;p&gt;&lt;/article&gt;
&lt;article class=&quot;desktop-only&quot; style=&#39;display: flex; flex-flow:row; position: absolute; left:10px; right: 10px; height: 360px; min-width: 1200px;&#39;&gt;&lt;/p&gt;

&lt;div style=&#39;flex:1; text-align:center;&#39;&gt;
&lt;img style=&#39; margin-top: 20px; margin-right:20px;&#39; src=&quot;/images/what-is-rn/simple-overview-render.png&quot; width=269 height=474/&gt;
&lt;/div&gt;


&lt;div style=&#39;flex:1&#39;&gt;&lt;center&gt;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;svg width=&quot;300px&quot; height=&quot;544px&quot; viewBox=&quot;0 0 300 544&quot; version=&quot;1.1&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; xmlns:xlink=&quot;http://www.w3.org/1999/xlink&quot;&gt;
    &lt;!-- Generator: Sketch 44.1 (41455) - http://www.bohemiancoding.com/sketch --&gt;
    &lt;defs&gt;&lt;/defs&gt;
    &lt;g id=&quot;Page-1&quot; stroke=&quot;none&quot; stroke-width=&quot;1&quot; fill=&quot;none&quot; fill-rule=&quot;evenodd&quot;&gt;
        &lt;g id=&quot;Artist-Search-Prototype&quot;&gt;
            &lt;g id=&quot;PHONE&quot; transform=&quot;translate(2.000000, 2.000000)&quot;&gt;
                &lt;rect id=&quot;Edge-Copy&quot; stroke=&quot;#82D7DA&quot; stroke-width=&quot;1.5&quot; x=&quot;-0.75&quot; y=&quot;-0.75&quot; width=&quot;294.582031&quot; height=&quot;541.06666&quot; rx=&quot;3&quot;&gt;&lt;/rect&gt;
                &lt;rect id=&quot;Rectangle-3-Copy&quot; stroke=&quot;#82D7DA&quot; x=&quot;13.5540321&quot; y=&quot;15.7297041&quot; width=&quot;268.635469&quot; height=&quot;473.580283&quot;&gt;&lt;/rect&gt;
                &lt;ellipse id=&quot;Oval-1-Copy-7&quot; stroke=&quot;#82D7DA&quot; cx=&quot;43.5062857&quot; cy=&quot;204.513169&quot; rx=&quot;12.5468775&quot; ry=&quot;12.5540321&quot;&gt;&lt;/ellipse&gt;
                &lt;ellipse id=&quot;Oval-1-Copy-9&quot; stroke=&quot;#82D7DA&quot; cx=&quot;43.5062857&quot; cy=&quot;237.14825&quot; rx=&quot;12.5468775&quot; ry=&quot;12.5540321&quot;&gt;&lt;/ellipse&gt;
                &lt;ellipse id=&quot;Oval-1-Copy-30&quot; stroke=&quot;#82D7DA&quot; cx=&quot;43.5062857&quot; cy=&quot;269.78333&quot; rx=&quot;12.5468775&quot; ry=&quot;12.5540321&quot;&gt;&lt;/ellipse&gt;
                &lt;path d=&quot;M14.1418681,293.521739 L281.750032,293.521739&quot; id=&quot;Path-10-Copy-4&quot; stroke=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
                &lt;ellipse id=&quot;Oval-1-Copy-6&quot; stroke=&quot;#99E0E2&quot; cx=&quot;145.949571&quot; cy=&quot;515.823457&quot; rx=&quot;17.5849219&quot; ry=&quot;17.594565&quot;&gt;&lt;/ellipse&gt;
                &lt;g id=&quot;Group&quot; transform=&quot;translate(30.459408, 145.770025)&quot;&gt;
                    &lt;path d=&quot;M1.08783601,25.1621198 L233.884742,25.1621198&quot; id=&quot;Path-10-Copy-3&quot; stroke=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
                    &lt;path d=&quot;M220.83071,5.0608023 L227.357726,12.1080877&quot; id=&quot;Path-10-Copy-5&quot; stroke=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
                    &lt;path d=&quot;M220.83071,5.0608023 L227.357726,12.1080877&quot; id=&quot;Path-10-Copy-5&quot; stroke=&quot;#82D7DA&quot; transform=&quot;translate(224.094218, 8.702688) scale(-1, 1) translate(-224.094218, -8.702688) &quot;&gt;&lt;/path&gt;
                    &lt;path d=&quot;M6.40517841,2.6978333 C6.40517841,2.12345589 6.38777304,2.10605051 6.90993432,2.10605051 L8.14571603,2.10605051 C9.10301171,2.10605051 9.76441601,2.24529352 10.1647397,2.54118491 C10.4258203,2.73264405 10.5476579,3.37664297 10.5998741,3.81177737 C10.6869009,3.91620963 10.9827923,3.91620963 11.0524138,3.77696662 C11.0001977,3.25480534 11.1220353,1.84496987 11.3134945,1.13134945 C11.2786837,1.06172794 11.0872246,1.04432257 11.0001977,1.07913332 C10.7391171,1.5316731 10.5824687,1.56648385 9.64257837,1.56648385 L2.59340104,1.56648385 C1.79275374,1.56648385 1.21837633,1.58388923 1.11394407,1.02691719 C1.06172794,0.974701063 0.835458054,0.992106439 0.783241926,1.02691719 C0.661404293,1.72313224 0.400323651,2.83707631 0.121837633,3.62031823 C0.191459137,3.75956124 0.435134403,3.84658812 0.574377412,3.74215587 C0.76583655,3.30702146 0.939890311,2.92410319 1.35761934,2.54118491 C1.79275374,2.14086126 2.75004943,2.10605051 3.4984806,2.10605051 L4.45577629,2.10605051 C4.97793757,2.10605051 4.97793757,2.12345589 4.97793757,2.66302255 L4.97793757,10.4432257 C4.97793757,12.2707902 4.89091069,12.5318708 3.89880425,12.6188977 L3.27221071,12.6711138 C3.1329677,12.7581407 3.16777845,13.0540321 3.27221071,13.1062482 C4.38615478,13.0714375 4.99534295,13.0540321 5.69155799,13.0540321 C6.38777304,13.0540321 6.97955583,13.0714375 7.97166227,13.1062482 C8.07609452,13.0540321 8.11090527,12.7407353 8.00647302,12.6711138 L7.44950098,12.6188977 C6.43998917,12.5318708 6.40517841,12.2707902 6.40517841,10.4432257 L6.40517841,2.6978333 Z M13.1932751,11.10463 C13.1932751,12.357817 13.1758697,12.5144654 12.5318708,12.6188977 L12.2011687,12.6711138 C12.079331,12.7581407 12.1141418,13.0540321 12.2359794,13.1062482 C12.6885192,13.0714375 13.2106805,13.0540321 13.837274,13.0540321 C14.4464622,13.0540321 14.9512181,13.0714375 15.7692708,13.1062482 C15.8911084,13.0540321 15.9259192,12.7581407 15.8040815,12.6711138 L15.177488,12.6188977 C14.5160837,12.5666816 14.4812729,12.357817 14.4812729,11.10463 L14.4812729,8.73749882 C14.4812729,8.14571603 14.5334891,7.64096012 14.7075428,7.39728485 C14.8467858,7.20582572 15.0556503,7.04917733 15.3341364,7.04917733 C15.5778116,7.04917733 15.8388923,7.15360959 16.0999729,7.32766335 C16.2218105,7.39728485 16.3088374,7.44950098 16.4828912,7.44950098 C16.7613772,7.44950098 17.2313224,7.22323109 17.2313224,6.64885368 C17.2313224,6.23112465 16.8832148,5.95263864 16.4480804,5.95263864 C15.8040815,5.95263864 15.1426772,6.4922053 14.5334891,6.9969612 C14.4986783,6.97955583 14.4812729,6.9273397 14.4812729,6.84031282 L14.4812729,5.830801 C14.4812729,5.7611795 14.4290568,5.72636875 14.3420299,5.70896337 C13.9068955,5.97004401 12.9844106,6.42258379 12.5840869,6.5618268 C12.4970601,6.61404293 12.4970601,6.80550207 12.5666816,6.87512357 L12.7233299,6.97955583 C13.1932751,7.2928526 13.1932751,7.37987948 13.1932751,8.05868915 L13.1932751,11.10463 Z M19.3199675,10.1995504 L21.3912073,9.45111924 C21.6522879,9.36409236 21.6870987,9.20744397 21.6870987,8.94636333 L21.704504,8.14571603 C21.7219094,7.50171711 21.5130449,6.6314483 20.4339116,6.6314483 C19.946561,6.6314483 19.3547783,6.87512357 19.3199675,7.41469023 C19.3025621,7.69317625 19.2851567,7.90204076 19.1459137,8.00647302 C18.8848331,8.21533753 18.4148879,8.33717516 18.1538073,8.33717516 C17.9971589,8.33717516 17.910132,8.25014828 17.910132,8.0934999 C17.910132,7.18842034 19.8769395,5.95263864 21.147532,5.95263864 C22.4007191,5.95263864 23.0099072,6.68366443 22.9576911,7.98906764 L22.8532589,11.0176031 C22.8184481,11.8182504 22.9750965,12.5318708 23.6539062,12.5318708 C23.8279599,12.5318708 23.9846083,12.4796547 24.0890406,12.4274386 C24.1760674,12.3752224 24.2630943,12.3056009 24.3153104,12.3056009 C24.384932,12.3056009 24.4371481,12.4100332 24.4371481,12.5318708 C24.4371481,12.6188977 23.8279599,13.2977074 22.9750965,13.2977074 C22.5573675,13.2977074 22.1396384,13.141059 21.843747,12.7581407 C21.7741255,12.6537084 21.6696933,12.5144654 21.565261,12.5144654 C21.4434234,12.5144654 21.2345589,12.6711138 20.8864514,12.862573 C20.5035331,13.0714375 20.1206148,13.2977074 19.6332643,13.2977074 C19.1285084,13.2977074 18.7107793,13.1584644 18.4148879,12.8973837 C18.0841858,12.6014923 17.8753213,12.1663579 17.8753213,11.6790074 C17.8753213,11.0001977 18.2060234,10.5998741 19.3199675,10.1995504 Z M19.2155352,11.4701429 C19.2155352,11.7660343 19.4243998,12.5144654 20.3120739,12.5144654 C20.6601815,12.5144654 21.1997481,12.2533848 21.3738019,12.079331 C21.5826664,11.8704665 21.5826664,11.6267913 21.6000718,11.2612784 L21.6348825,10.2343612 C21.6348825,10.042902 21.565261,10.0080913 21.4608288,10.0080913 C21.3563965,10.0080913 21.0605051,10.0777128 20.7472083,10.182145 C19.7202912,10.5302526 19.2155352,10.7913332 19.2155352,11.4701429 Z M29.1365996,5.95263864 C26.2473072,5.95263864 24.9244986,7.95425689 24.9244986,9.83403751 C24.9244986,10.965387 25.3248223,11.8182504 25.9340104,12.4100332 C26.5431986,13.001816 27.396062,13.2977074 28.318547,13.2977074 C29.3280588,13.2977074 30.633462,12.8103568 31.2252448,11.522359 C31.2078394,11.3657106 31.051191,11.243873 30.911948,11.2786837 C30.5116243,11.8704665 29.9894631,12.3230063 28.9799513,12.3230063 C27.117576,12.3230063 26.1776857,10.7043063 26.1776857,9.34668698 C26.1776857,7.50171711 27.3612513,6.54442142 28.5796276,6.54442142 C29.293248,6.54442142 29.9372469,6.9969612 30.3201652,7.46690636 C30.3897867,7.55393324 30.4768136,7.58874399 30.5638405,7.58874399 C30.772705,7.58874399 30.9467588,7.25804184 30.9467588,6.94474507 C30.9467588,6.64885368 30.8249211,6.37036766 30.6856781,6.24853003 C30.215733,6.03966552 29.5369233,5.95263864 29.1365996,5.95263864 Z M36.742749,8.59825581 L33.5227544,8.59825581 C33.0702146,8.59825581 33.0528093,8.63306656 33.0528093,9.06820096 C33.0528093,10.826144 34.0797265,12.3230063 35.9421017,12.3230063 C36.5164791,12.3230063 37.0038296,12.1489525 37.5433963,11.4701429 C37.7174501,11.4179267 37.8392877,11.522359 37.8566931,11.6790074 C37.2823157,12.862573 36.0291286,13.2977074 35.124049,13.2977074 C33.9926996,13.2977074 33.1050254,12.8103568 32.6002695,12.1489525 C32.0781082,11.4701429 31.8692437,10.6520902 31.8692437,9.88625364 C31.8692437,7.74539238 33.2790792,5.95263864 35.3677243,5.95263864 C36.8645866,5.95263864 37.8392877,6.97955583 37.8392877,8.02387839 C37.8392877,8.26755366 37.8044769,8.40679667 37.7696662,8.47641817 C37.7174501,8.58085043 37.4737748,8.59825581 36.742749,8.59825581 Z M33.366106,8.07609452 L34.6018877,8.07609452 C35.8898856,8.07609452 36.2728038,8.00647302 36.4120469,7.90204076 C36.464263,7.86723001 36.5164791,7.7976085 36.5164791,7.57133861 C36.5164791,7.08398808 36.185777,6.47479992 35.1762652,6.47479992 C34.149348,6.47479992 33.2616738,7.41469023 33.2442684,7.98906764 C33.2442684,8.02387839 33.2442684,8.07609452 33.366106,8.07609452 Z M39.33615,17.3879708 C39.7364737,17.3879708 40.1542027,17.2313224 40.4500941,16.5699181 C41.3029575,14.6727321 42.7301984,11.6441966 43.3045758,10.4780364 L44.2792769,8.47641817 C44.8710597,7.24063647 45.1843564,6.73588056 45.7587338,6.6314483 L46.0546252,6.57923218 C46.1764629,6.47479992 46.1590575,6.21371928 46.0198145,6.14409777 C45.5324639,6.17890852 45.1321403,6.1963139 44.6970059,6.1963139 C44.2444661,6.1963139 43.7223048,6.17890852 43.1653328,6.14409777 C43.0260898,6.1963139 43.0086844,6.4922053 43.130522,6.57923218 L43.6700887,6.66625906 C43.9833855,6.71847518 44.0878177,6.84031282 44.0878177,6.96215045 C44.0878177,7.15360959 43.8615478,7.7976085 43.4786296,8.70268806 L42.8868468,10.0777128 C42.57355,10.7913332 42.295064,11.3308999 42.2428479,11.3657106 C42.1732264,11.3308999 41.8425242,10.4084149 41.738092,10.1299289 L41.1811199,8.5286343 C41.0766877,8.23274291 40.676364,7.10139346 40.676364,6.89252895 C40.676364,6.77069131 40.815607,6.71847518 41.0592823,6.66625906 L41.4944167,6.57923218 C41.6162543,6.4922053 41.5988489,6.1963139 41.4596059,6.14409777 C40.9026339,6.17890852 40.4152834,6.1963139 39.9453382,6.1963139 C39.3709608,6.1963139 38.8487995,6.17890852 38.2918275,6.14409777 C38.1525845,6.1963139 38.1351791,6.4922053 38.2396113,6.57923218 L38.6747458,6.66625906 C39.2839339,6.78809669 39.4057715,7.20582572 39.7016629,8.02387839 L41.0592823,11.7486289 C41.2855522,12.3926278 41.3551737,12.6014923 41.3551737,12.9495998 C41.3551737,13.1932751 41.233336,13.558788 41.1811199,13.698031 C41.0244715,14.11576 40.676364,14.8467858 40.1716081,15.6300278 C40.0497705,15.8214869 39.8757167,15.9433245 39.5972307,15.9433245 L39.2665285,15.9433245 C38.8836103,15.9433245 38.5703135,16.1695944 38.5703135,16.6395396 C38.5703135,17.074674 38.8313941,17.3879708 39.33615,17.3879708 Z&quot; id=&quot;Tracey&quot; fill=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
                &lt;/g&gt;
            &lt;/g&gt;
            &lt;path d=&quot;M95.5233465,486.582967 C102.211247,486.582967 103.731887,486.393363 104.777374,485.208886 C105.839635,484.005405 105.996219,482.321605 105.967341,474.739225 C105.962981,473.594646 105.961212,472.934324 105.961212,472.164621 C105.961212,470.785215 105.973719,469.582517 106.00164,467.785441 C106.10588,461.076081 105.986413,459.691009 104.987913,458.595058 C103.956817,457.46333 102.122056,457.215451 95.8590604,457.215451 C89.5470534,457.215451 87.4893798,457.538809 86.3715732,458.847861 C85.2904371,460.113969 85.1372609,461.755417 85.1900008,468.952794 C85.2002102,470.34606 85.2044919,471.18902 85.2044919,472.164621 C85.2044919,473.011976 85.2018977,473.741488 85.1956026,474.978435 C85.1584266,482.283239 85.3108702,483.923153 86.3590334,485.130577 C87.4112097,486.342624 89.1463085,486.582967 95.5233465,486.582967 Z&quot; id=&quot;Oval-1-Copy-22&quot; stroke=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
            &lt;g id=&quot;key2&quot; transform=&quot;translate(32.459408, 384.918275)&quot; stroke=&quot;#82D7DA&quot;&gt;
                &lt;path d=&quot;M10.8478099,29.8675158 C17.8662182,29.8675158 19.3439093,29.6490307 20.3117972,28.2220547 C21.2715546,26.8070657 21.2856755,26.5299835 21.2856755,15.4491697 C21.2856755,14.0697633 21.2981826,12.8670658 21.3261029,11.0699898 C21.4303431,4.36063006 21.3108767,2.97555764 20.3123765,1.87960647 C19.2812808,0.747878611 17.4465191,0.5 11.1835238,0.5 C4.8715168,0.5 2.81384321,0.823357307 1.6960366,2.13240968 C0.614900502,3.39851759 0.461724293,5.03996524 0.514464241,12.2373422 C0.524673628,13.6306088 0.528955327,14.4735684 0.528955327,15.4491697 C0.528955327,16.2965249 0.526361076,17.0260367 0.520065952,18.2629834 C0.48289002,25.5677876 0.635333552,27.2077015 1.68349682,28.4151256 C2.73567311,29.6271725 4.47077193,29.8675158 10.8478099,29.8675158 Z&quot; id=&quot;Oval-1-Copy-19&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M90.8037565,29.8675158 C97.8221647,29.8675158 99.2998559,29.6490307 100.267744,28.2220547 C101.227501,26.8070657 101.241622,26.5299835 101.241622,15.4491697 C101.241622,14.0697633 101.254129,12.8670658 101.282049,11.0699898 C101.38629,4.36063006 101.266823,2.97555764 100.268323,1.87960647 C99.2372274,0.747878611 97.4024657,0.5 91.1394703,0.5 C84.8274634,0.5 82.7697898,0.823357307 81.6519832,2.13240968 C80.5708471,3.39851759 80.4176709,5.03996524 80.4704108,12.2373422 C80.4806202,13.6306088 80.4849019,14.4735684 80.4849019,15.4491697 C80.4849019,16.2965249 80.4823077,17.0260367 80.4760125,18.2629834 C80.4388366,25.5677876 80.5912801,27.2077015 81.6394434,28.4151256 C82.6916197,29.6271725 84.4267185,29.8675158 90.8037565,29.8675158 Z&quot; id=&quot;Oval-1-Copy-20&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M170.759703,29.8675158 C177.778111,29.8675158 179.255802,29.6490307 180.22369,28.2220547 C181.183448,26.8070657 181.197569,26.5299835 181.197569,15.4491697 C181.197569,14.0697633 181.210076,12.8670658 181.237996,11.0699898 C181.342236,4.36063006 181.22277,2.97555764 180.22427,1.87960647 C179.193174,0.747878611 177.358412,0.5 171.095417,0.5 C164.78341,0.5 162.725736,0.823357307 161.60793,2.13240968 C160.526794,3.39851759 160.373617,5.03996524 160.426357,12.2373422 C160.436567,13.6306088 160.440848,14.4735684 160.440848,15.4491697 C160.440848,16.2965249 160.438254,17.0260367 160.431959,18.2629834 C160.394783,25.5677876 160.547227,27.2077015 161.59539,28.4151256 C162.647566,29.6271725 164.382665,29.8675158 170.759703,29.8675158 Z&quot; id=&quot;Oval-1-Copy-21&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M37.4997921,29.8675158 C44.5182004,29.8675158 45.9958915,29.6490307 46.9637794,28.2220547 C47.9235367,26.8070657 47.9376577,26.5299835 47.9376577,15.4491697 C47.9376577,14.0697633 47.9501648,12.8670658 47.9780851,11.0699898 C48.0823253,4.36063006 47.9628588,2.97555764 46.9643587,1.87960647 C45.933263,0.747878611 44.0985013,0.5 37.835506,0.5 C31.523499,0.5 29.4658254,0.823357307 28.3480188,2.13240968 C27.2668827,3.39851759 27.1137065,5.03996524 27.1664464,12.2373422 C27.1766558,13.6306088 27.1809375,14.4735684 27.1809375,15.4491697 C27.1809375,16.2965249 27.1783433,17.0260367 27.1720481,18.2629834 C27.1348722,25.5677876 27.2873157,27.2077015 28.335479,28.4151256 C29.3876553,29.6271725 31.1227541,29.8675158 37.4997921,29.8675158 Z&quot; id=&quot;Oval-1-Copy-22&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M117.455739,29.8675158 C124.474147,29.8675158 125.951838,29.6490307 126.919726,28.2220547 C127.879483,26.8070657 127.893604,26.5299835 127.893604,15.4491697 C127.893604,14.0697633 127.906111,12.8670658 127.934032,11.0699898 C128.038272,4.36063006 127.918805,2.97555764 126.920305,1.87960647 C125.88921,0.747878611 124.054448,0.5 117.791453,0.5 C111.479446,0.5 109.421772,0.823357307 108.303965,2.13240968 C107.222829,3.39851759 107.069653,5.03996524 107.122393,12.2373422 C107.132602,13.6306088 107.136884,14.4735684 107.136884,15.4491697 C107.136884,16.2965249 107.13429,17.0260367 107.127995,18.2629834 C107.090819,25.5677876 107.243262,27.2077015 108.291426,28.4151256 C109.343602,29.6271725 111.078701,29.8675158 117.455739,29.8675158 Z&quot; id=&quot;Oval-1-Copy-23&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M197.411685,29.8675158 C204.430094,29.8675158 205.907785,29.6490307 206.875673,28.2220547 C207.83543,26.8070657 207.849551,26.5299835 207.849551,15.4491697 C207.849551,14.0697633 207.862058,12.8670658 207.889978,11.0699898 C207.994218,4.36063006 207.874752,2.97555764 206.876252,1.87960647 C205.845156,0.747878611 204.010394,0.5 197.747399,0.5 C191.435392,0.5 189.377719,0.823357307 188.259912,2.13240968 C187.178776,3.39851759 187.0256,5.03996524 187.07834,12.2373422 C187.088549,13.6306088 187.092831,14.4735684 187.092831,15.4491697 C187.092831,16.2965249 187.090236,17.0260367 187.083941,18.2629834 C187.046765,25.5677876 187.199209,27.2077015 188.247372,28.4151256 C189.299548,29.6271725 191.034647,29.8675158 197.411685,29.8675158 Z&quot; id=&quot;Oval-1-Copy-24&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M64.1517743,29.8675158 C71.1701825,29.8675158 72.6478737,29.6490307 73.6157616,28.2220547 C74.5755189,26.8070657 74.5896399,26.5299835 74.5896399,15.4491697 C74.5896399,14.0697633 74.602147,12.8670658 74.6300673,11.0699898 C74.7343075,4.36063006 74.614841,2.97555764 73.6163409,1.87960647 C72.5852452,0.747878611 70.7504835,0.5 64.4874882,0.5 C58.1754812,0.5 56.1178076,0.823357307 55.000001,2.13240968 C53.9188649,3.39851759 53.7656887,5.03996524 53.8184286,12.2373422 C53.828638,13.6306088 53.8329197,14.4735684 53.8329197,15.4491697 C53.8329197,16.2965249 53.8303255,17.0260367 53.8240303,18.2629834 C53.7868544,25.5677876 53.9392979,27.2077015 54.9874612,28.4151256 C56.0396375,29.6271725 57.7747363,29.8675158 64.1517743,29.8675158 Z&quot; id=&quot;Oval-1-Copy-25&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M144.107721,29.8675158 C151.126129,29.8675158 152.60382,29.6490307 153.571708,28.2220547 C154.531466,26.8070657 154.545586,26.5299835 154.545586,15.4491697 C154.545586,14.0697633 154.558094,12.8670658 154.586014,11.0699898 C154.690254,4.36063006 154.570788,2.97555764 153.572287,1.87960647 C152.541192,0.747878611 150.70643,0.5 144.443435,0.5 C138.131428,0.5 136.073754,0.823357307 134.955948,2.13240968 C133.874811,3.39851759 133.721635,5.03996524 133.774375,12.2373422 C133.784585,13.6306088 133.788866,14.4735684 133.788866,15.4491697 C133.788866,16.2965249 133.786272,17.0260367 133.779977,18.2629834 C133.742801,25.5677876 133.895245,27.2077015 134.943408,28.4151256 C135.995584,29.6271725 137.730683,29.8675158 144.107721,29.8675158 Z&quot; id=&quot;Oval-1-Copy-26&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M224.063667,29.8675158 C231.082076,29.8675158 232.559767,29.6490307 233.527655,28.2220547 C234.487412,26.8070657 234.501533,26.5299835 234.501533,15.4491697 C234.501533,14.0697633 234.51404,12.8670658 234.54196,11.0699898 C234.646201,4.36063006 234.526734,2.97555764 233.528234,1.87960647 C232.497138,0.747878611 230.662377,0.5 224.399381,0.5 C218.087374,0.5 216.029701,0.823357307 214.911894,2.13240968 C213.830758,3.39851759 213.677582,5.03996524 213.730322,12.2373422 C213.740531,13.6306088 213.744813,14.4735684 213.744813,15.4491697 C213.744813,16.2965249 213.742219,17.0260367 213.735923,18.2629834 C213.698748,25.5677876 213.851191,27.2077015 214.899354,28.4151256 C215.951531,29.6271725 217.686629,29.8675158 224.063667,29.8675158 Z&quot; id=&quot;Oval-1-Copy-27&quot;&gt;&lt;/path&gt;
            &lt;/g&gt;
            &lt;g id=&quot;key3&quot; transform=&quot;translate(58.567472, 421.904699)&quot; stroke=&quot;#82D7DA&quot;&gt;
                &lt;path d=&quot;M10.8478099,29.8675158 C17.8662182,29.8675158 19.3439093,29.6490307 20.3117972,28.2220547 C21.2715546,26.8070657 21.2856755,26.5299835 21.2856755,15.4491697 C21.2856755,14.0697633 21.2981826,12.8670658 21.3261029,11.0699898 C21.4303431,4.36063006 21.3108767,2.97555764 20.3123765,1.87960647 C19.2812808,0.747878611 17.4465191,0.5 11.1835238,0.5 C4.8715168,0.5 2.81384321,0.823357307 1.6960366,2.13240968 C0.614900502,3.39851759 0.461724293,5.03996524 0.514464241,12.2373422 C0.524673628,13.6306088 0.528955327,14.4735684 0.528955327,15.4491697 C0.528955327,16.2965249 0.526361076,17.0260367 0.520065952,18.2629834 C0.48289002,25.5677876 0.635333552,27.2077015 1.68349682,28.4151256 C2.73567311,29.6271725 4.47077193,29.8675158 10.8478099,29.8675158 Z&quot; id=&quot;Oval-1-Copy-19&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M90.8037565,29.8675158 C97.8221647,29.8675158 99.2998559,29.6490307 100.267744,28.2220547 C101.227501,26.8070657 101.241622,26.5299835 101.241622,15.4491697 C101.241622,14.0697633 101.254129,12.8670658 101.282049,11.0699898 C101.38629,4.36063006 101.266823,2.97555764 100.268323,1.87960647 C99.2372274,0.747878611 97.4024657,0.5 91.1394703,0.5 C84.8274634,0.5 82.7697898,0.823357307 81.6519832,2.13240968 C80.5708471,3.39851759 80.4176709,5.03996524 80.4704108,12.2373422 C80.4806202,13.6306088 80.4849019,14.4735684 80.4849019,15.4491697 C80.4849019,16.2965249 80.4823077,17.0260367 80.4760125,18.2629834 C80.4388366,25.5677876 80.5912801,27.2077015 81.6394434,28.4151256 C82.6916197,29.6271725 84.4267185,29.8675158 90.8037565,29.8675158 Z&quot; id=&quot;Oval-1-Copy-20&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M170.759703,29.8675158 C177.778111,29.8675158 179.255802,29.6490307 180.22369,28.2220547 C181.183448,26.8070657 181.197569,26.5299835 181.197569,15.4491697 C181.197569,14.0697633 181.210076,12.8670658 181.237996,11.0699898 C181.342236,4.36063006 181.22277,2.97555764 180.22427,1.87960647 C179.193174,0.747878611 177.358412,0.5 171.095417,0.5 C164.78341,0.5 162.725736,0.823357307 161.60793,2.13240968 C160.526794,3.39851759 160.373617,5.03996524 160.426357,12.2373422 C160.436567,13.6306088 160.440848,14.4735684 160.440848,15.4491697 C160.440848,16.2965249 160.438254,17.0260367 160.431959,18.2629834 C160.394783,25.5677876 160.547227,27.2077015 161.59539,28.4151256 C162.647566,29.6271725 164.382665,29.8675158 170.759703,29.8675158 Z&quot; id=&quot;Oval-1-Copy-21&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M37.4997921,29.8675158 C44.5182004,29.8675158 45.9958915,29.6490307 46.9637794,28.2220547 C47.9235367,26.8070657 47.9376577,26.5299835 47.9376577,15.4491697 C47.9376577,14.0697633 47.9501648,12.8670658 47.9780851,11.0699898 C48.0823253,4.36063006 47.9628588,2.97555764 46.9643587,1.87960647 C45.933263,0.747878611 44.0985013,0.5 37.835506,0.5 C31.523499,0.5 29.4658254,0.823357307 28.3480188,2.13240968 C27.2668827,3.39851759 27.1137065,5.03996524 27.1664464,12.2373422 C27.1766558,13.6306088 27.1809375,14.4735684 27.1809375,15.4491697 C27.1809375,16.2965249 27.1783433,17.0260367 27.1720481,18.2629834 C27.1348722,25.5677876 27.2873157,27.2077015 28.335479,28.4151256 C29.3876553,29.6271725 31.1227541,29.8675158 37.4997921,29.8675158 Z&quot; id=&quot;Oval-1-Copy-22&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M117.455739,29.8675158 C124.474147,29.8675158 125.951838,29.6490307 126.919726,28.2220547 C127.879483,26.8070657 127.893604,26.5299835 127.893604,15.4491697 C127.893604,14.0697633 127.906111,12.8670658 127.934032,11.0699898 C128.038272,4.36063006 127.918805,2.97555764 126.920305,1.87960647 C125.88921,0.747878611 124.054448,0.5 117.791453,0.5 C111.479446,0.5 109.421772,0.823357307 108.303965,2.13240968 C107.222829,3.39851759 107.069653,5.03996524 107.122393,12.2373422 C107.132602,13.6306088 107.136884,14.4735684 107.136884,15.4491697 C107.136884,16.2965249 107.13429,17.0260367 107.127995,18.2629834 C107.090819,25.5677876 107.243262,27.2077015 108.291426,28.4151256 C109.343602,29.6271725 111.078701,29.8675158 117.455739,29.8675158 Z&quot; id=&quot;Oval-1-Copy-23&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M64.1517743,29.8675158 C71.1701825,29.8675158 72.6478737,29.6490307 73.6157616,28.2220547 C74.5755189,26.8070657 74.5896399,26.5299835 74.5896399,15.4491697 C74.5896399,14.0697633 74.602147,12.8670658 74.6300673,11.0699898 C74.7343075,4.36063006 74.614841,2.97555764 73.6163409,1.87960647 C72.5852452,0.747878611 70.7504835,0.5 64.4874882,0.5 C58.1754812,0.5 56.1178076,0.823357307 55.000001,2.13240968 C53.9188649,3.39851759 53.7656887,5.03996524 53.8184286,12.2373422 C53.828638,13.6306088 53.8329197,14.4735684 53.8329197,15.4491697 C53.8329197,16.2965249 53.8303255,17.0260367 53.8240303,18.2629834 C53.7868544,25.5677876 53.9392979,27.2077015 54.9874612,28.4151256 C56.0396375,29.6271725 57.7747363,29.8675158 64.1517743,29.8675158 Z&quot; id=&quot;Oval-1-Copy-25&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M144.107721,29.8675158 C151.126129,29.8675158 152.60382,29.6490307 153.571708,28.2220547 C154.531466,26.8070657 154.545586,26.5299835 154.545586,15.4491697 C154.545586,14.0697633 154.558094,12.8670658 154.586014,11.0699898 C154.690254,4.36063006 154.570788,2.97555764 153.572287,1.87960647 C152.541192,0.747878611 150.70643,0.5 144.443435,0.5 C138.131428,0.5 136.073754,0.823357307 134.955948,2.13240968 C133.874811,3.39851759 133.721635,5.03996524 133.774375,12.2373422 C133.784585,13.6306088 133.788866,14.4735684 133.788866,15.4491697 C133.788866,16.2965249 133.786272,17.0260367 133.779977,18.2629834 C133.742801,25.5677876 133.895245,27.2077015 134.943408,28.4151256 C135.995584,29.6271725 137.730683,29.8675158 144.107721,29.8675158 Z&quot; id=&quot;Oval-1-Copy-26&quot;&gt;&lt;/path&gt;
            &lt;/g&gt;
            &lt;g id=&quot;key1&quot; transform=&quot;translate(19.405376, 345.756178)&quot; stroke=&quot;#82D7DA&quot;&gt;
                &lt;path d=&quot;M10.8478099,29.8675158 C17.8662182,29.8675158 19.3439093,29.6490307 20.3117972,28.2220547 C21.2715546,26.8070657 21.2856755,26.5299835 21.2856755,15.4491697 C21.2856755,14.0697633 21.2981826,12.8670658 21.3261029,11.0699898 C21.4303431,4.36063006 21.3108767,2.97555764 20.3123765,1.87960647 C19.2812808,0.747878611 17.4465191,0.5 11.1835238,0.5 C4.8715168,0.5 2.81384321,0.823357307 1.6960366,2.13240968 C0.614900502,3.39851759 0.461724293,5.03996524 0.514464241,12.2373422 C0.524673628,13.6306088 0.528955327,14.4735684 0.528955327,15.4491697 C0.528955327,16.2965249 0.526361076,17.0260367 0.520065952,18.2629834 C0.48289002,25.5677876 0.635333552,27.2077015 1.68349682,28.4151256 C2.73567311,29.6271725 4.47077193,29.8675158 10.8478099,29.8675158 Z&quot; id=&quot;Oval-1-Copy-8&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M91.3476745,29.8675158 C98.3660827,29.8675158 99.8437739,29.6490307 100.811662,28.2220547 C101.771419,26.8070657 101.78554,26.5299835 101.78554,15.4491697 C101.78554,14.0697633 101.798047,12.8670658 101.825967,11.0699898 C101.930208,4.36063006 101.810741,2.97555764 100.812241,1.87960647 C99.7811454,0.747878611 97.9463837,0.5 91.6833884,0.5 C85.3713814,0.5 83.3137078,0.823357307 82.1959012,2.13240968 C81.1147651,3.39851759 80.9615889,5.03996524 81.0143288,12.2373422 C81.0245382,13.6306088 81.0288199,14.4735684 81.0288199,15.4491697 C81.0288199,16.2965249 81.0262257,17.0260367 81.0199305,18.2629834 C80.9827546,25.5677876 81.1351981,27.2077015 82.1833614,28.4151256 C83.2355377,29.6271725 84.9706365,29.8675158 91.3476745,29.8675158 Z&quot; id=&quot;Oval-1-Copy-12&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M169.671867,29.8675158 C176.690275,29.8675158 178.167966,29.6490307 179.135854,28.2220547 C180.095612,26.8070657 180.109733,26.5299835 180.109733,15.4491697 C180.109733,14.0697633 180.12224,12.8670658 180.15016,11.0699898 C180.2544,4.36063006 180.134934,2.97555764 179.136434,1.87960647 C178.105338,0.747878611 176.270576,0.5 170.007581,0.5 C163.695574,0.5 161.6379,0.823357307 160.520094,2.13240968 C159.438958,3.39851759 159.285781,5.03996524 159.338521,12.2373422 C159.348731,13.6306088 159.353012,14.4735684 159.353012,15.4491697 C159.353012,16.2965249 159.350418,17.0260367 159.344123,18.2629834 C159.306947,25.5677876 159.459391,27.2077015 160.507554,28.4151256 C161.55973,29.6271725 163.294829,29.8675158 169.671867,29.8675158 Z&quot; id=&quot;Oval-1-Copy-15&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M36.9558741,29.8675158 C43.9742823,29.8675158 45.4519735,29.6490307 46.4198614,28.2220547 C47.3796187,26.8070657 47.3937397,26.5299835 47.3937397,15.4491697 C47.3937397,14.0697633 47.4062468,12.8670658 47.4341671,11.0699898 C47.5384073,4.36063006 47.4189408,2.97555764 46.4204407,1.87960647 C45.389345,0.747878611 43.5545833,0.5 37.291588,0.5 C30.979581,0.5 28.9219074,0.823357307 27.8041008,2.13240968 C26.7229647,3.39851759 26.5697885,5.03996524 26.6225284,12.2373422 C26.6327378,13.6306088 26.6370195,14.4735684 26.6370195,15.4491697 C26.6370195,16.2965249 26.6344253,17.0260367 26.6281301,18.2629834 C26.5909542,25.5677876 26.7433977,27.2077015 27.791561,28.4151256 C28.8437373,29.6271725 30.5788361,29.8675158 36.9558741,29.8675158 Z&quot; id=&quot;Oval-1-Copy-10&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M117.455739,29.8675158 C124.474147,29.8675158 125.951838,29.6490307 126.919726,28.2220547 C127.879483,26.8070657 127.893604,26.5299835 127.893604,15.4491697 C127.893604,14.0697633 127.906111,12.8670658 127.934032,11.0699898 C128.038272,4.36063006 127.918805,2.97555764 126.920305,1.87960647 C125.88921,0.747878611 124.054448,0.5 117.791453,0.5 C111.479446,0.5 109.421772,0.823357307 108.303965,2.13240968 C107.222829,3.39851759 107.069653,5.03996524 107.122393,12.2373422 C107.132602,13.6306088 107.136884,14.4735684 107.136884,15.4491697 C107.136884,16.2965249 107.13429,17.0260367 107.127995,18.2629834 C107.090819,25.5677876 107.243262,27.2077015 108.291426,28.4151256 C109.343602,29.6271725 111.078701,29.8675158 117.455739,29.8675158 Z&quot; id=&quot;Oval-1-Copy-13&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M197.955603,29.8675158 C204.974012,29.8675158 206.451703,29.6490307 207.419591,28.2220547 C208.379348,26.8070657 208.393469,26.5299835 208.393469,15.4491697 C208.393469,14.0697633 208.405976,12.8670658 208.433896,11.0699898 C208.538136,4.36063006 208.41867,2.97555764 207.42017,1.87960647 C206.389074,0.747878611 204.554312,0.5 198.291317,0.5 C191.97931,0.5 189.921637,0.823357307 188.80383,2.13240968 C187.722694,3.39851759 187.569518,5.03996524 187.622258,12.2373422 C187.632467,13.6306088 187.636749,14.4735684 187.636749,15.4491697 C187.636749,16.2965249 187.634154,17.0260367 187.627859,18.2629834 C187.590683,25.5677876 187.743127,27.2077015 188.79129,28.4151256 C189.843466,29.6271725 191.578565,29.8675158 197.955603,29.8675158 Z&quot; id=&quot;Oval-1-Copy-16&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M63.0639383,29.8675158 C70.0823465,29.8675158 71.5600377,29.6490307 72.5279256,28.2220547 C73.4876829,26.8070657 73.5018039,26.5299835 73.5018039,15.4491697 C73.5018039,14.0697633 73.514311,12.8670658 73.5422313,11.0699898 C73.6464715,4.36063006 73.527005,2.97555764 72.5285049,1.87960647 C71.4974092,0.747878611 69.6626475,0.5 63.3996521,0.5 C57.0876452,0.5 55.0299716,0.823357307 53.912165,2.13240968 C52.8310289,3.39851759 52.6778527,5.03996524 52.7305926,12.2373422 C52.740802,13.6306088 52.7450837,14.4735684 52.7450837,15.4491697 C52.7450837,16.2965249 52.7424895,17.0260367 52.7361943,18.2629834 C52.6990184,25.5677876 52.8514619,27.2077015 53.8996252,28.4151256 C54.9518015,29.6271725 56.6869003,29.8675158 63.0639383,29.8675158 Z&quot; id=&quot;Oval-1-Copy-11&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M143.563803,29.8675158 C150.582211,29.8675158 152.059902,29.6490307 153.02779,28.2220547 C153.987548,26.8070657 154.001668,26.5299835 154.001668,15.4491697 C154.001668,14.0697633 154.014176,12.8670658 154.042096,11.0699898 C154.146336,4.36063006 154.02687,2.97555764 153.028369,1.87960647 C151.997274,0.747878611 150.162512,0.5 143.899517,0.5 C137.58751,0.5 135.529836,0.823357307 134.41203,2.13240968 C133.330893,3.39851759 133.177717,5.03996524 133.230457,12.2373422 C133.240667,13.6306088 133.244948,14.4735684 133.244948,15.4491697 C133.244948,16.2965249 133.242354,17.0260367 133.236059,18.2629834 C133.198883,25.5677876 133.351327,27.2077015 134.39949,28.4151256 C135.451666,29.6271725 137.186765,29.8675158 143.563803,29.8675158 Z&quot; id=&quot;Oval-1-Copy-14&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M224.063667,29.8675158 C231.082076,29.8675158 232.559767,29.6490307 233.527655,28.2220547 C234.487412,26.8070657 234.501533,26.5299835 234.501533,15.4491697 C234.501533,14.0697633 234.51404,12.8670658 234.54196,11.0699898 C234.646201,4.36063006 234.526734,2.97555764 233.528234,1.87960647 C232.497138,0.747878611 230.662377,0.5 224.399381,0.5 C218.087374,0.5 216.029701,0.823357307 214.911894,2.13240968 C213.830758,3.39851759 213.677582,5.03996524 213.730322,12.2373422 C213.740531,13.6306088 213.744813,14.4735684 213.744813,15.4491697 C213.744813,16.2965249 213.742219,17.0260367 213.735923,18.2629834 C213.698748,25.5677876 213.851191,27.2077015 214.899354,28.4151256 C215.951531,29.6271725 217.686629,29.8675158 224.063667,29.8675158 Z&quot; id=&quot;Oval-1-Copy-17&quot;&gt;&lt;/path&gt;
                &lt;path d=&quot;M250.171732,29.8675158 C257.19014,29.8675158 258.667831,29.6490307 259.635719,28.2220547 C260.595476,26.8070657 260.609597,26.5299835 260.609597,15.4491697 C260.609597,14.0697633 260.622104,12.8670658 260.650025,11.0699898 C260.754265,4.36063006 260.634798,2.97555764 259.636298,1.87960647 C258.605203,0.747878611 256.770441,0.5 250.507446,0.5 C244.195439,0.5 242.137765,0.823357307 241.019958,2.13240968 C239.938822,3.39851759 239.785646,5.03996524 239.838386,12.2373422 C239.848595,13.6306088 239.852877,14.4735684 239.852877,15.4491697 C239.852877,16.2965249 239.850283,17.0260367 239.843988,18.2629834 C239.806812,25.5677876 239.959255,27.2077015 241.007419,28.4151256 C242.059595,29.6271725 243.794694,29.8675158 250.171732,29.8675158 Z&quot; id=&quot;Oval-1-Copy-18&quot;&gt;&lt;/path&gt;
            &lt;/g&gt;
            &lt;path d=&quot;M34.529563,450.652014 C45.9490791,450.652014 46.6141737,450.605859 47.9452086,449.344841 C49.2502595,448.10844 49.2657594,447.895435 49.2657594,436.898115 C49.2657594,434.866505 49.4108518,429.132885 49.3974522,428.169269 C49.3668423,425.967982 49.1184179,424.78879 48.4998312,424.036192 C47.3139522,422.593401 45.4444892,422.404791 34.9972047,422.404791 C24.4001268,422.404791 22.4408227,422.595072 21.0902938,424.052391 C20.3786445,424.820313 20.0505532,426.024524 19.947162,428.179333 C19.8801369,429.576225 19.9591461,436.929453 19.9591461,436.898115 C19.9591461,438.104565 19.9357498,441.575274 19.934983,441.867481 C19.930693,443.502361 19.9503602,444.580356 20.0098066,445.492819 C20.1430737,447.538382 20.4898786,448.665942 21.2008775,449.354916 C22.4956509,450.609581 23.1079599,450.652014 34.529563,450.652014 Z&quot; id=&quot;Oval-1-Copy-19&quot; stroke=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
            &lt;path d=&quot;M34.529563,485.462766 C45.9490791,485.462766 46.6141737,485.416611 47.9452086,484.155593 C49.2502595,482.919192 49.2657594,482.706188 49.2657594,471.708867 C49.2657594,469.677257 49.4108518,463.943638 49.3974522,462.980021 C49.3668423,460.778735 49.1184179,459.599543 48.4998312,458.846944 C47.3139522,457.404153 45.4444892,457.215544 34.9972047,457.215544 C24.4001268,457.215544 22.4408227,457.405824 21.0902938,458.863144 C20.3786445,459.631066 20.0505532,460.835276 19.947162,462.990086 C19.8801369,464.386977 19.9591461,471.740205 19.9591461,471.708867 C19.9591461,472.915317 19.9357498,476.386026 19.934983,476.678233 C19.930693,478.313114 19.9503602,479.391108 20.0098066,480.303571 C20.1430737,482.349135 20.4898786,483.476694 21.2008775,484.165668 C22.4956509,485.420333 23.1079599,485.462766 34.529563,485.462766 Z&quot; id=&quot;Oval-1-Copy-28&quot; stroke=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
            &lt;path d=&quot;M67.1646432,485.462766 C78.5841594,485.462766 79.2492539,485.416611 80.5802889,484.155593 C81.8853398,482.919192 81.9008396,482.706188 81.9008396,471.708867 C81.9008396,469.677257 82.045932,463.943638 82.0325325,462.980021 C82.0019225,460.778735 81.7534981,459.599543 81.1349115,458.846944 C79.9490324,457.404153 78.0795695,457.215544 67.6322849,457.215544 C57.0352071,457.215544 55.0759029,457.405824 53.7253741,458.863144 C53.0137247,459.631066 52.6856335,460.835276 52.5822423,462.990086 C52.5152172,464.386977 52.5942264,471.740205 52.5942264,471.708867 C52.5942264,472.915317 52.57083,476.386026 52.5700633,476.678233 C52.5657733,478.313114 52.5854404,479.391108 52.6448868,480.303571 C52.778154,482.349135 53.1249588,483.476694 53.8359577,484.165668 C55.1307312,485.420333 55.7430401,485.462766 67.1646432,485.462766 Z&quot; id=&quot;Oval-1-Copy-29&quot; stroke=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
            &lt;path d=&quot;M262.975125,450.652014 C274.394641,450.652014 275.059735,450.605859 276.39077,449.344841 C277.695821,448.10844 277.711321,447.895435 277.711321,436.898115 C277.711321,434.866505 277.856413,429.132885 277.843014,428.169269 C277.812404,425.967982 277.56398,424.78879 276.945393,424.036192 C275.759514,422.593401 273.890051,422.404791 263.442766,422.404791 C252.845688,422.404791 250.886384,422.595072 249.535855,424.052391 C248.824206,424.820313 248.496115,426.024524 248.392724,428.179333 C248.325699,429.576225 248.404708,436.929453 248.404708,436.898115 C248.404708,438.104565 248.381311,441.575274 248.380545,441.867481 C248.376255,443.502361 248.395922,444.580356 248.455368,445.492819 C248.588635,447.538382 248.93544,448.665942 249.646439,449.354916 C250.941213,450.609581 251.553522,450.652014 262.975125,450.652014 Z&quot; id=&quot;Oval-1-Copy-29&quot; stroke=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
            &lt;rect id=&quot;Rectangle&quot; stroke=&quot;#82D7DA&quot; x=&quot;113.459273&quot; y=&quot;457.215451&quot; width=&quot;99.0809127&quot; height=&quot;29.3723814&quot; rx=&quot;2&quot;&gt;&lt;/rect&gt;
            &lt;rect id=&quot;Rectangle-Copy&quot; stroke=&quot;#82D7DA&quot; x=&quot;220.067202&quot; y=&quot;457.215451&quot; width=&quot;59.9188164&quot; height=&quot;29.3723814&quot; rx=&quot;2&quot;&gt;&lt;/rect&gt;
            &lt;path d=&quot;M141.711748,322.030283 C141.711748,322.399309 141.664639,322.770292 141.57042,323.143244 C141.4762,323.516196 141.340762,323.86755 141.164101,324.197318 C140.987439,324.527086 140.76956,324.831332 140.510457,325.110064 C140.251354,325.388796 139.956922,325.618453 139.627154,325.79904 C139.415161,325.916814 139.18943,326.011032 138.949956,326.081697 C138.710482,326.152361 138.465122,326.209284 138.213871,326.252468 C137.962619,326.295652 137.711371,326.325095 137.460119,326.340799 C137.208867,326.356502 136.965471,326.364353 136.729922,326.364353 L134.715993,326.364353 L134.715993,317.649103 L136.69459,317.649103 C137.000803,317.649103 137.3129,317.662843 137.630891,317.690324 C137.948881,317.717804 138.264904,317.768839 138.578969,317.843429 C138.893034,317.91802 139.195316,318.020089 139.485826,318.149641 C139.776336,318.279192 140.039361,318.449963 140.27491,318.661956 C140.510458,318.866098 140.71656,319.09968 140.893221,319.362709 C141.069883,319.625739 141.219061,319.902504 141.340761,320.193014 C141.462461,320.483524 141.554716,320.785806 141.617529,321.099871 C141.680342,321.413936 141.711748,321.72407 141.711748,322.030283 Z M140.098249,322.030283 C140.098249,321.62985 140.017771,321.239238 139.856813,320.858435 C139.695855,320.477632 139.466199,320.153757 139.167837,319.886802 C138.963695,319.706215 138.749742,319.566851 138.525971,319.468706 C138.3022,319.370561 138.07058,319.297934 137.831106,319.250825 C137.591632,319.203715 137.346273,319.176235 137.095021,319.168383 C136.843769,319.160531 136.588595,319.156606 136.329492,319.156606 L136.329492,324.856851 L136.671036,324.856851 C137.063616,324.856851 137.426748,324.835259 137.760442,324.792075 C138.094136,324.748891 138.437639,324.629156 138.790961,324.432865 C139.002955,324.315091 139.189428,324.167876 139.350386,323.991214 C139.511344,323.814553 139.648746,323.620228 139.762594,323.408235 C139.876443,323.196241 139.960846,322.972473 140.015808,322.736925 C140.070769,322.501376 140.098249,322.265831 140.098249,322.030283 Z M152.095459,322.030283 C152.095459,322.658412 151.975724,323.247274 151.736249,323.796888 C151.496775,324.346501 151.168975,324.823479 150.752839,325.227838 C150.336704,325.632196 149.851873,325.952144 149.298335,326.187693 C148.744796,326.423241 148.157896,326.541014 147.537618,326.541014 C146.909489,326.541014 146.320627,326.423241 145.771014,326.187693 C145.2214,325.952144 144.738533,325.632196 144.322398,325.227838 C143.906262,324.823479 143.578462,324.346501 143.338988,323.796888 C143.099513,323.247274 142.979778,322.658412 142.979778,322.030283 C142.979778,321.394302 143.099513,320.799551 143.338988,320.246012 C143.578462,319.692473 143.904299,319.209606 144.316509,318.797396 C144.728719,318.385186 145.211586,318.061312 145.765125,317.825763 C146.318664,317.590215 146.909489,317.472442 147.537618,317.472442 C148.165748,317.472442 148.756573,317.590215 149.310112,317.825763 C149.863651,318.061312 150.346518,318.385186 150.758728,318.797396 C151.170938,319.209606 151.496775,319.692473 151.736249,320.246012 C151.975724,320.799551 152.095459,321.394302 152.095459,322.030283 Z M150.48196,322.018505 C150.48196,321.610221 150.407371,321.221572 150.25819,320.852546 C150.109009,320.48352 149.902907,320.161609 149.639878,319.886802 C149.376849,319.611996 149.064752,319.392154 148.703578,319.22727 C148.342403,319.062386 147.953754,318.979945 147.537618,318.979945 C147.121483,318.979945 146.732834,319.062386 146.371659,319.22727 C146.010485,319.392154 145.698388,319.611996 145.435359,319.886802 C145.172329,320.161609 144.966228,320.48352 144.817047,320.852546 C144.667866,321.221572 144.593277,321.610221 144.593277,322.018505 C144.593277,322.426789 144.669829,322.813476 144.822936,323.178576 C144.976042,323.543676 145.184107,323.863625 145.447136,324.138431 C145.710165,324.413238 146.020299,324.631117 146.377548,324.792075 C146.734796,324.953033 147.121483,325.033511 147.537618,325.033511 C147.945902,325.033511 148.330626,324.953033 148.6918,324.792075 C149.052975,324.631117 149.365072,324.413238 149.628101,324.138431 C149.89113,323.863625 150.099195,323.543676 150.252301,323.178576 C150.405408,322.813476 150.48196,322.426789 150.48196,322.018505 Z M158.957737,326.364353 L155.318531,320.028131 L155.294977,320.028131 L155.294977,326.364353 L153.681477,326.364353 L153.681477,317.649103 L155.518747,317.649103 L159.12262,323.985325 L159.146175,323.985325 L159.146175,317.649103 L160.759674,317.649103 L160.759674,326.364353 L158.957737,326.364353 Z M162.663682,326.364353 L162.663682,317.649103 L167.351073,317.649103 L167.351073,319.156606 L164.277181,319.156606 L164.277181,321.288309 L167.221522,321.288309 L167.221522,322.795812 L164.277181,322.795812 L164.277181,324.856851 L167.351073,324.856851 L167.351073,326.364353 L162.663682,326.364353 Z&quot; id=&quot;DONE&quot; fill=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
            &lt;path d=&quot;M73.6753389,200.508315 C73.6753389,199.933937 73.6579335,199.916532 74.1800948,199.916532 L75.4158765,199.916532 C76.3731722,199.916532 77.0345765,200.055775 77.4349001,200.351666 C77.6959808,200.543125 77.8178184,201.187124 77.8700345,201.622259 C77.9570614,201.726691 78.2529528,201.726691 78.3225743,201.587448 C78.2703582,201.065287 78.3921958,199.655451 78.583655,198.941831 C78.5488442,198.872209 78.3573851,198.854804 78.2703582,198.889615 C78.0092775,199.342155 77.8526292,199.376965 76.9127388,199.376965 L69.8635615,199.376965 C69.0629142,199.376965 68.4885368,199.394371 68.3841045,198.837399 C68.3318884,198.785182 68.1056185,198.802588 68.0534024,198.837399 C67.9315648,199.533614 67.6704841,200.647558 67.3919981,201.4308 C67.4616196,201.570043 67.7052949,201.65707 67.8445379,201.552637 C68.035997,201.117503 68.2100508,200.734585 68.6277798,200.351666 C69.0629142,199.951343 70.0202099,199.916532 70.7686411,199.916532 L71.7259368,199.916532 C72.248098,199.916532 72.248098,199.933937 72.248098,200.473504 L72.248098,208.253707 C72.248098,210.081272 72.1610712,210.342352 71.1689647,210.429379 L70.5423712,210.481595 C70.4031282,210.568622 70.4379389,210.864514 70.5423712,210.91673 C71.6563153,210.881919 72.2655034,210.864514 72.9617185,210.864514 C73.6579335,210.864514 74.2497163,210.881919 75.2418227,210.91673 C75.346255,210.864514 75.3810657,210.551217 75.2766335,210.481595 L74.7196615,210.429379 C73.7101496,210.342352 73.6753389,210.081272 73.6753389,208.253707 L73.6753389,200.508315 Z M80.4634356,208.915111 C80.4634356,210.168298 80.4460302,210.324947 79.8020313,210.429379 L79.4713291,210.481595 C79.3494915,210.568622 79.3843023,210.864514 79.5061399,210.91673 C79.9586797,210.881919 80.480841,210.864514 81.1074345,210.864514 C81.7166227,210.864514 82.2213786,210.881919 83.0394312,210.91673 C83.1612689,210.864514 83.1960796,210.568622 83.074242,210.481595 L82.4476485,210.429379 C81.7862442,210.377163 81.7514334,210.168298 81.7514334,208.915111 L81.7514334,206.54798 C81.7514334,205.956197 81.8036495,205.451442 81.9777033,205.207766 C82.1169463,205.016307 82.3258108,204.859659 82.6042968,204.859659 C82.8479721,204.859659 83.1090527,204.964091 83.3701334,205.138145 C83.491971,205.207766 83.5789979,205.259982 83.7530517,205.259982 C84.0315377,205.259982 84.5014828,205.033713 84.5014828,204.459335 C84.5014828,204.041606 84.1533753,203.76312 83.7182409,203.76312 C83.074242,203.76312 82.4128377,204.302687 81.8036495,204.807443 C81.7688388,204.790037 81.7514334,204.737821 81.7514334,204.650794 L81.7514334,203.641282 C81.7514334,203.571661 81.6992173,203.53685 81.6121904,203.519445 C81.177056,203.780525 80.2545711,204.233065 79.8542474,204.372308 C79.7672205,204.424524 79.7672205,204.615983 79.836842,204.685605 L79.9934904,204.790037 C80.4634356,205.103334 80.4634356,205.190361 80.4634356,205.869171 L80.4634356,208.915111 Z M86.590128,208.010032 L88.6613677,207.261601 C88.9224484,207.174574 88.9572591,207.017925 88.9572591,206.756845 L88.9746645,205.956197 C88.9920699,205.312199 88.7832054,204.44193 87.704072,204.44193 C87.2167215,204.44193 86.6249387,204.685605 86.590128,205.225172 C86.5727226,205.503658 86.5553172,205.712522 86.4160742,205.816954 C86.1549936,206.025819 85.6850484,206.147657 85.4239678,206.147657 C85.2673194,206.147657 85.1802925,206.06063 85.1802925,205.903981 C85.1802925,204.998902 87.1471,203.76312 88.4176925,203.76312 C89.6708795,203.76312 90.2800677,204.494146 90.2278516,205.799549 L90.1234193,208.828085 C90.0886086,209.628732 90.245257,210.342352 90.9240666,210.342352 C91.0981204,210.342352 91.2547688,210.290136 91.359201,210.23792 C91.4462279,210.185704 91.5332548,210.116082 91.5854709,210.116082 C91.6550924,210.116082 91.7073086,210.220515 91.7073086,210.342352 C91.7073086,210.429379 91.0981204,211.108189 90.245257,211.108189 C89.8275279,211.108189 89.4097989,210.95154 89.1139075,210.568622 C89.044286,210.46419 88.9398538,210.324947 88.8354215,210.324947 C88.7135839,210.324947 88.5047193,210.481595 88.1566118,210.673054 C87.7736935,210.881919 87.3907753,211.108189 86.9034247,211.108189 C86.3986688,211.108189 85.9809398,210.968946 85.6850484,210.707865 C85.3543463,210.411974 85.1454818,209.976839 85.1454818,209.489489 C85.1454818,208.810679 85.4761839,208.410355 86.590128,208.010032 Z M86.4856957,209.280624 C86.4856957,209.576516 86.6945602,210.324947 87.5822344,210.324947 C87.9303419,210.324947 88.4699086,210.063866 88.6439624,209.889812 C88.8528269,209.680948 88.8528269,209.437273 88.8702322,209.07176 L88.905043,208.044843 C88.905043,207.853383 88.8354215,207.818573 88.7309892,207.818573 C88.626557,207.818573 88.3306656,207.888194 88.0173688,207.992626 C86.9904516,208.340734 86.4856957,208.601815 86.4856957,209.280624 Z M96.4067601,203.76312 C93.5174677,203.76312 92.1946591,205.764738 92.1946591,207.644519 C92.1946591,208.775868 92.5949827,209.628732 93.2041709,210.220515 C93.8133591,210.812297 94.6662225,211.108189 95.5887074,211.108189 C96.5982192,211.108189 97.9036225,210.620838 98.4954052,209.33284 C98.4779999,209.176192 98.3213515,209.054354 98.1821085,209.089165 C97.7817848,209.680948 97.2596235,210.133488 96.2501117,210.133488 C94.3877365,210.133488 93.4478462,208.514788 93.4478462,207.157168 C93.4478462,205.312199 94.6314117,204.354903 95.8497881,204.354903 C96.5634085,204.354903 97.2074074,204.807443 97.5903257,205.277388 C97.6599472,205.364415 97.7469741,205.399225 97.834001,205.399225 C98.0428655,205.399225 98.2169192,205.068523 98.2169192,204.755226 C98.2169192,204.459335 98.0950816,204.180849 97.9558386,204.059011 C97.4858934,203.850147 96.8070838,203.76312 96.4067601,203.76312 Z M104.012909,206.408737 L100.792915,206.408737 C100.340375,206.408737 100.32297,206.443548 100.32297,206.878682 C100.32297,208.636625 101.349887,210.133488 103.212262,210.133488 C103.78664,210.133488 104.27399,209.959434 104.813557,209.280624 C104.987611,209.228408 105.109448,209.33284 105.126854,209.489489 C104.552476,210.673054 103.299289,211.108189 102.394209,211.108189 C101.26286,211.108189 100.375186,210.620838 99.87043,209.959434 C99.3482687,209.280624 99.1394042,208.462572 99.1394042,207.696735 C99.1394042,205.555874 100.54924,203.76312 102.637885,203.76312 C104.134747,203.76312 105.109448,204.790037 105.109448,205.83436 C105.109448,206.078035 105.074637,206.217278 105.039827,206.2869 C104.987611,206.391332 104.743935,206.408737 104.012909,206.408737 Z M100.636267,205.886576 L101.872048,205.886576 C103.160046,205.886576 103.542964,205.816954 103.682207,205.712522 C103.734423,205.677711 103.78664,205.60809 103.78664,205.38182 C103.78664,204.89447 103.455937,204.285281 102.446426,204.285281 C101.419508,204.285281 100.531834,205.225172 100.514429,205.799549 C100.514429,205.83436 100.514429,205.886576 100.636267,205.886576 Z M106.606311,215.198452 C107.006634,215.198452 107.424363,215.041804 107.720255,214.380399 C108.573118,212.483213 110.000359,209.454678 110.574736,208.288518 L111.549437,206.2869 C112.14122,205.051118 112.454517,204.546362 113.028894,204.44193 L113.324786,204.389714 C113.446623,204.285281 113.429218,204.024201 113.289975,203.954579 C112.802624,203.98939 112.402301,204.006795 111.967166,204.006795 C111.514627,204.006795 110.992465,203.98939 110.435493,203.954579 C110.29625,204.006795 110.278845,204.302687 110.400683,204.389714 L110.940249,204.47674 C111.253546,204.528957 111.357978,204.650794 111.357978,204.772632 C111.357978,204.964091 111.131708,205.60809 110.74879,206.513169 L110.157007,207.888194 C109.84371,208.601815 109.565224,209.141381 109.513008,209.176192 C109.443387,209.141381 109.112685,208.218896 109.008252,207.94041 L108.45128,206.339116 C108.346848,206.043224 107.946524,204.911875 107.946524,204.70301 C107.946524,204.581173 108.085767,204.528957 108.329443,204.47674 L108.764577,204.389714 C108.886415,204.302687 108.869009,204.006795 108.729766,203.954579 C108.172794,203.98939 107.685444,204.006795 107.215499,204.006795 C106.641121,204.006795 106.11896,203.98939 105.561988,203.954579 C105.422745,204.006795 105.40534,204.302687 105.509772,204.389714 L105.944906,204.47674 C106.554094,204.598578 106.675932,205.016307 106.971823,205.83436 L108.329443,209.55911 C108.555713,210.203109 108.625334,210.411974 108.625334,210.760081 C108.625334,211.003757 108.503497,211.369269 108.45128,211.508512 C108.294632,211.926241 107.946524,212.657267 107.441769,213.440509 C107.319931,213.631968 107.145877,213.753806 106.867391,213.753806 L106.536689,213.753806 C106.153771,213.753806 105.840474,213.980076 105.840474,214.450021 C105.840474,214.885155 106.101555,215.198452 106.606311,215.198452 Z M119.625532,208.253707 C119.625532,210.081272 119.538505,210.342352 118.546399,210.429379 L117.972021,210.481595 C117.867589,210.586027 117.9024,210.864514 118.006832,210.91673 C119.033749,210.881919 119.625532,210.864514 120.373963,210.864514 L121.940447,210.864514 C123.489525,210.864514 125.038604,210.881919 126.605088,210.91673 C126.831358,210.446784 127.266492,209.106571 127.38833,208.497382 C127.318708,208.340734 127.075033,208.288518 126.953195,208.375545 C126.500655,209.280624 126.03071,209.889812 125.717414,210.063866 C125.334495,210.255325 124.829739,210.324947 123.489525,210.324947 C121.957852,210.324947 121.592339,210.133488 121.383475,209.924623 C121.104989,209.628732 121.052773,209.036949 121.052773,208.114464 L121.052773,205.660306 C121.052773,205.207766 121.104989,205.190361 121.62715,205.190361 L122.636662,205.190361 C123.315472,205.190361 123.733201,205.207766 123.976876,205.277388 C124.324983,205.364415 124.446821,205.625495 124.516443,205.938792 L124.673091,206.617602 C124.760118,206.722034 125.056009,206.722034 125.125631,206.600196 C125.125631,206.217278 125.056009,205.555874 125.056009,204.92928 C125.056009,204.267876 125.125631,203.589066 125.125631,203.171337 C125.056009,203.0495 124.760118,203.0495 124.673091,203.153932 L124.533848,203.867552 C124.446821,204.302687 124.324983,204.407119 124.116119,204.47674 C123.907254,204.546362 123.367688,204.581173 122.636662,204.581173 L121.62715,204.581173 C121.104989,204.581173 121.052773,204.581173 121.052773,204.093822 L121.052773,200.612747 C121.052773,199.951343 121.052773,199.916532 121.574934,199.916532 L122.828121,199.916532 C123.593958,199.916532 124.15093,199.933937 124.516443,200.020964 C125.421522,200.247234 125.57817,200.856422 125.839251,201.674475 C125.926278,201.778907 126.204764,201.744096 126.274386,201.639664 C126.204764,200.873828 126.100332,199.620641 125.9959,199.324749 C125.787035,199.376965 124.760118,199.376965 123.646174,199.376965 L120.373963,199.376965 C119.660343,199.376965 119.06856,199.35956 118.320129,199.324749 C118.215696,199.376965 118.180886,199.690262 118.285318,199.759884 L118.563804,199.794694 C119.590721,199.916532 119.625532,200.177613 119.625532,201.987772 L119.625532,208.253707 Z M138.49296,208.915111 C138.49296,210.168298 138.475554,210.324947 137.831555,210.429379 L137.518259,210.481595 C137.396421,210.568622 137.431232,210.864514 137.553069,210.91673 C138.04042,210.881919 138.510365,210.864514 139.136958,210.864514 C139.746147,210.864514 140.250903,210.881919 140.82528,210.91673 C140.947118,210.864514 140.981928,210.568622 140.860091,210.481595 L140.442362,210.429379 C139.815768,210.342352 139.780957,210.168298 139.780957,208.915111 L139.780957,205.921387 C139.780957,204.720416 139.102148,203.76312 137.709718,203.76312 C136.891665,203.76312 136.038802,204.163444 135.342587,204.650794 C135.185938,204.755226 135.0641,204.824848 134.907452,204.790037 C134.420102,204.076417 133.932751,203.76312 133.062482,203.76312 C132.227024,203.76312 131.408971,204.180849 130.747567,204.650794 C130.62573,204.650794 130.556108,204.563767 130.556108,204.459335 C130.556108,204.302687 130.556108,204.041606 130.590919,203.641282 C130.556108,203.554256 130.469081,203.519445 130.39946,203.519445 C130.051352,203.780525 129.059246,204.233065 128.658922,204.372308 C128.571895,204.424524 128.571895,204.615983 128.641517,204.685605 L128.798165,204.790037 C129.26811,205.103334 129.26811,205.190361 129.26811,205.869171 L129.26811,208.915111 C129.26811,210.168298 129.250705,210.342352 128.606706,210.429379 L128.188977,210.481595 C128.067139,210.568622 128.10195,210.864514 128.223788,210.91673 C128.763354,210.881919 129.285516,210.864514 129.912109,210.864514 C130.521297,210.864514 131.026053,210.881919 131.495998,210.91673 C131.617836,210.864514 131.652647,210.568622 131.530809,210.481595 L131.217512,210.429379 C130.590919,210.324947 130.556108,210.168298 130.556108,208.915111 L130.556108,206.217278 C130.556108,205.660306 130.643135,205.434036 130.817189,205.225172 C131.078269,204.911875 131.56562,204.598578 132.27924,204.598578 C133.358374,204.598578 133.880535,205.225172 133.880535,206.391332 L133.880535,208.915111 C133.880535,210.168298 133.86313,210.324947 133.219131,210.429379 L132.905834,210.481595 C132.783996,210.568622 132.818807,210.864514 132.940645,210.91673 C133.427995,210.881919 133.89794,210.864514 134.524534,210.864514 C135.133722,210.864514 135.638478,210.881919 136.160639,210.91673 C136.282477,210.864514 136.317288,210.568622 136.19545,210.481595 L135.829937,210.429379 C135.203343,210.342352 135.168533,210.168298 135.168533,208.915111 L135.168533,206.252089 C135.168533,205.642901 135.220749,205.468847 135.429613,205.207766 C135.673289,204.89447 136.212855,204.598578 136.87426,204.598578 C137.970798,204.598578 138.49296,205.207766 138.49296,206.391332 L138.49296,208.915111 Z M142.966141,208.915111 C142.966141,210.168298 142.948736,210.342352 142.304737,210.429379 L141.939224,210.481595 C141.817386,210.568622 141.852197,210.864514 141.974035,210.91673 C142.461385,210.881919 142.983547,210.864514 143.61014,210.864514 C144.219328,210.864514 144.724084,210.881919 145.246246,210.91673 C145.368083,210.864514 145.402894,210.568622 145.281056,210.481595 L144.915543,210.429379 C144.28895,210.342352 144.254139,210.168298 144.254139,208.915111 L144.254139,205.782144 C144.254139,205.068523 144.28895,204.233065 144.323761,203.623877 C144.306355,203.554256 144.236734,203.519445 144.149707,203.519445 C143.749383,203.780525 142.757277,204.233065 142.356953,204.372308 C142.269926,204.424524 142.269926,204.615983 142.339548,204.685605 L142.496196,204.790037 C142.966141,205.103334 142.966141,205.190361 142.966141,205.869171 L142.966141,208.915111 Z M143.540519,200.003559 C143.018357,200.003559 142.600628,200.369072 142.600628,200.943449 C142.600628,201.413394 142.948736,201.813718 143.488303,201.813718 C143.975653,201.813718 144.410787,201.535232 144.410787,200.908638 C144.410787,200.421288 144.06268,200.003559 143.540519,200.003559 Z M147.439323,208.915111 C147.439323,210.168298 147.421918,210.342352 146.777919,210.429379 L146.412406,210.481595 C146.290568,210.568622 146.325379,210.864514 146.447216,210.91673 C146.934567,210.881919 147.456728,210.864514 148.083322,210.864514 C148.69251,210.864514 149.197266,210.881919 149.667211,210.91673 C149.789049,210.864514 149.823859,210.568622 149.702022,210.481595 L149.388725,210.429379 C148.762131,210.324947 148.727321,210.168298 148.727321,208.915111 L148.727321,206.252089 C148.727321,205.747333 148.762131,205.503658 148.988401,205.207766 C149.232077,204.877064 149.806454,204.598578 150.467858,204.598578 C151.651424,204.598578 152.103964,205.329604 152.103964,206.32171 L152.103964,208.915111 C152.103964,210.168298 152.086558,210.324947 151.442559,210.429379 L151.111857,210.481595 C150.99002,210.568622 151.02483,210.864514 151.146668,210.91673 C151.616613,210.881919 152.138774,210.864514 152.765368,210.864514 C153.374556,210.864514 153.879312,210.881919 154.401473,210.91673 C154.523311,210.864514 154.558122,210.568622 154.436284,210.481595 L154.053366,210.429379 C153.426772,210.342352 153.391962,210.168298 153.391962,208.915111 L153.391962,205.921387 C153.391962,204.755226 152.800179,203.76312 151.355533,203.76312 C150.467858,203.76312 149.649806,204.198254 148.91878,204.650794 C148.796942,204.650794 148.727321,204.563767 148.727321,204.459335 C148.727321,204.302687 148.727321,204.041606 148.762131,203.641282 C148.727321,203.554256 148.640294,203.519445 148.570672,203.519445 C148.222565,203.780525 147.230458,204.233065 146.830135,204.372308 C146.743108,204.424524 146.743108,204.615983 146.812729,204.685605 L146.969378,204.790037 C147.439323,205.103334 147.439323,205.190361 147.439323,205.869171 L147.439323,208.915111 Z&quot; id=&quot;Tracey-Emin&quot; fill=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
            &lt;path d=&quot;M73.6753389,233.143395 C73.6753389,232.569018 73.6579335,232.551612 74.1800948,232.551612 L75.4158765,232.551612 C76.3731722,232.551612 77.0345765,232.690855 77.4349001,232.986747 C77.6959808,233.178206 77.8178184,233.822205 77.8700345,234.257339 C77.9570614,234.361771 78.2529528,234.361771 78.3225743,234.222528 C78.2703582,233.700367 78.3921958,232.290532 78.583655,231.576911 C78.5488442,231.50729 78.3573851,231.489884 78.2703582,231.524695 C78.0092775,231.977235 77.8526292,232.012046 76.9127388,232.012046 L69.8635615,232.012046 C69.0629142,232.012046 68.4885368,232.029451 68.3841045,231.472479 C68.3318884,231.420263 68.1056185,231.437668 68.0534024,231.472479 C67.9315648,232.168694 67.6704841,233.282638 67.3919981,234.06588 C67.4616196,234.205123 67.7052949,234.29215 67.8445379,234.187718 C68.035997,233.752583 68.2100508,233.369665 68.6277798,232.986747 C69.0629142,232.586423 70.0202099,232.551612 70.7686411,232.551612 L71.7259368,232.551612 C72.248098,232.551612 72.248098,232.569018 72.248098,233.108584 L72.248098,240.888787 C72.248098,242.716352 72.1610712,242.977432 71.1689647,243.064459 L70.5423712,243.116675 C70.4031282,243.203702 70.4379389,243.499594 70.5423712,243.55181 C71.6563153,243.516999 72.2655034,243.499594 72.9617185,243.499594 C73.6579335,243.499594 74.2497163,243.516999 75.2418227,243.55181 C75.346255,243.499594 75.3810657,243.186297 75.2766335,243.116675 L74.7196615,243.064459 C73.7101496,242.977432 73.6753389,242.716352 73.6753389,240.888787 L73.6753389,233.143395 Z M83.074242,236.3982 C85.0236441,236.3982 86.6075333,237.860252 86.6075333,240.001113 C86.6075333,242.176785 85.110671,243.743269 82.934999,243.743269 C80.9333807,243.743269 79.3668969,242.333434 79.3668969,240.157762 C79.3668969,237.964684 81.0204076,236.3982 83.074242,236.3982 Z M85.110671,240.279599 C85.110671,238.800142 84.5188882,236.920362 82.8653775,236.920362 C81.7166227,236.920362 80.8637592,238.0169 80.8637592,239.931492 C80.8637592,241.515381 81.5773796,243.221108 83.1090527,243.221108 C84.6407258,243.221108 85.110671,241.619813 85.110671,240.279599 Z M98.1472977,241.550192 C98.1472977,242.803379 98.1298923,242.960027 97.4858934,243.064459 L97.1725967,243.116675 C97.050759,243.203702 97.0855698,243.499594 97.2074074,243.55181 C97.6947579,243.516999 98.1647031,243.499594 98.7912966,243.499594 C99.4004848,243.499594 99.9052407,243.516999 100.479618,243.55181 C100.601456,243.499594 100.636267,243.203702 100.514429,243.116675 L100.0967,243.064459 C99.4701063,242.977432 99.4352956,242.803379 99.4352956,241.550192 L99.4352956,238.556467 C99.4352956,237.355496 98.7564859,236.3982 97.3640558,236.3982 C96.5460031,236.3982 95.6931397,236.798524 94.9969246,237.285874 C94.8402763,237.390307 94.7184386,237.459928 94.5617902,237.425117 C94.0744397,236.711497 93.5870892,236.3982 92.7168204,236.3982 C91.8813623,236.3982 91.0633096,236.815929 90.4019053,237.285874 C90.2800677,237.285874 90.2104462,237.198848 90.2104462,237.094415 C90.2104462,236.937767 90.2104462,236.676686 90.245257,236.276363 C90.2104462,236.189336 90.1234193,236.154525 90.0537978,236.154525 C89.7056903,236.415606 88.7135839,236.868145 88.3132602,237.007388 C88.2262333,237.059605 88.2262333,237.251064 88.2958548,237.320685 L88.4525032,237.425117 C88.9224484,237.738414 88.9224484,237.825441 88.9224484,238.504251 L88.9224484,241.550192 C88.9224484,242.803379 88.905043,242.977432 88.2610441,243.064459 L87.8433151,243.116675 C87.7214774,243.203702 87.7562882,243.499594 87.8781258,243.55181 C88.4176925,243.516999 88.9398538,243.499594 89.5664473,243.499594 C90.1756355,243.499594 90.6803914,243.516999 91.1503365,243.55181 C91.2721742,243.499594 91.3069849,243.203702 91.1851473,243.116675 L90.8718505,243.064459 C90.245257,242.960027 90.2104462,242.803379 90.2104462,241.550192 L90.2104462,238.852358 C90.2104462,238.295386 90.2974731,238.069116 90.4715268,237.860252 C90.7326075,237.546955 91.219958,237.233658 91.9335784,237.233658 C93.0127118,237.233658 93.534873,237.860252 93.534873,239.026412 L93.534873,241.550192 C93.534873,242.803379 93.5174677,242.960027 92.8734688,243.064459 L92.560172,243.116675 C92.4383344,243.203702 92.4731451,243.499594 92.5949827,243.55181 C93.0823333,243.516999 93.5522784,243.499594 94.178872,243.499594 C94.7880601,243.499594 95.292816,243.516999 95.8149773,243.55181 C95.936815,243.499594 95.9716257,243.203702 95.8497881,243.116675 L95.4842752,243.064459 C94.8576816,242.977432 94.8228709,242.803379 94.8228709,241.550192 L94.8228709,238.887169 C94.8228709,238.277981 94.875087,238.103927 95.0839515,237.842847 C95.3276268,237.52955 95.8671934,237.233658 96.5285977,237.233658 C97.6251364,237.233658 98.1472977,237.842847 98.1472977,239.026412 L98.1472977,241.550192 Z M110.418088,240.888787 C110.418088,242.716352 110.331061,242.977432 109.338955,243.064459 L108.712361,243.116675 C108.573118,243.203702 108.607929,243.499594 108.712361,243.55181 C109.826305,243.516999 110.435493,243.499594 111.131708,243.499594 C111.827923,243.499594 112.419706,243.516999 113.411813,243.55181 C113.516245,243.499594 113.551056,243.186297 113.446623,243.116675 L112.889651,243.064459 C111.880139,242.977432 111.845329,242.716352 111.845329,240.888787 L111.845329,233.143395 C111.845329,232.569018 111.827923,232.551612 112.350085,232.551612 L113.933974,232.551612 C115.970403,232.551612 116.370727,232.67345 116.370727,233.769988 L116.370727,241.550192 C116.370727,242.803379 116.353321,242.994838 115.709322,243.064459 L115.274188,243.116675 C115.15235,243.203702 115.187161,243.499594 115.308999,243.55181 C115.865971,243.516999 116.388132,243.499594 117.014725,243.499594 C117.623914,243.499594 118.12867,243.516999 118.650831,243.55181 C118.772668,243.499594 118.807479,243.186297 118.685642,243.116675 L118.320129,243.064459 C117.693535,242.977432 117.658724,242.803379 117.658724,241.550192 L117.658724,238.626088 C117.658724,238.0169 117.71094,237.929873 118.024237,237.668793 C118.337534,237.407712 118.790074,237.198848 119.381857,237.198848 C120.495801,237.198848 121.035367,237.947279 121.035367,239.061223 L121.035367,241.550192 C121.035367,242.803379 121.017962,242.960027 120.373963,243.064459 L120.025856,243.116675 C119.904018,243.203702 119.938829,243.499594 120.060666,243.55181 C120.530611,243.516999 121.052773,243.499594 121.679366,243.499594 C122.288554,243.499594 122.79331,243.516999 123.419904,243.55181 C123.541741,243.499594 123.576552,243.203702 123.454715,243.116675 L122.984769,243.064459 C122.358176,242.994838 122.323365,242.803379 122.323365,241.550192 L122.323365,238.643494 C122.323365,237.425117 121.731582,236.3982 120.078072,236.3982 C119.190397,236.3982 118.354939,236.815929 117.728346,237.30328 C117.67613,237.268469 117.658724,237.129226 117.658724,236.972578 L117.658724,233.317449 C117.658724,232.551612 117.693535,231.681343 117.71094,231.159182 C117.67613,231.089561 117.606508,231.05475 117.536887,231.05475 L116.370727,231.524695 L116.370727,231.76837 C116.31851,231.907613 116.040024,232.012046 115.082729,232.012046 L107.859498,232.012046 C107.05885,232.012046 106.484473,232.029451 106.380041,231.472479 C106.327825,231.420263 106.101555,231.437668 106.049338,231.472479 C105.927501,232.168694 105.66642,233.282638 105.387934,234.06588 C105.457556,234.205123 105.701231,234.29215 105.840474,234.187718 C106.031933,233.752583 106.205987,233.369665 106.623716,232.986747 C107.05885,232.586423 108.016146,232.551612 108.764577,232.551612 L109.895927,232.551612 C110.418088,232.551612 110.418088,232.569018 110.418088,233.108584 L110.418088,240.888787 Z M128.119355,236.3982 C130.068758,236.3982 131.652647,237.860252 131.652647,240.001113 C131.652647,242.176785 130.155784,243.743269 127.980112,243.743269 C125.978494,243.743269 124.41201,242.333434 124.41201,240.157762 C124.41201,237.964684 126.065521,236.3982 128.119355,236.3982 Z M130.155784,240.279599 C130.155784,238.800142 129.564002,236.920362 127.910491,236.920362 C126.761736,236.920362 125.908873,238.0169 125.908873,239.931492 C125.908873,241.515381 126.622493,243.221108 128.154166,243.221108 C129.685839,243.221108 130.155784,241.619813 130.155784,240.279599 Z M143.192411,241.550192 C143.192411,242.803379 143.175006,242.960027 142.531007,243.064459 L142.21771,243.116675 C142.095872,243.203702 142.130683,243.499594 142.252521,243.55181 C142.739871,243.516999 143.209817,243.499594 143.83641,243.499594 C144.445598,243.499594 144.950354,243.516999 145.524732,243.55181 C145.646569,243.499594 145.68138,243.203702 145.559542,243.116675 L145.141813,243.064459 C144.51522,242.977432 144.480409,242.803379 144.480409,241.550192 L144.480409,238.556467 C144.480409,237.355496 143.801599,236.3982 142.409169,236.3982 C141.591117,236.3982 140.738253,236.798524 140.042038,237.285874 C139.88539,237.390307 139.763552,237.459928 139.606904,237.425117 C139.119553,236.711497 138.632203,236.3982 137.761934,236.3982 C136.926476,236.3982 136.108423,236.815929 135.447019,237.285874 C135.325181,237.285874 135.25556,237.198848 135.25556,237.094415 C135.25556,236.937767 135.25556,236.676686 135.29037,236.276363 C135.25556,236.189336 135.168533,236.154525 135.098911,236.154525 C134.750804,236.415606 133.758697,236.868145 133.358374,237.007388 C133.271347,237.059605 133.271347,237.251064 133.340968,237.320685 L133.497617,237.425117 C133.967562,237.738414 133.967562,237.825441 133.967562,238.504251 L133.967562,241.550192 C133.967562,242.803379 133.950156,242.977432 133.306157,243.064459 L132.888428,243.116675 C132.766591,243.203702 132.801402,243.499594 132.923239,243.55181 C133.462806,243.516999 133.984967,243.499594 134.611561,243.499594 C135.220749,243.499594 135.725505,243.516999 136.19545,243.55181 C136.317288,243.499594 136.352098,243.203702 136.230261,243.116675 L135.916964,243.064459 C135.29037,242.960027 135.25556,242.803379 135.25556,241.550192 L135.25556,238.852358 C135.25556,238.295386 135.342587,238.069116 135.51664,237.860252 C135.777721,237.546955 136.265071,237.233658 136.978692,237.233658 C138.057825,237.233658 138.579986,237.860252 138.579986,239.026412 L138.579986,241.550192 C138.579986,242.803379 138.562581,242.960027 137.918582,243.064459 L137.605285,243.116675 C137.483448,243.203702 137.518259,243.499594 137.640096,243.55181 C138.127447,243.516999 138.597392,243.499594 139.223985,243.499594 C139.833174,243.499594 140.337929,243.516999 140.860091,243.55181 C140.981928,243.499594 141.016739,243.203702 140.894901,243.116675 L140.529389,243.064459 C139.902795,242.977432 139.867984,242.803379 139.867984,241.550192 L139.867984,238.887169 C139.867984,238.277981 139.9202,238.103927 140.129065,237.842847 C140.37274,237.52955 140.912307,237.233658 141.573711,237.233658 C142.67025,237.233658 143.192411,237.842847 143.192411,239.026412 L143.192411,241.550192 Z M147.439323,245.988563 L147.439323,238.504251 C147.439323,237.825441 147.439323,237.738414 146.969378,237.425117 L146.812729,237.320685 C146.743108,237.251064 146.743108,237.059605 146.830135,237.007388 C147.282675,236.815929 148.100727,236.3982 148.553267,236.067498 C148.657699,236.067498 148.727321,236.102309 148.762131,236.189336 C148.727321,236.502633 148.69251,236.763713 148.69251,236.989983 C148.69251,237.111821 148.727321,237.216253 148.849158,237.216253 C149.075428,237.111821 150.171967,236.3982 151.285911,236.3982 C153.043854,236.3982 154.175203,237.825441 154.175203,239.583384 C154.175203,242.002731 152.399855,243.743269 149.928292,243.743269 C149.614995,243.743269 149.127644,243.708458 148.970996,243.673648 C148.814348,243.708458 148.727321,243.795485 148.727321,244.160998 L148.727321,245.988563 C148.727321,247.224344 148.762131,247.380993 149.388725,247.46802 L150.067535,247.555046 C150.189372,247.642073 150.154562,247.937965 150.032724,247.990181 C149.197266,247.95537 148.69251,247.937965 148.083322,247.937965 C147.456728,247.937965 146.934567,247.95537 146.447216,247.990181 C146.325379,247.937965 146.290568,247.642073 146.412406,247.555046 L146.777919,247.50283 C147.421918,247.415803 147.439323,247.24175 147.439323,245.988563 Z M148.727321,238.747926 L148.727321,241.741651 C148.727321,242.298623 148.901375,242.507487 149.249482,242.785973 C149.59759,243.047054 150.137156,243.168892 150.502669,243.168892 C151.92991,243.168892 152.765368,241.846083 152.765368,240.035924 C152.765368,238.643494 151.982126,237.233658 150.415642,237.233658 C149.667211,237.233658 149.127644,237.512144 148.936185,237.721009 C148.779537,237.912468 148.727321,238.173549 148.727321,238.747926 Z M158.021792,236.3982 C156.698983,236.3982 155.65466,237.111821 155.65466,238.382413 C155.65466,239.339709 156.368281,239.948897 157.377793,240.523274 C158.021792,240.888787 158.718007,241.323922 158.718007,242.124569 C158.718007,242.873 158.17844,243.238513 157.551846,243.238513 C156.55974,243.238513 156.002768,242.403055 155.706877,241.445759 C155.61985,241.341327 155.39358,241.358732 155.306553,241.463165 C155.271742,242.037542 155.376174,242.890406 155.515417,243.221108 C155.950552,243.569215 156.55974,243.743269 157.377793,243.743269 C158.665791,243.743269 159.884167,243.081865 159.884167,241.759056 C159.884167,240.523274 159.031303,239.931492 158.108818,239.40933 C157.49963,239.061223 156.768605,238.678305 156.768605,237.964684 C156.768605,237.338091 157.203739,236.902956 157.882549,236.902956 C158.596169,236.902956 159.11833,237.407712 159.414222,238.173549 C159.501249,238.277981 159.762329,238.24317 159.831951,238.121333 C159.831951,237.651387 159.710113,237.094415 159.553465,236.711497 C159.396816,236.572254 158.752817,236.3982 158.021792,236.3982 Z M164.722861,236.3982 C166.672264,236.3982 168.256153,237.860252 168.256153,240.001113 C168.256153,242.176785 166.75929,243.743269 164.583618,243.743269 C162.582,243.743269 161.015516,242.333434 161.015516,240.157762 C161.015516,237.964684 162.669027,236.3982 164.722861,236.3982 Z M166.75929,240.279599 C166.75929,238.800142 166.167508,236.920362 164.513997,236.920362 C163.365242,236.920362 162.512379,238.0169 162.512379,239.931492 C162.512379,241.515381 163.225999,243.221108 164.757672,243.221108 C166.289345,243.221108 166.75929,241.619813 166.75929,240.279599 Z M170.571068,241.550192 C170.571068,242.803379 170.553662,242.977432 169.909663,243.064459 L169.544151,243.116675 C169.422313,243.203702 169.457124,243.499594 169.578961,243.55181 C170.066312,243.516999 170.588473,243.499594 171.215067,243.499594 C171.824255,243.499594 172.329011,243.516999 172.798956,243.55181 C172.920794,243.499594 172.955604,243.203702 172.833767,243.116675 L172.52047,243.064459 C171.893876,242.960027 171.859066,242.803379 171.859066,241.550192 L171.859066,238.887169 C171.859066,238.382413 171.893876,238.138738 172.120146,237.842847 C172.363822,237.512144 172.938199,237.233658 173.599603,237.233658 C174.783169,237.233658 175.235709,237.964684 175.235709,238.956791 L175.235709,241.550192 C175.235709,242.803379 175.218303,242.960027 174.574304,243.064459 L174.243602,243.116675 C174.121765,243.203702 174.156575,243.499594 174.278413,243.55181 C174.748358,243.516999 175.270519,243.499594 175.897113,243.499594 C176.506301,243.499594 177.011057,243.516999 177.533218,243.55181 C177.655056,243.499594 177.689867,243.203702 177.568029,243.116675 L177.185111,243.064459 C176.558517,242.977432 176.523706,242.803379 176.523706,241.550192 L176.523706,238.556467 C176.523706,237.390307 175.931924,236.3982 174.487277,236.3982 C173.599603,236.3982 172.781551,236.833335 172.050525,237.285874 C171.928687,237.285874 171.859066,237.198848 171.859066,237.094415 C171.859066,236.937767 171.859066,236.676686 171.893876,236.276363 C171.859066,236.189336 171.772039,236.154525 171.702417,236.154525 C171.35431,236.415606 170.362203,236.868145 169.96188,237.007388 C169.874853,237.059605 169.874853,237.251064 169.944474,237.320685 L170.101123,237.425117 C170.571068,237.738414 170.571068,237.825441 170.571068,238.504251 L170.571068,241.550192 Z&quot; id=&quot;Tom-Thompson&quot; fill=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
            &lt;path d=&quot;M73.6753389,265.778475 C73.6753389,265.204098 73.6579335,265.186692 74.1800948,265.186692 L75.4158765,265.186692 C76.3731722,265.186692 77.0345765,265.325935 77.4349001,265.621827 C77.6959808,265.813286 77.8178184,266.457285 77.8700345,266.892419 C77.9570614,266.996852 78.2529528,266.996852 78.3225743,266.857609 C78.2703582,266.335447 78.3921958,264.925612 78.583655,264.211991 C78.5488442,264.14237 78.3573851,264.124964 78.2703582,264.159775 C78.0092775,264.612315 77.8526292,264.647126 76.9127388,264.647126 L69.8635615,264.647126 C69.0629142,264.647126 68.4885368,264.664531 68.3841045,264.107559 C68.3318884,264.055343 68.1056185,264.072748 68.0534024,264.107559 C67.9315648,264.803774 67.6704841,265.917718 67.3919981,266.70096 C67.4616196,266.840203 67.7052949,266.92723 67.8445379,266.822798 C68.035997,266.387663 68.2100508,266.004745 68.6277798,265.621827 C69.0629142,265.221503 70.0202099,265.186692 70.7686411,265.186692 L71.7259368,265.186692 C72.248098,265.186692 72.248098,265.204098 72.248098,265.743664 L72.248098,273.523868 C72.248098,275.351432 72.1610712,275.612513 71.1689647,275.69954 L70.5423712,275.751756 C70.4031282,275.838783 70.4379389,276.134674 70.5423712,276.18689 C71.6563153,276.152079 72.2655034,276.134674 72.9617185,276.134674 C73.6579335,276.134674 74.2497163,276.152079 75.2418227,276.18689 C75.346255,276.134674 75.3810657,275.821377 75.2766335,275.751756 L74.7196615,275.69954 C73.7101496,275.612513 73.6753389,275.351432 73.6753389,273.523868 L73.6753389,265.778475 Z M83.074242,269.033281 C85.0236441,269.033281 86.6075333,270.495332 86.6075333,272.636193 C86.6075333,274.811865 85.110671,276.378349 82.934999,276.378349 C80.9333807,276.378349 79.3668969,274.968514 79.3668969,272.792842 C79.3668969,270.599764 81.0204076,269.033281 83.074242,269.033281 Z M85.110671,272.914679 C85.110671,271.435222 84.5188882,269.555442 82.8653775,269.555442 C81.7166227,269.555442 80.8637592,270.651981 80.8637592,272.566572 C80.8637592,274.150461 81.5773796,275.856188 83.1090527,275.856188 C84.6407258,275.856188 85.110671,274.254893 85.110671,272.914679 Z M98.1472977,274.185272 C98.1472977,275.438459 98.1298923,275.595107 97.4858934,275.69954 L97.1725967,275.751756 C97.050759,275.838783 97.0855698,276.134674 97.2074074,276.18689 C97.6947579,276.152079 98.1647031,276.134674 98.7912966,276.134674 C99.4004848,276.134674 99.9052407,276.152079 100.479618,276.18689 C100.601456,276.134674 100.636267,275.838783 100.514429,275.751756 L100.0967,275.69954 C99.4701063,275.612513 99.4352956,275.438459 99.4352956,274.185272 L99.4352956,271.191547 C99.4352956,269.990576 98.7564859,269.033281 97.3640558,269.033281 C96.5460031,269.033281 95.6931397,269.433604 94.9969246,269.920955 C94.8402763,270.025387 94.7184386,270.095008 94.5617902,270.060198 C94.0744397,269.346577 93.5870892,269.033281 92.7168204,269.033281 C91.8813623,269.033281 91.0633096,269.45101 90.4019053,269.920955 C90.2800677,269.920955 90.2104462,269.833928 90.2104462,269.729496 C90.2104462,269.572847 90.2104462,269.311767 90.245257,268.911443 C90.2104462,268.824416 90.1234193,268.789605 90.0537978,268.789605 C89.7056903,269.050686 88.7135839,269.503226 88.3132602,269.642469 C88.2262333,269.694685 88.2262333,269.886144 88.2958548,269.955765 L88.4525032,270.060198 C88.9224484,270.373494 88.9224484,270.460521 88.9224484,271.139331 L88.9224484,274.185272 C88.9224484,275.438459 88.905043,275.612513 88.2610441,275.69954 L87.8433151,275.751756 C87.7214774,275.838783 87.7562882,276.134674 87.8781258,276.18689 C88.4176925,276.152079 88.9398537,276.134674 89.5664473,276.134674 C90.1756355,276.134674 90.6803914,276.152079 91.1503365,276.18689 C91.2721742,276.134674 91.3069849,275.838783 91.1851473,275.751756 L90.8718505,275.69954 C90.245257,275.595107 90.2104462,275.438459 90.2104462,274.185272 L90.2104462,271.487439 C90.2104462,270.930467 90.2974731,270.704197 90.4715268,270.495332 C90.7326075,270.182035 91.219958,269.868739 91.9335784,269.868739 C93.0127118,269.868739 93.534873,270.495332 93.534873,271.661492 L93.534873,274.185272 C93.534873,275.438459 93.5174677,275.595107 92.8734688,275.69954 L92.560172,275.751756 C92.4383344,275.838783 92.4731451,276.134674 92.5949827,276.18689 C93.0823333,276.152079 93.5522784,276.134674 94.178872,276.134674 C94.7880601,276.134674 95.292816,276.152079 95.8149773,276.18689 C95.936815,276.134674 95.9716257,275.838783 95.8497881,275.751756 L95.4842752,275.69954 C94.8576816,275.612513 94.8228709,275.438459 94.8228709,274.185272 L94.8228709,271.522249 C94.8228709,270.913061 94.875087,270.739007 95.0839515,270.477927 C95.3276268,270.16463 95.8671934,269.868739 96.5285977,269.868739 C97.6251364,269.868739 98.1472977,270.477927 98.1472977,271.661492 L98.1472977,274.185272 Z M112.872246,273.193165 C112.872246,271.539655 111.793113,270.530143 110.696574,269.851333 L109.304144,268.981064 C108.660145,268.580741 107.824687,267.849715 107.824687,266.840203 C107.824687,266.039556 108.1902,264.908206 109.895927,264.908206 C111.566843,264.908206 112.036788,266.039556 112.263058,266.875014 C112.350085,266.979446 112.628571,266.92723 112.698192,266.822798 C112.698192,266.091772 112.541544,265.117071 112.384895,264.699342 C112.245652,264.699342 112.001977,264.664531 111.775707,264.59491 C111.323167,264.473072 110.696574,264.36864 110.157007,264.36864 C107.894308,264.36864 106.606311,265.708854 106.606311,267.362364 C106.606311,268.789605 107.615822,269.781712 108.486091,270.356089 L110.139602,271.435222 C111.410194,272.253275 111.566843,273.106139 111.566843,273.871975 C111.566843,274.916298 110.853222,275.873593 109.391171,275.873593 C107.372147,275.873593 106.658527,274.167866 106.397446,273.280192 C106.327825,273.17576 106.066744,273.210571 105.979717,273.332408 C106.014528,274.150461 106.240798,275.386243 106.449662,275.769161 C106.780364,275.96062 107.702849,276.41316 109.164901,276.41316 C111.4276,276.41316 112.872246,275.107757 112.872246,273.193165 Z M115.83116,273.280192 L117.9024,272.531761 C118.16348,272.444734 118.198291,272.288086 118.198291,272.027005 L118.215696,271.226358 C118.233102,270.582359 118.024237,269.71209 116.945104,269.71209 C116.457753,269.71209 115.865971,269.955765 115.83116,270.495332 C115.813754,270.773818 115.796349,270.982683 115.657106,271.087115 C115.396025,271.295979 114.92608,271.417817 114.665,271.417817 C114.508351,271.417817 114.421324,271.33079 114.421324,271.174142 C114.421324,270.269062 116.388132,269.033281 117.658724,269.033281 C118.911911,269.033281 119.5211,269.764306 119.468883,271.06971 L119.364451,274.098245 C119.32964,274.898892 119.486289,275.612513 120.165099,275.612513 C120.339152,275.612513 120.495801,275.560297 120.600233,275.50808 C120.68726,275.455864 120.774287,275.386243 120.826503,275.386243 C120.896124,275.386243 120.94834,275.490675 120.94834,275.612513 C120.94834,275.69954 120.339152,276.378349 119.486289,276.378349 C119.06856,276.378349 118.650831,276.221701 118.354939,275.838783 C118.285318,275.73435 118.180886,275.595107 118.076453,275.595107 C117.954616,275.595107 117.745751,275.751756 117.397644,275.943215 C117.014725,276.152079 116.631807,276.378349 116.144457,276.378349 C115.639701,276.378349 115.221972,276.239106 114.92608,275.978026 C114.595378,275.682134 114.386514,275.247 114.386514,274.759649 C114.386514,274.08084 114.717216,273.680516 115.83116,273.280192 Z M115.726728,274.550785 C115.726728,274.846676 115.935592,275.595107 116.823266,275.595107 C117.171374,275.595107 117.71094,275.334027 117.884994,275.159973 C118.093859,274.951108 118.093859,274.707433 118.111264,274.34192 L118.146075,273.315003 C118.146075,273.123544 118.076453,273.088733 117.972021,273.088733 C117.867589,273.088733 117.571697,273.158355 117.258401,273.262787 C116.231484,273.610894 115.726728,273.871975 115.726728,274.550785 Z M125.647792,269.033281 C122.7585,269.033281 121.435691,271.034899 121.435691,272.914679 C121.435691,274.046029 121.836015,274.898892 122.445203,275.490675 C123.054391,276.082458 123.907254,276.378349 124.829739,276.378349 C125.839251,276.378349 127.144654,275.890999 127.736437,274.603001 C127.719032,274.446353 127.562383,274.324515 127.42314,274.359326 C127.022817,274.951108 126.500655,275.403648 125.491144,275.403648 C123.628768,275.403648 122.688878,273.784948 122.688878,272.427329 C122.688878,270.582359 123.872444,269.625063 125.09082,269.625063 C125.80444,269.625063 126.448439,270.077603 126.831358,270.547548 C126.900979,270.634575 126.988006,270.669386 127.075033,270.669386 C127.283897,270.669386 127.457951,270.338684 127.457951,270.025387 C127.457951,269.729496 127.336113,269.45101 127.19687,269.329172 C126.726925,269.120307 126.048116,269.033281 125.647792,269.033281 Z M129.302921,274.185272 C129.302921,275.438459 129.285516,275.629918 128.641517,275.69954 L128.206382,275.751756 C128.084545,275.838783 128.119355,276.134674 128.241193,276.18689 C128.798165,276.152079 129.320326,276.134674 129.94692,276.134674 C130.556108,276.134674 131.060864,276.152079 131.583025,276.18689 C131.704863,276.134674 131.739674,275.821377 131.617836,275.751756 L131.252323,275.69954 C130.62573,275.612513 130.590919,275.438459 130.590919,274.185272 L130.590919,271.261169 C130.590919,270.651981 130.643135,270.564954 130.956432,270.303873 C131.269728,270.042792 131.722268,269.833928 132.314051,269.833928 C133.427995,269.833928 133.967562,270.582359 133.967562,271.696303 L133.967562,274.185272 C133.967562,275.438459 133.950156,275.595107 133.306157,275.69954 L132.95805,275.751756 C132.836212,275.838783 132.871023,276.134674 132.992861,276.18689 C133.462806,276.152079 133.984967,276.134674 134.611561,276.134674 C135.220749,276.134674 135.725505,276.152079 136.352098,276.18689 C136.473936,276.134674 136.508747,275.838783 136.386909,275.751756 L135.916964,275.69954 C135.29037,275.629918 135.25556,275.438459 135.25556,274.185272 L135.25556,271.278574 C135.25556,270.060198 134.663777,269.033281 133.010266,269.033281 C132.122592,269.033281 131.287134,269.45101 130.66054,269.93836 C130.608324,269.903549 130.590919,269.764306 130.590919,269.607658 L130.590919,265.952529 C130.590919,265.186692 130.62573,264.316424 130.643135,263.794262 C130.608324,263.724641 130.538703,263.68983 130.469081,263.68983 C129.842488,264.020532 129.024435,264.281613 128.589301,264.420856 C128.502274,264.473072 128.502274,264.716747 128.589301,264.768963 L128.763354,264.873396 C129.285516,265.186692 129.302921,265.291125 129.302921,266.318042 L129.302921,274.185272 Z M139.972417,269.033281 C138.649608,269.033281 137.605285,269.746901 137.605285,271.017493 C137.605285,271.974789 138.318906,272.583977 139.328418,273.158355 C139.972417,273.523868 140.668632,273.959002 140.668632,274.759649 C140.668632,275.50808 140.129065,275.873593 139.502471,275.873593 C138.510365,275.873593 137.953393,275.038135 137.657502,274.08084 C137.570475,273.976407 137.344205,273.993813 137.257178,274.098245 C137.222367,274.672622 137.326799,275.525486 137.466042,275.856188 C137.901177,276.204295 138.510365,276.378349 139.328418,276.378349 C140.616415,276.378349 141.834792,275.716945 141.834792,274.394136 C141.834792,273.158355 140.981928,272.566572 140.059443,272.044411 C139.450255,271.696303 138.719229,271.313385 138.719229,270.599764 C138.719229,269.973171 139.154364,269.538036 139.833174,269.538036 C140.546794,269.538036 141.068955,270.042792 141.364847,270.808629 C141.451874,270.913061 141.712954,270.87825 141.782576,270.756413 C141.782576,270.286468 141.660738,269.729496 141.50409,269.346577 C141.347441,269.207334 140.703442,269.033281 139.972417,269.033281 Z&quot; id=&quot;Tom-Sachs&quot; fill=&quot;#82D7DA&quot;&gt;&lt;/path&gt;
            &lt;g id=&quot;React&quot; opacity=&quot;0.500509511&quot; transform=&quot;translate(15.229704, 18.405376)&quot; fill=&quot;#D8D8D8&quot; fill-opacity=&quot;0&quot;&gt;
                &lt;rect id=&quot;r-v&quot; x=&quot;0&quot; y=&quot;0&quot; width=&quot;269.196388&quot; height=&quot;324.17513&quot;&gt;&lt;/rect&gt;
                &lt;rect id=&quot;r-v-textfield&quot; x=&quot;0&quot; y=&quot;110.959273&quot; width=&quot;269.196388&quot; height=&quot;48.9526204&quot;&gt;&lt;/rect&gt;
                &lt;rect id=&quot;r-v-results&quot; x=&quot;0&quot; y=&quot;158.824057&quot; width=&quot;269.196388&quot; height=&quot;121.837633&quot;&gt;&lt;/rect&gt;
                &lt;rect id=&quot;r-v-results-tom-s&quot; x=&quot;0&quot; y=&quot;237.14825&quot; width=&quot;269.196388&quot; height=&quot;30.4594082&quot;&gt;&lt;/rect&gt;
                &lt;rect id=&quot;r-v-results-tom-t&quot; x=&quot;0&quot; y=&quot;204.513169&quot; width=&quot;269.196388&quot; height=&quot;30.4594082&quot;&gt;&lt;/rect&gt;
                &lt;rect id=&quot;r-v-results-tracey&quot; x=&quot;0&quot; y=&quot;171.878089&quot; width=&quot;269.196388&quot; height=&quot;30.4594082&quot;&gt;&lt;/rect&gt;
                &lt;rect id=&quot;r-v-done&quot; x=&quot;0&quot; y=&quot;280.66169&quot; width=&quot;269.196388&quot; height=&quot;43.5134403&quot;&gt;&lt;/rect&gt;
            &lt;/g&gt;
        &lt;/g&gt;
    &lt;/g&gt;
&lt;/svg&gt;
&lt;/center&gt;&lt;/div&gt;


&lt;div style=&#39;flex:1&#39; id=&#39;simple-components&#39;&gt;
  &lt;div class=&quot;component&quot; style=&quot;height:474px; width: 249px; margin-top: 20px;&quot; id=&#39;sc-v&#39; data-props=&quot;{ query: &#39;Tracy&#39;, results: [{ name: &#39;Tracy Emin&#39;, url: &#39;img/tracy.png&#39; }, { name: &#39;Tom Thompson&#39;, url: &#39;img/tom-t.png&#39; }, { name: &#39;Tom Sachs&#39;, url: &#39;img/tom-s.png&#39; }] }&quot; data-title=&quot;View&quot;&gt;&lt;p&gt;View&lt;/p&gt;
    &lt;div class=&quot;component&quot; id=&#39;sc-v-textfield&#39; data-props=&quot;{ text: &#39;Tracy&#39;, onChange: function(){} }&quot; data-title=&quot;SearchQueryInput&quot;&gt;&lt;p&gt;SearchQueryInput&lt;/p&gt;&lt;/div&gt;
    &lt;div class=&quot;component&quot; id=&#39;sc-v-results&#39; data-props=&quot;{ scrollEnabled: false }&quot; data-title=&quot;ScrollView&quot;&gt;&lt;p&gt;ScrollView&lt;/p&gt;
      &lt;div class=&quot;component&quot; id=&#39;sc-v-results-tracey&#39; data-props=&quot;{ name: &#39;Tracy Emin&#39;, url: &#39;img/tracy.png&#39; }&quot; data-title=&quot;ArtistResult&quot;&gt;&lt;p&gt;ArtistResult&lt;/p&gt;&lt;/div&gt;
      &lt;div class=&quot;component&quot; id=&#39;sc-v-results-tom-t&#39; data-props=&quot;{ name: &#39;Tom Thompson&#39;, url: &#39;img/tom-t.png&#39; }&quot; data-title=&quot;ArtistResult&quot;&gt;&lt;p&gt;ArtistResult&lt;/p&gt;&lt;/div&gt;
      &lt;div class=&quot;component&quot; id=&#39;sc-v-results-tom-s&#39; data-props=&quot;{ name: &#39;Tom Sachs&#39;, url: &#39;img/tom-s.png&#39; }&quot; data-title=&quot;ArtistResult&quot;&gt;&lt;p&gt;ArtistResult&lt;/p&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;component&quot; id=&#39;sc-v-done&#39; data-props=&quot;{ onTap: function(){} }&quot; data-title=&quot;Button&quot;&gt;&lt;p&gt;Button&lt;/p&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;


&lt;div id=&#39;simple-components-props&#39; style=&#39;flex:1; &#39; &gt;
  &lt;code&gt;&lt;pre style=&quot;margin-top: 20px; width: 269px; height:452px;&quot;&gt;// Hover on prototype for props
{
  ...
}
  &lt;/pre&gt;&lt;/code&gt;
&lt;/div&gt;




&lt;script&gt;
var JSONWithFuncs = function(key, val) {
  if (typeof val === &#39;function&#39;) {
    return &quot;() =&gt; void&quot; 
  }
  return val;
};

var highlight = function(id) {
  var $svgComponent = $(&quot;#r-&quot; + id)
  var $component = $(&quot;#sc-&quot; + id)

  $svgComponent.attr(&quot;stroke&quot;, &quot;black&quot;)
  $component.addClass(&quot;highlight&quot;)

  var props = $component.data(&quot;props&quot;)
  var object = eval(&quot;(&quot; + props + &quot;)&quot;)
  var formatString = JSON.stringify(object, JSONWithFuncs, &quot;  &quot;).replace(&#39;&quot;() =&gt; void&quot;&#39;, &quot;() =&gt; void&quot;)
  $(&quot;#simple-components-props pre&quot;).text(&quot;// Props for &quot; + $component.data(&quot;title&quot;) + &quot;\n\n&quot; + formatString) 
}
var unHighlight = function(id) {
  $(&quot;#r-&quot; + id).attr(&quot;stroke&quot;, &quot;none&quot;)
  $(&quot;#sc-&quot; + id).removeClass(&quot;highlight&quot;)
}

$(&quot;svg&quot;).find(&quot;g#React &gt; rect&quot;).hover(function(){
    var newID = this.id.replace(/^r-/, &quot;&quot;)
    highlight(newID)
}, function () {
    var newID = this.id.replace(/^r-/, &quot;&quot;)
    unHighlight(newID)
});

$(&quot;.component&quot;).hover(function(){
    var newID = this.id.replace(/^sc-/, &quot;&quot;)
    highlight(newID)
}, function () {
    var newID = this.id.replace(/^sc-/, &quot;&quot;)
    unHighlight(newID)
});
&lt;/script&gt;


&lt;p&gt;&lt;/article&gt;
&lt;article class=&quot;post&quot; style=&quot;margin-top: 620px&quot;&gt;&lt;/p&gt;

&lt;p&gt;This kind of tree structure should feel quite similar to the &lt;code&gt;UIView&lt;/code&gt; tree that you see inside a tool like Reveal, or inside the Xcode visual inspector. Next up I want to show you what the code for this would look like in JavaScript:&lt;/p&gt;

&lt;!-- The {{ and }} get eaten by mustache --&gt;


&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;21&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;22&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;23&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;24&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;25&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;26&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;27&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;28&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;29&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;30&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;31&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;32&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;33&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;34&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;35&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;36&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;37&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;38&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;39&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;40&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c1&quot;&gt;// Import React, and native components from React Native&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;react&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ScrollView&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;react-native&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c1&quot;&gt;// Re-use our existing search TextInput component&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;TextInput&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;./text_input&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c1&quot;&gt;// Exports a React component called Search Results from this file&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;SearchResults&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;// The tree of components that this component represents&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nx&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;c1&quot;&gt;// This is JSX code, JSX is a source-code transformer that converts code from &lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;c1&quot;&gt;// HTML-like brackets into a specific method call. E.g  `&amp;lt;Text font=&amp;quot;Garamond&amp;quot; /&amp;gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;c1&quot;&gt;// turns into; `React.createElement(&amp;#39;Text&amp;#39;, {font: &amp;#39;Garamond&amp;#39;}, null)`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;SearchQueryInput&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;query&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onChange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;onQueryChange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ScrollView&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;          &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;results&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;rowForResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/ScrollView&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/View&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;// Returns a single component for a row in the search&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nx&quot;&gt;rowForResult&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ArtistResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Image&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/Text&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;/ArtistResult&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;// A function to handle changes to the search query&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nx&quot;&gt;onQueryChange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;blockquote&gt;&lt;p&gt;You&#39;re looking at a subclass of &lt;code&gt;React.Component&lt;/code&gt; with two functions, &lt;code&gt;render&lt;/code&gt; and &lt;code&gt;rowForResult&lt;/code&gt;. &lt;code&gt;render&lt;/code&gt; is the key function for defining your tree.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Instead of MVC, React uses composition of components to handle complexity - this should feel quite similar to iOS development. The screen of an iOS app is typically made up of &lt;code&gt;UIView&lt;/code&gt;s, and &lt;code&gt;UIViewController&lt;/code&gt;s which exist as 2 interlinked trees of hierarchy. A &lt;code&gt;UIViewController&lt;/code&gt; itself doesn&#39;t have a visual representation, but exists to manipulate data, handle actions and the view structure for &lt;code&gt;UIViews&lt;/code&gt; who do.&lt;/p&gt;

&lt;p&gt;By merging the responsibilities of a &lt;code&gt;UIView&lt;/code&gt; and &lt;code&gt;UIViewController&lt;/code&gt; into a Component, there is a consistent way to work with all aspects of your app.&lt;/p&gt;

&lt;p&gt;To try to undestand this, let&#39;s take a trivial example. Downloading some data from the network and showing it on a screen.&lt;/p&gt;

&lt;p&gt;In UIKit-world you would:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Create a &lt;code&gt;UIViewController&lt;/code&gt; subclass, which makes the API request on its &lt;code&gt;viewDidLoad&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;While the request is sent you present a set of views during loading&lt;/li&gt;
&lt;li&gt;When the API request has returned, you convert the data into native model objects, remove the loading screen&lt;/li&gt;
&lt;li&gt;You then create a new view hierarchy for your model, and pass down attributes of the model to those views&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In React you would:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Create a &lt;code&gt;React.Component&lt;/code&gt; subclass, which makes the API request on its &lt;code&gt;onMount&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;While the request is sent you render a set of components during loading&lt;/li&gt;
&lt;li&gt;When the API request has returned, you change your &quot;state&quot; on the main component with the API request&#39;s JSON&lt;/li&gt;
&lt;li&gt;The state change re-runs your render method, which passes the API &quot;state&quot; down to the component for your page&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;They are conceptually very similar. React does two key things differently: Handle &quot;state&quot; changes on any component, and handle view creation/addition and removal.&lt;/p&gt;

&lt;a name=&quot;Handling..State..Changes&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Handling &quot;State&quot; Changes&lt;/h2&gt;

&lt;p&gt;So, I&#39;ve been quoting &quot;state&quot;, I should explain this. There are two types of &quot;state&quot; inside React, and I&#39;ve been using the quoted term to refer to both for simplicity till now.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There are two types of data that control a component: &lt;code&gt;props&lt;/code&gt; and &lt;code&gt;state&lt;/code&gt;. &lt;code&gt;props&lt;/code&gt; are set by the parent and they are fixed throughout the lifetime of a component. For data that is going to change, we have to use &lt;code&gt;state&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://facebook.github.io/react-native/docs/state.html&quot;&gt;React Native - State&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So in our case above, getting the API results only changes the state on the component which makes the request. However, the results are passed down into the props &lt;em&gt;(properties)&lt;/em&gt; of the component&#39;s children as any further changes to the API data (for example if you were polling for updates) would result in a re-render of the child-components.&lt;/p&gt;

&lt;p&gt;So for the lifetime of that top-level component, the changes due to the API request are put in state. Then the results are passed down to its children as props. This means the children can potentially change when an API response is received.&lt;/p&gt;

&lt;p&gt;This is a hard abstraction to grok outright, so it&#39;s good to take a second opinion. I felt that &lt;a href=&quot;https://github.com/arjunsk/react-guide/blob/3bde47efae5dd8e238d0e8176083bd6d1ca03bb3/props-vs-state.md#props-vs-state&quot;&gt;this guide from uberVU&lt;/a&gt; as well as the official docs above explain it in different ways. Which can help ground your understanding. Overall, these are the rules:&lt;/p&gt;

&lt;blockquote&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&amp;nbsp; &lt;/th&gt;
&lt;th&gt; &lt;em&gt;props&lt;/em&gt; &lt;/th&gt;
&lt;th&gt; &lt;em&gt;state&lt;/em&gt; &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Can get initial value from parent Component? &lt;/td&gt;
&lt;td&gt; Yes &lt;/td&gt;
&lt;td&gt; Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Can be changed by parent Component? &lt;/td&gt;
&lt;td&gt; Yes &lt;/td&gt;
&lt;td&gt; No&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Can set default values inside Component? &lt;/td&gt;
&lt;td&gt; Yes &lt;/td&gt;
&lt;td&gt; Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Can change inside Component? &lt;/td&gt;
&lt;td&gt; No &lt;/td&gt;
&lt;td&gt; Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Can set initial value for child Components? &lt;/td&gt;
&lt;td&gt; Yes &lt;/td&gt;
&lt;td&gt; Yes&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Can change in child Components? &lt;/td&gt;
&lt;td&gt; Yes &lt;/td&gt;
&lt;td&gt; No&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&lt;p&gt;From &lt;a href=&quot;https://github.com/uberVU/react-guide&quot;&gt;uberVU&#39;s react-guide&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;a name=&quot;Handling.View.Management&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Handling View Management&lt;/h2&gt;

&lt;p&gt;Because of the consolidated rules around state management React can quite easily know when there have been changes throughout your component tree and to call &lt;code&gt;render&lt;/code&gt; for those components. &lt;code&gt;render&lt;/code&gt; is the function where you declare the tree of children for a component.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The flow [of data] in React is one-directional. We maintain a hierarchy of components, in which each component depends only on its parent and its own internal state. We do this with properties: data is passed from a parent to its children in a top-down manner. If an ancestor component relies on the state of its descendant, one should pass down a callback to be used by the descendant to update the ancestor.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://facebook.github.io/react-native/docs/communication-ios.html&quot;&gt;React Native - Communication between native and React Native&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Props are treated as the equivalent of a Swift &lt;code&gt;let&lt;/code&gt; variable in this case, any changes to props require a new version of the component to exist in the tree and thus &lt;code&gt;render&lt;/code&gt; is called.&lt;/p&gt;

&lt;p&gt;So, in summary: React&#39;s paradigm is a component tree, where the &lt;code&gt;render&lt;/code&gt; function of a component passes down one component&#39;s state into the props of the children.&lt;/p&gt;

&lt;a name=&quot;React.Native&quot;&gt;&lt;/a&gt;
&lt;h1&gt;React Native&lt;/h1&gt;

&lt;p&gt;React was built for the web - but &lt;a href=&quot;https://youtu.be/KVZ-P-ZI6W4?t=12m54s&quot;&gt;some-one realised&lt;/a&gt; that they could de-couple the React component tree from the HTML output, and instead that could be a tree of &lt;code&gt;UIView&lt;/code&gt;&#39;s.&lt;/p&gt;

&lt;p&gt;That is the core idea of React Native. Bridge the React component tree to native primitives. React Native runs on a lot of platforms:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Officially: iOS, Android, tvOS &amp;amp; VR.&lt;/li&gt;
&lt;li&gt;Unofficially: macOS, Windows &amp;amp; Ubuntu.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Each of these platforms will have their own way of showing some text e.g.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;RCTText&lt;/code&gt; for iOS and tvOS - &lt;a href=&quot;https://github.com/facebook/react-native/blob/559805d0b04da99b80a0813917b7eaa2716faa4c/Libraries/Text/RCTText.m#L117&quot;&gt;which uses NSTextStorage, and drawRect&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Textfield&lt;/code&gt; for Android - which uses &lt;a href=&quot;https://github.com/facebook/react-native/blob/559805d0b04da99b80a0813917b7eaa2716faa4c/ReactAndroid/src/main/java/com/facebook/react/flat/DrawTextLayout.java&quot;&gt;Canvas and a DrawCommand&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Three.js view primitive&lt;/code&gt; for VR - which uses &lt;a href=&quot;https://github.com/facebook/react-vr/blob/1f037c118b2088f7881c240fdfd6c204de8b2c65/OVRUI/src/UIView/UIView.js#L221&quot;&gt;BitmapFontGeometry&lt;/a&gt; + &lt;a href=&quot;https://github.com/facebook/react-vr/blob/master/OVRUI/src/SDFFont/SDFFont.js&quot;&gt;Shaders&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;RCTText&lt;/code&gt; for macOS &lt;a href=&quot;https://github.com/ptmt/react-native-macos/blob/f3ce1d124e32a95e48ed26c05865e150714887da/Libraries/Text/RCTText.m#L182&quot;&gt;which also uses NSTextStorage, and drawRect&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ReactTextShadowNode&lt;/code&gt; for Windows - which uses a &lt;a href=&quot;https://github.com/Microsoft/react-native-windows/blob/2cc697859c80f59350e9613565a975023ae1046e/ReactWindows/ReactNative/Views/Text/ReactTextShadowNode.cs#L252&quot;&gt;RichTextBlock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;QQuickItem&lt;/code&gt; for Ubuntu - Which uses &lt;a href=&quot;https://github.com/CanonicalLtd/react-native/blob/98e0ce38cdcb8c489a064c436a353be754e95f89/ReactUbuntu/runtime/src/reactrawtextmanager.cpp#L84&quot;&gt;QString to render&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But when working at React-level, you would use the component &lt;code&gt;Text&lt;/code&gt;. This means you work at a &quot;React in JS&quot; level, and rely on the primitives provided by each implementation of React Native.&lt;/p&gt;

&lt;p&gt;For iOS, this works by using a JavaScript runtime (running via JavaScriptCore in your app) which sends &lt;a href=&quot;https://twitter.com/nicklockwood/status/876130867177033730&quot;&gt;messages across a bridge&lt;/a&gt; that handles the native &lt;code&gt;UIView&lt;/code&gt; hierarchy. Most of the messaging work is handled inside the &lt;code&gt;RCTUIManager&lt;/code&gt; which receives calls like &lt;code&gt;createView:viewName:rootTag:props:&lt;/code&gt;, &lt;code&gt;setChildren:reactTags:&lt;/code&gt;, &lt;code&gt;updateView:viewName:props:&lt;/code&gt; and &lt;code&gt;createAnimatedNode:config&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This bridging is how you get a lot of the positive aspects of working with the JavaScript tooling ecosystem. The JavaScript used by React can be updated independent of the app, but so long as it is working with the same native bridge version. This bridging technique is how React can safely have a reliable version of &lt;a href=&quot;http://johnholdsworth.com/injection.html?index=438&quot;&gt;Injection for Xcode&lt;/a&gt;. It re-evaluates your JavaScript code, and that triggers a new set of messages to the native side.&lt;/p&gt;

&lt;p&gt;Like any cross-platform abstraction, React Native can be leaky. To write a cross-platform app that purely lives inside JS Runtime, you have to write React-only code. React and React Native doesn&#39;t have ways to handle primitives like &lt;code&gt;UINavigationController&lt;/code&gt; - they want your entire app to be represented as a series of components that can be mapped across many platforms.&lt;/p&gt;

&lt;p&gt;This isn&#39;t optimal when you&#39;re coming in from the native world - where you&#39;re used to building platform-specific experiences, and are genuinely excited at the prospect of platform-specific APIs. Generally you can look for other teams who have felt the same and are willing to write native-bridged code that&#39;s specific to iOS. Shout-out to &lt;a href=&quot;https://duckduckgo.com/?q=wix+engineering&amp;amp;t=osx&amp;amp;ia=web&quot;&gt;Wix&lt;/a&gt; and &lt;a href=&quot;https://medium.com/airbnb-engineering/tagged/mobile&quot;&gt;AirBnB&lt;/a&gt; who are doing great work in this space.&lt;/p&gt;

&lt;p&gt;Is this a critical problem against React Native? I don&#39;t think so, we&#39;ve added native abstractions where it was the right decision and we&#39;ve used JavaScript when it was the right decision.&lt;/p&gt;

&lt;p&gt;For example, our &lt;code&gt;Image&lt;/code&gt; component is a bridged native component that uses &lt;code&gt;SDWebImage&lt;/code&gt; under the hood so that we can share an image cache for thumbnails with the native side of the app. It works by:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/artsy/emission/blob/e4bbde386d54bc8ca73565d667e2701ab0fad0f0/src/lib/Components/OpaqueImageView.tsx#L50-L135&quot;&gt;Declaring a JavaScript component&lt;/a&gt; to represent your native component&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/artsy/emission/blob/e4bbde386d54bc8ca73565d667e2701ab0fad0f0/src/lib/Components/OpaqueImageView.tsx#L135&quot;&gt;Letting React Native know&lt;/a&gt; you mean to reference native code for your component&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/artsy/emission/blob/e4bbde386d54bc8ca73565d667e2701ab0fad0f0/Pod/Classes/OpaqueImageViewComponent/AROpaqueImageView.h&quot;&gt;Creating a native view&lt;/a&gt; with the same interface as your props&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/artsy/emission/blob/e4bbde386d54bc8ca73565d667e2701ab0fad0f0/Pod/Classes/OpaqueImageViewComponent/AROpaqueImageViewManager.m#L25-L41&quot;&gt;Using bridging macros&lt;/a&gt; to expose your interface to JavaScript&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Here is a commit that initially added &lt;a href=&quot;https://github.com/artsy/emission/commit/a404ccf1519ec79fc0bfadf6e572d990caa0a9ec&quot;&gt;the native component&lt;/a&gt;, before it became more complex from production usage. The bridging macros cannot be used in Swift, but you can &lt;a href=&quot;https://facebook.github.io/react-native/docs/native-modules-ios.html#exporting-swift&quot;&gt;still bridge to existing Swift code&lt;/a&gt; too.&lt;/p&gt;

&lt;p&gt;This fundamentally means you can have both: a faster more elegant way to write your interfaces and the ability to still work with any part of the native toolchains you want. You can pick based on the problem, and the domain.&lt;/p&gt;

&lt;a name=&quot;Ten.minutes.to.try.out.React&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Ten minutes to try out React&lt;/h2&gt;

&lt;p&gt;OK, no joke, don&#39;t skip this bit, you try React Native right now. This will require some terminal skills, and about 5 minutes, it shouldn&#39;t be more complex than using CocoaPods via the terminal.&lt;/p&gt;

&lt;p&gt;&lt;/article&gt;
&lt;article class=&quot;desktop-only&quot; style=&#39;display: flex; flex-flow:row;&#39;&gt;&lt;/p&gt;

&lt;div style=&#39;flex:1; display: block;&#39;&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;sh&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c&quot;&gt;# If you don&amp;#39;t have homebrew&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c&quot;&gt;# see https://brew.sh&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c&quot;&gt;# Install the JavaScript tools you&amp;#39;ll need&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;brew install nodejs yarn
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c&quot;&gt;# You&amp;#39;ll want Visual Studio Code to work on this&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;brew cask install visual-studio-code
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c&quot;&gt;# Install the React Native CLI&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;yarn global add react-native-cli
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c&quot;&gt;# Create a new React Native&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c&quot;&gt;# project called TrendingArtists&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;react-native init TrendingArtists
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;

&lt;/div&gt;


&lt;div id=&#39;installing-node&#39; class=&quot;desktop-only&quot; style=&#39;flex:1; display: block;&#39;&gt;

&lt;p&gt;You&#39;ll need &lt;code&gt;node&lt;/code&gt; and &lt;code&gt;yarn&lt;/code&gt; installed globally so you can run JavaScript and handle dependency management respectively.&lt;p&gt;

&lt;p&gt;For working inside a JavaScript project, I&#39;d strongly recommend using Microsoft&#39;s &lt;a href=&#39;https://code.visualstudio.com&#39;&gt;Visual Studio Code&lt;/a&gt;, it does a great job for React Native.&lt;/p&gt;

&lt;p&gt;Next up we&#39;re going to make the initial project and look around, so once all the installing has finished. You can follow along with the next section.&lt;/p&gt;

&lt;p&gt;If the command `react-native` isn&#39;t working, &lt;a href=&#39;https://github.com/keitaito&#39;&gt;@keitaito&lt;/a&gt; has some useful advice in the [comments](#comments).&lt;/p&gt;

&lt;/div&gt;


&lt;p&gt;&lt;/article&gt;
&lt;article class=&#39;post&#39;&gt;&lt;/p&gt;

&lt;p&gt;Alright, so that should do a lot of downloading, and you&#39;ll have a new folder with a fully set up project for iOS and Android. We&#39;ll be focusing on the iOS side.&lt;/p&gt;

&lt;p&gt;Open up &lt;code&gt;TrendingArtists&lt;/code&gt; in your editor and inside your terminal with &lt;code&gt;cd TrendingArtists&lt;/code&gt; then &lt;code&gt;code .&lt;/code&gt;. From the terminal you can get the Xcode project compiled, and your new app open inside the iOS simulator with &lt;code&gt;react-native run-ios&lt;/code&gt;. This will will set you up to work without Xcode.&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;run-ios&lt;/code&gt; command first uses &lt;code&gt;xcodebuild&lt;/code&gt; to compile the native app found in &lt;code&gt;ios/TrendingArtists.xcodeproj&lt;/code&gt; it will then load up the the React Native Packager. We&#39;ll cover that later, for now, think of it as a JavaScript file change watcher.&lt;/p&gt;

&lt;p&gt;Once a simulator has popped up, you&#39;ll see the &quot;Welcome to React Native&quot; screen. Now that we&#39;ve got &quot;an app&quot; running. It will take a minute or two to parse all your JavaScript. So then let&#39;s take a moment to look through what we have in our file system now.&lt;/p&gt;

&lt;p&gt;&lt;/article&gt;
&lt;article class=&quot;desktop-only&quot; style=&#39;display: flex; flex-flow: row;&#39;&gt;&lt;/p&gt;

&lt;div class=&quot;desktop-only&quot; style=&#39;flex:1; display: block;&#39;&gt;


&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;21&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;22&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;23&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;24&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;25&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;26&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;27&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;28&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;29&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;30&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;31&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;32&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;33&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;34&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;35&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;36&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;sh&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c&quot;&gt;# If you want tree: brew install tree&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;tree .
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ __tests__
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îú‚îÄ‚îÄ index.android.js
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îî‚îÄ‚îÄ index.ios.js
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ android - &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;snipped&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ app.json
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ index.android.js
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ index.ios.js
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ ios
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TrendingArtists
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AppDelegate.h
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ AppDelegate.m
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Base.lproj
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ LaunchScreen.xib
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Images.xcassets
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ AppIcon.appiconset
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ Contents.json
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Info.plist
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ main.m
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TrendingArtists-tvOS
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Info.plist
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TrendingArtists-tvOSTests
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Info.plist
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TrendingArtists.xcodeproj
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ project.pbxproj
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ project.xcworkspace
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ contents.xcworkspacedata
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îî‚îÄ‚îÄ TrendingArtistsTests
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ Info.plist
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ TrendingArtistsTests.m
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ jsconfig.json
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ package.json
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ node_modules &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;x million files snipped&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îî‚îÄ‚îÄ yarn.lock
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;

&lt;/div&gt;


&lt;div class=&quot;desktop-only&quot; style=&#39;flex:1; display: block;&#39;&gt;

&lt;p&gt;&lt;strong&gt;What are we looking at?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;First up - we have some test files, these files are unique per platform - though they do have the same code right now. In React Native imports can resolve to be different per-platform, which is why you see &lt;code&gt;.android.js&lt;/code&gt; or &lt;code&gt;.ios.js&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;index.android.js&lt;/code&gt; and &lt;code&gt;index.ios.js&lt;/code&gt;  are the launching point for this app, so it&#39;s in there you&#39;ll find the code for what we&#39;re seeing on screen.&lt;/p&gt;

&lt;p&gt;In the &lt;code&gt;ios&lt;/code&gt; folder, we have the native side of React Native. Looks pretty empty from here, but when you open the workspace you&#39;ll note that it is referring to a lot of &lt;code&gt;xcproject&lt;/code&gt;s which are inside your &lt;code&gt;node_modules&lt;/code&gt; folder.&lt;/p&gt;

&lt;p&gt;The Xcode project is really barebones, it&#39;s just an &lt;code&gt;AppDelegate&lt;/code&gt; that creates a &lt;code&gt;UIView&lt;/code&gt; subclass. You can see that it references &lt;code&gt;index.ios.js&lt;/code&gt; which is where your JavaScript side starts.&lt;/p&gt;

&lt;p&gt;Then you have the &lt;code&gt;package.json&lt;/code&gt; which is like an Xcodeproj + Podfile in one, and the &lt;code&gt;node_modules&lt;/code&gt; folder. This file houses all your JavaScript dependencies, your runtime scripts and app metadata.&lt;/p&gt;

&lt;/div&gt;


&lt;p&gt;&lt;/article&gt;
&lt;article class=&#39;post&#39;&gt;&lt;/p&gt;

&lt;p&gt;I&#39;d like to show you how to make a change appear instantly. In your iOS Simulator, perform a shake gesture (&lt;code&gt;cmd + ctrl + z&lt;/code&gt;) and in the React Native debug menu, hit &quot;Enable Hot Reloading&quot;. It will trigger a reload of all your JS code again.&lt;/p&gt;

&lt;p&gt;Now you can go into your text editor and change some of the words inside &lt;code&gt;index.ios.js&lt;/code&gt; - those changes will be reflected almost instantly. You can do this for almost anything, almost anywhere. We&#39;ve been working &lt;a href=&quot;https://github.com/artsy/emission/&quot;&gt;on Emission&lt;/a&gt; for over a year, and this is still close to instant in every part of the codebase.&lt;/p&gt;

&lt;p&gt;One of the key changes here is that React Native will occasionally make you wait a bit longer (parsing all of the JavaScript) in exchange for very often giving you sub-second changes reflected on screen. This is an incredibly positive change from 9 seconds per iteration from my blank native app.&lt;/p&gt;

&lt;p&gt;This substantially changes how easily I can focus on my work in React Native, and how effortlessly I can experiment with code. It makes me feel really productive, and makes pairing a joy.&lt;/p&gt;

&lt;p&gt;If you&#39;d like to go through a tutorial from this point, I&#39;d recommend these:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://facebook.github.io/react-native/docs/tutorial.html&quot;&gt;The React Native site&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://egghead.io/browse/frameworks/react-native&quot;&gt;Egghead.io - React Native&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.reactnativeexpress.com&quot;&gt;React Native Express&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://makeitopen.com&quot;&gt;Building the f8 2016 app&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We&#39;re now going back to talking about the hows and whys. Good luck with those tutorials though - &lt;a href=&quot;/images/what-is-rn/you-have-got-this.gif&quot;&gt;you&#39;ve got this :D&lt;/a&gt;&lt;/p&gt;

&lt;a name=&quot;Writing.JavaScript&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Writing JavaScript&lt;/h2&gt;

&lt;p&gt;JavaScript is a deceptively simple language with a lot of weird gotchas, which makes it easy downplay. Especially coming from the native world, where you are used to vendor-owned programming languages which are more focused and have useful type systems.&lt;/p&gt;

&lt;p&gt;I think it&#39;s safe to say that the majority of JavaScript&#39;s warts are fixed by community tooling nowadays. Tools like ESLint, TSLint, Babel, Prettier, TypeScript and Flow make it difficult to write bad code, and the JavaScript community really comes together to fix it&#39;s own problems. This differs from the &lt;a href=&quot;https://en.wikipedia.org/wiki/Damocles&quot;&gt;Sword of Damocles&lt;/a&gt; that &lt;a href=&quot;http://artsy.github.io/blog/2017/02/05/Retrospective-Swift-at-Artsy/#Developer.Experience&quot;&gt;exists for big OSS projects&lt;/a&gt; in the iOS community.&lt;/p&gt;

&lt;p&gt;Here&#39;s a collection of tools that we use every day in the JS world:
&lt;/article&gt;
&lt;article&gt;&lt;center&gt;&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt; Project   &lt;/th&gt;
&lt;th&gt;  What it does  &lt;/th&gt;
&lt;th&gt; Why it&#39;s awesome &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;https://babeljs.io&quot;&gt;Babel&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Transform source code &lt;/td&gt;
&lt;td&gt; You can pick and choose language features &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;http://www.typescriptlang.org&quot;&gt;TypeScript&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Transform source code &lt;/td&gt;
&lt;td&gt; Microsoft choose all your language features &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;https://www.npmjs.com/&quot;&gt;NPM&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; CocoaPods for JS &lt;/td&gt;
&lt;td&gt; Make your own standard library &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;https://yarnpkg.com/lang/en/&quot;&gt;Yarn&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Improved CocoaPods for JS &lt;/td&gt;
&lt;td&gt; An NPM compatible re-think of the NPM CLI &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;http://eslint.org&quot;&gt;ESLint&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Static code linter &lt;/td&gt;
&lt;td&gt; Makes it hard to write bad code in JS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;https://palantir.github.io/tslint/&quot;&gt;TSLint&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Static code linter &lt;/td&gt;
&lt;td&gt; Makes it hard to write bad code in TS &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;https://prettier.io&quot;&gt;prettier&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Code formatter &lt;/td&gt;
&lt;td&gt; Never argue about syntax for JS/TS/CSS/JSON &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;https://facebook.github.io/jest/&quot;&gt;Jest&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Test runner &lt;/td&gt;
&lt;td&gt; Fast, watches for changes, runs only changed code, etc &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;https://storybook.js.org&quot;&gt;Storybooks&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Prototyping environment &lt;/td&gt;
&lt;td&gt; Make browsable scenes of state + components &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;https://github.com/typicode/husky&quot;&gt;Husky&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Simplify Git Hooks &lt;/td&gt;
&lt;td&gt; Easily ensure code is consistent &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;http://danger.systems/js/&quot;&gt;DangerJS&lt;/a&gt; &lt;/td&gt;
&lt;td&gt; Code review automation &lt;/td&gt;
&lt;td&gt; Stop asking for CHANGELOG entries etc &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt; &lt;a href=&quot;https://github.com/facebook/metro-bundler/&quot;&gt;Metro Bundler&lt;/a&gt; &lt;/td&gt;
&lt;td&gt;Code bundler for React Native &lt;/td&gt;
&lt;td&gt; Handles code changes at runtime for you &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


&lt;p&gt;&lt;/center&gt;&lt;/article&gt;
&lt;article class=&#39;post&#39;&gt;&lt;/p&gt;

&lt;p&gt;These inter-linked, composable tools basically represent the entire idea of the JavaScript community. You add them to your project, and your project gets all these small config files that eventually create the kind of cohesive tooling that you would expect from a single vendor in a native environment.&lt;/p&gt;

&lt;p&gt;The good part is that they are interchangeable, for example, we switched from Flow to TypeScript with roughly 2 weeks work, then a week to come close to perfect. The bad side is that the configuration aspects of these projects feels like something you do once, then forget until it needs to change.&lt;/p&gt;

&lt;p&gt;I wrote up a glossary of terms from JavaScript when I first started understanding the community, you can &lt;a href=&quot;/blog/2016/11/14/JS-Glossary/&quot;&gt;find it here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;&quot;But JavaScript is such a downgrade compared to Swift&quot;&lt;/em&gt;, I hear you echoing from the back. This is my own perspective but I consider my workflow in TypeScript to be significantly better than working in Swift. My code is statically analyzed as I type, it is auto-styled as I save, my tests are instant, permanently running and show inside my editor at all times, it&#39;s portable across platforms, it&#39;s quick to execute and embarrassingly fast to compile. I can contribute to all of these tools to improve them. I&#39;d rather work in that environment.&lt;/p&gt;

&lt;p&gt;Syntax wise, TypeScript doesn&#39;t have enums with associated types, which I like, nor implicit trailing closures. As a trade-off though TypeScript has &lt;a href=&quot;https://www.typescriptlang.org/docs/handbook/advanced-types.html&quot;&gt;union types&lt;/a&gt;, which work really well for data-modeling.&lt;/p&gt;

&lt;p&gt;One particular thing I like a lot about JavaScript that the code you read is generally simpler, as nearly all symbols that you use need to be defined in that file. This is because you can only import a single file, instead of an entire target. Meaning if you include a library, you either import the functions you want, or the library as a whole and then extract the functions, and variables that you want.&lt;/p&gt;

&lt;p&gt;If there&#39;s one major flaw with the JavaScript code we have written so far, it&#39;s the complicated ugliness surrounding the &lt;code&gt;this&lt;/code&gt; keyword. It is &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this&quot;&gt;genuinely complicated&lt;/a&gt;, and a good source of dev-time errors for me. No linters can really catch those errors, so it becomes frustrating.&lt;/p&gt;

&lt;a name=&quot;Node.js&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Node.js&lt;/h2&gt;

&lt;p&gt;Next to React Native, there are two main environments for writing JavaScript in: the browser, and inside Node. Node is the JavaScript runtime from Google Chrome (called V8, their version of JavaScriptCore) with a UNIX-like baseline set of APIs.&lt;/p&gt;

&lt;p&gt;It provides relatively few APIs, it is expected that you would use an NPM module for anything particularly high level. The principle being that a standard library (like Foundation in iOS) is always going to be out of date, and incompatible with what web-browsers ship.&lt;/p&gt;

&lt;p&gt;An NPM module is a set of JavaScript files with a particular structure. Generally, there is a &lt;code&gt;package.json&lt;/code&gt; to describe the library, and an &lt;code&gt;index.js&lt;/code&gt; with the code for the library. Libraries can be as small as a single-function to a typical &quot;XYZKit&quot; you would expect from a CocoaPod. As JavaScript tends to be bundled and minified based on code used, developers mainly worry about the overall file-size of their library. You would use a package manager like NPM or Yarn to manage these dependencies. Node modules have the unique, and dangerous idea of allowing multiple versions of the same library to exist inside your application. This &quot;fixes&quot; the problem of dependency hell, at the cost of potential runtime issues. Here&#39;s a full &lt;a href=&quot;https://lexi-lambda.github.io/blog/2016/08/24/understanding-the-npm-dependency-model/&quot;&gt;explanation of the pattern&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;When writing JavaScript with React Native, you are using node modules, but &lt;em&gt;strictly speaking&lt;/em&gt; you are not writing a node app. The code that you write is executed inside JavaScriptCore and so doesn&#39;t have access to the UNIX-like API from node.&lt;/p&gt;

&lt;p&gt;This can make it a bit confusing about whether you can or can&#39;t use a library from NPM. This also gets a bit more tricky, for example your tests &lt;em&gt;are&lt;/em&gt; running inside node. So, it&#39;s fine for your tests to use all of those APIs and libraries, but not your app&#39;s code. So far, from my experience this hasn&#39;t been a problem, in part because of how we use React Native (mainly API -&gt; UI). For example, I researched all of this during the creation of this post, as I hadn&#39;t really noticed the mismatch during active development.&lt;/p&gt;

&lt;a name=&quot;JS.Tooling&quot;&gt;&lt;/a&gt;
&lt;h2&gt;JS Tooling&lt;/h2&gt;

&lt;p&gt;Facebook&#39;s tooling is üëç. They have an IDE-like text editor called &lt;a href=&quot;https://nuclide.io&quot;&gt;Nuclide&lt;/a&gt;, which is built on GitHub&#39;s text editor Atom. If you&#39;re using the default setup for React Native then you&#39;ll probably have a good time with it.&lt;/p&gt;

&lt;p&gt;We opted for using TypeScript to provide a type system to our React Native - I covered why inside &lt;a href=&quot;/blog/2017/02/05/Retrospective-Swift-at-Artsy/&quot;&gt;Retrospective: Swift at Artsy&lt;/a&gt;. It&#39;s got substantially easier to use TypeScript with React Native since version 0.45 includes work from Artsy and &lt;a href=&quot;http://futurice.com&quot;&gt;futurice&lt;/a&gt; making it possible via config settings alone. The alternative to TypeScript &lt;a href=&quot;https://flow.org&quot;&gt;is Flow&lt;/a&gt;, which is also a great choice.&lt;/p&gt;

&lt;p&gt;We choose TypeScript because of how well VS Code and TypeScript integrate. It provides an Xcode-like level of integration. Which, IMO, is a high baseline for expectations. It&#39;s definitely less polished, but it&#39;s &lt;a href=&quot;https://github.com/Microsoft/vscode/&quot;&gt;Open Source&lt;/a&gt; and has substantial monthly releases - which is a very fair trade-off to me.&lt;/p&gt;

&lt;p&gt;The node community is great at automation; we have code formatters and language linters that will auto-fix your code as you press save. We have pre-commit and pre-push hooks that are set up automatically when you start using the project. It means you spend less time thinking about trivial details that add up. It&#39;s wonderful.&lt;/p&gt;

&lt;p&gt;We use the debugging tools built into Chrome for our React Native, instead of something like LLDB. It supports all of the kinds of runtime introspection you would expect from Xcode.&lt;/p&gt;

&lt;a name=&quot;Testing&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Testing&lt;/h1&gt;

&lt;p&gt;Testing was never a priority in the iOS world. I feel like it&#39;s always getting better with each Xcode version, particularly the change in Xcode 9 which allows tests to run in another simulator without turning off your app.&lt;/p&gt;

&lt;p&gt;We really put a lot of time and patience into our native testing on iOS. Coming from that world, to the absolute ease of testing in the JavaScript world is pretty breath-taking. Check out my &lt;a href=&quot;/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#Jest&quot;&gt;coverage of Jest&#39;s features&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;There are two ways to write tests for your React Native code: in process and out of process. E.g. from the JavaScript side, or in native side.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;JS side: Choice of many Open Source test runners, built with hundreds of contributors involved in multi-year test runners.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Native side: Probably one or two people making XCTest, one person trying to get some improvements in Xcode each year. &lt;a href=&quot;https://github.com/apple/swift-corelibs-xctest&quot;&gt;Semi-closed source&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We tried out a few native tests, but very quickly we stopped running them. Mainly as we were spending most of our time in a JavaScript environment, so tests would need to run in Xcode. As we don&#39;t need a Mac to run our tests, we can use linux CI servers and get 3-4 minute CI runs.&lt;/p&gt;

&lt;a name=&quot;Deployment&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Deployment&lt;/h1&gt;

&lt;p&gt;This one is a bit tricky to get your head around at first. React Native is a client-side native library that you don&#39;t make source-code changes to, which interacts with the JavaScript that you bundle with the app (or use the React Native Packager at dev-time.) The JavaScript part of your application is just a file that can be updated, amended or fixed at any time.&lt;/p&gt;

&lt;p&gt;This is not dynamically swizzing or fishhooking methods, you can ship new JavaScript code to your app which can interact with the exact same version of your compiled React Native library. The swizzling, and arbitrary native code changes are the problem that caused app store rejections early in 2017. &lt;a href=&quot;https://github.com/facebook/react-native/issues/12778#issuecomment-284940049&quot;&gt;React Native wasn&#39;t the cause of those rejections&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The &quot;deploy my JS anytime&quot; idea is a little bit tricky though, because you can expose native code to your JavaScript. By exposing new functions, you end up with a &quot;versioned bridge&quot; where you make sure that the native functions your JavaScript expects actually exist. So you need to keep track of &lt;em&gt;when&lt;/em&gt; you can update the JavaScript and the exposed native functions.&lt;/p&gt;

&lt;p&gt;This is what makes it possible to ship bug fixes to your app as fast as the web. We use this, but only for admin users. They can choose the JavaScript for any commit on master, or any active pull request inside a beta version of our app. We don&#39;t ship bug fixes to deployed apps, but we use this ability to provide a simple version of Testflight for our JavaScript code.&lt;/p&gt;

&lt;p&gt;Our app release cadence is still about a month long, moving to React Native hasn&#39;t changed that. We&#39;ve automated the entire process, so it&#39;s a cultural artifact rather than technical. So a day or two for the App Store review is fine, ideally our betas should be getting longer than that for testing.&lt;/p&gt;

&lt;a name=&quot;Doing.it.right.per.platform&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Doing it right per platform&lt;/h2&gt;

&lt;p&gt;I&#39;ve used the term cross-platform quite flippantly in this article to describe code that can run on many platforms. We&#39;ve tried thinking of it as React Native gives us the ability to think in cross-platform terms. We now have most of our app&#39;s root view controllers in React Native, which means we could make a pretty simple Android app re-using that code with a pretty small amount of effort.&lt;/p&gt;

&lt;p&gt;We don&#39;t though. The apps we make &lt;em&gt;need&lt;/em&gt; to fit the platform and feel like the best experience you can get, when you&#39;re potentially buying a &lt;a href=&quot;https://www.artsy.net/collect?color=lightblue&amp;amp;price_range=50000.00-%2A&amp;amp;sort=-prices&quot;&gt;&gt; $100,000 artwork&lt;/a&gt;. We&#39;d need an Android engineer with a lot of experience to work on the app, they&#39;d need to be able to work on React Native for Android when we hit roadblocks and to provide useful context on how the app should feel. &lt;em&gt;BTW, if this is you - get in touch (orta@artsymail.com) ;)&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;We already have some cross-platform code to get us started - but it won&#39;t feel like the app we want to create until there is native code to take that React and make it shine.&lt;/p&gt;

&lt;p&gt;So, where does the cross-platform aspect come from? For most users of React Native, native development has &lt;em&gt;always&lt;/em&gt; been unavailable to them, and now it&#39;s not, because React Native has lowered the barrier to entry. This means many people are aiming to make cross-platform React Native apps that are entirely in JavaScript (see &lt;a href=&quot;#Create.React.Native.App&quot;&gt;Create React Native App&lt;/a&gt;.) They are just trying to get &lt;em&gt;something&lt;/em&gt; shipped, which could be different from what &lt;em&gt;you the reader&lt;/em&gt; are probably doing. As a native dev, you&#39;re probably more interested in making something really fit the platform and shine. Lots of probablys, yes, but it fits the questions we&#39;re being asked.&lt;/p&gt;

&lt;p&gt;Both aspects of this are reasonable. React Native will let you do both. While React Native encourages you to think entirely at the V in MVC only, we still structure our React Native into &lt;code&gt;UIViewController&lt;/code&gt;s and still support unique iOS features via native code.&lt;/p&gt;

&lt;p&gt;One place where this difference in perspective shows up is with navigation. In iOS it&#39;s pretty straight forwards: use &lt;code&gt;UINavigationController&lt;/code&gt;. For React Native, it&#39;s actually &lt;em&gt;really tricky&lt;/em&gt;, check out &lt;a href=&quot;https://github.com/artsy/emission/issues/501&quot;&gt;this issue where I write up all the trade-offs&lt;/a&gt; for the current set of APIs. Some of this is just a statement that figuring out the right abstraction is hard here, the other is that a lot of big apps are also at the same size as ours with ~2 years of React Native adoption.&lt;/p&gt;

&lt;a name=&quot;Create.React.Native.App&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Create React Native App&lt;/h2&gt;

&lt;p&gt;One of the biggest projects to happen in the React Native world in the last 6 months is Create React Native App (CRNA). This is the &quot;super easy to get started&quot; React Native experience.&lt;/p&gt;

&lt;p&gt;Remember that most of the people coming to React Native are web developers, and the idea of writing Objective-C/Swift/Java to them is unappealing. CRNA actually removes the ability for you to write native code, and trades that with letting a company called Expo do it for you.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://expo.io&quot;&gt;Expo&lt;/a&gt; are a pretty new VC-backed company, whose work is entirely open source. They&#39;ve done a lot of foundational work in the community, and as individuals they are well respected for contributions to React Native the library - and a bunch of related libraries. You can use the &lt;a href=&quot;https://itunes.apple.com/app/apple-store/id982107779?ct=www&amp;amp;mt=8&quot;&gt;Expo app&lt;/a&gt; from the App Store to run your CRNA project on any iOS/Android device instantly, and the app has a lot more baseline UI components to work with than React Native does on its own.&lt;/p&gt;

&lt;p&gt;With CRNA you are giving up control of the native side, but gaining a lot on the ease-of-use side. CRNA doesn&#39;t force the project to stay this way though, you can eject your app from using Expo and start adding native code to the app.&lt;/p&gt;

&lt;p&gt;Why did I even mention this? Well, if you&#39;re looking at React Native for a greenfield app (e.g. something new), CRNA may be your best option. When you&#39;re getting started, less options is better, and this is the optimal setup according to the React Native team.&lt;/p&gt;

&lt;a name=&quot;Animations&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Animations&lt;/h2&gt;

&lt;p&gt;A question which regularly comes up is &quot;How can React Native handle animations?&quot; - at this point the answer is &quot;well enough for 80% of all apps, it&#39;s enough for ours.&quot;&lt;/p&gt;

&lt;p&gt;There are two primitives for animation from React Native:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Animated&lt;/code&gt; - This is a fine-grained API for handling changes (we use this in &lt;a href=&quot;https://github.com/artsy/emission/blob/e4bbde386d54bc8ca73565d667e2701ab0fad0f0/src/lib/Components/Buttons/InvertedButton.tsx#L40-L48&quot;&gt;our buttons&lt;/a&gt; and &lt;a href=&quot;https://github.com/artsy/emission/blob/e4bbde386d54bc8ca73565d667e2701ab0fad0f0/src/lib/Components/Home/ArtistRails/ArtistRail.tsx#L63-L73&quot;&gt;view transitions&lt;/a&gt;.)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;LayoutAnimation&lt;/code&gt; - This API feels a little bit like &lt;code&gt;UIView +animate:&lt;/code&gt; - in that you can tell the layout engine that the next update should be animated instead of replaced. (we use this to &lt;a href=&quot;https://github.com/artsy/emission/blob/e4bbde386d54bc8ca73565d667e2701ab0fad0f0/src/lib/Components/Home/ArtworkRails/ArtworkRail.tsx#L77-L80&quot;&gt;handle view expansion&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;These provide enough for most use-cases, but there is a more direct API and a few more JS-level techniques that you can use if you are really starting to feel like you&#39;re dropping frames inside a specific animation.&lt;/p&gt;

&lt;a name=&quot;The.long-term.aspects.of.React.Native&quot;&gt;&lt;/a&gt;
&lt;h2&gt;The long-term aspects of React Native&lt;/h2&gt;

&lt;p&gt;What if Facebook stop maintaining React Native? Today it obviously doesn&#39;t look like it, but if you&#39;re talking the next 5 years - maybe it&#39;s not that rosy. The JavaScript world moves real fast, 5 years ago React didn&#39;t exist and Node still hadn&#39;t had its &lt;a href=&quot;http://anandmanisankar.com/posts/nodejs-iojs-why-the-fork/&quot;&gt;big divorce&lt;/a&gt; and &lt;a href=&quot;https://nodejs.org/en/blog/announcements/foundation-v4-announce/&quot;&gt;got back together&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Our perspective on dependencies has been that &lt;a href=&quot;/blog/2015/09/17/Cocoa-Architecture-Dependencies/&quot;&gt;you should always own them&lt;/a&gt; in the sense that you have an understanding of how they work technically and culturally. This means for the larger projects, you should feel comfortable being able to make PRs back to the project, or feel comfortable that the vendor will fix bugs for you. The latter is not necessarily something that Facebook will be doing for you. They specifically call out that React Native is being built in the open, but that they are building and working on things that affect Facebook in production and then look at larger platform issues. You can get a sense of this by reading &lt;a href=&quot;https://github.com/facebook/react-native/wiki/Roadmap&quot;&gt;the React Native roadmap&lt;/a&gt;. These aims cover the rest of this year, and next year they&#39;ll re-evaluate.&lt;/p&gt;

&lt;p&gt;We&#39;re pretty comfortable that if Facebook stop committing to React Native tomorrow, we (as Artsy) can continue to keep the project stable and at the same place across iOS releases. There&#39;d be a learning curve, but we&#39;re not the only company that&#39;d be willing to do this too: AirBnb, Expo, Uber, Microsoft, GeekyAnts and Wix all participate at &lt;a href=&quot;https://facebook.github.io/react-native/blog/2017/06/21/react-native-monthly-1.html&quot;&gt;a very granular level&lt;/a&gt; and would probably make sure that the code you ship today will work with iOS 12 and so on - as they need that too. Should you rely on that? If you&#39;re small enough then I think it&#39;s reasonable. If you&#39;re a medium sized company, I think you should have at least one engineer who understands and can deep dive into the dependency.&lt;/p&gt;

&lt;p&gt;As a relevant example, Three20 had a very &lt;a href=&quot;https://github.com/jverkoey/nimbus/wiki/Three20-Migration-Guide&quot;&gt;reasonable deprecation path&lt;/a&gt;, it&#39;s just that a lot of people didn&#39;t have the technical ability to migrate off. Frameworks like React Native and Three20 lower the barrier to entry considerably. The trade-off is that once you end up having to leave those frameworks, you have a pretty big learning curve to the baseline OS frameworks.&lt;/p&gt;

&lt;p&gt;From my perspective, in Artsy there are only 2-3 projects that are 5 years old (Artsy was roughly founded in 2010) and I know a few of those are &lt;a href=&quot;/blog/2017/04/14/artsy-technology-stack-2017/&quot;&gt;getting split into new apps&lt;/a&gt;. I&#39;m not sure if &lt;em&gt;we&lt;/em&gt; need to be looking &lt;em&gt;that far&lt;/em&gt; ahead. Our keystone &lt;a href=&quot;https://github.com/artsy/eigen&quot;&gt;iOS app, Eigen&lt;/a&gt; was started in 2013, and has already gone through 2 complete internal transformations as our requirements and opportunities change. It&#39;s very feasible that in 4 years we&#39;ll be at a very different place again. We choose to not turn down something that so drastically improves our developer and speed for end users for that risk.&lt;/p&gt;

&lt;p&gt;That said, Facebook indeed seem to be really happy with React, and React Native - making this question a useful hypothetical. Facebook are moving more big projects to use it internally, and there is a great discussion on how that is ongoing in &lt;a href=&quot;https://www.youtube.com/watch?v=cSUxHv-kH7w&amp;amp;list=PLb0IAmt7-GS0kj3saZuh4vzfldxEdH5RH&amp;amp;index=2&quot;&gt;this React Conf keynote from Jing Chen&lt;/a&gt;.&lt;/p&gt;

&lt;a name=&quot;Performance&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Performance&lt;/h2&gt;

&lt;p&gt;Your app is now running a lot of its code in JavaScript, isn&#39;t that slower? It&#39;s definitely true that your JavaScript will not be as fast as Objective-C or Swift. We haven&#39;t benchmarked our before/after view controllers because it&#39;s not a fair comparison, we switched &lt;a href=&quot;/blog/2016/06/19/graphql-for-mobile/&quot;&gt;from REST to GrahpQL&lt;/a&gt; at the same time. Our networking time was reduced so drastically, that it&#39;s hard to talk about the JS vs native performance.&lt;/p&gt;

&lt;p&gt;However there are a few advantages to running your app in JavaScript:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;There is no main thread, so you cannot block the UIKit UI thread&lt;/li&gt;
&lt;li&gt;There is no need to recreate JSON into native representations&lt;/li&gt;
&lt;li&gt;A lot of the hard work in React Native (layout, view manipulation) is done natively and in its own off-main thread&lt;/li&gt;
&lt;li&gt;For critical code, you can move to native, we did this for our &lt;a href=&quot;https://github.com/artsy/emission/commit/a404ccf1519ec79fc0bfadf6e572d990caa0a9ec&quot;&gt;image thumbnails&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One place that doesn&#39;t feel good writing in JavaScript is scroll events. This code has to generally be performance critical. This affects you when you want to have fancy transitions in your view controllers, however the animations API uses native code and with some careful consideration it&#39;s very feasible to re-write those scroll events into a declarative API.&lt;/p&gt;

&lt;p&gt;Sometimes you can look for better abstractions in React Native, the new &lt;a href=&quot;https://facebook.github.io/react-native/docs/listview.html&quot;&gt;ListView&lt;/a&gt; component provides quite a lot of the behavior you might want to use scroll events for, other times you may want to outright create a native view and then expose that as a component.&lt;/p&gt;

&lt;p&gt;We found that the majority of our view controllers do a lot of work on init, then generally don&#39;t do any more heavy lifting. So aside from our custom image thumbnails, we&#39;ve not hit a point where we&#39;ve had to move any code to be native in a year and a half.&lt;/p&gt;

&lt;a name=&quot;Facebook.patent.clause&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Facebook patent clause&lt;/h2&gt;

&lt;p&gt;This has come up a few times in discussion, Facebook have a bit of a custom license for their open source. Back in 2015, they made changes to the license that makes this no problem for everyone but patent trolls. You can find a bunch of resources for further reading &lt;a href=&quot;https://gist.github.com/gaearon/df0c4025e67399af72786d7ac7c819cc&quot;&gt;on this gist&lt;/a&gt;.&lt;/p&gt;

&lt;a name=&quot;React.Dependencies&quot;&gt;&lt;/a&gt;
&lt;h2&gt;React Dependencies&lt;/h2&gt;

&lt;p&gt;This comes up in every post we make on React Native, because it&#39;s always worth mentioning. React Native has &lt;a href=&quot;https://www.npmjs.com/package/react-native&quot;&gt;51 dependencies&lt;/a&gt;, which when resolved comes up to &lt;a href=&quot;https://libraries.io/npm/react-native/0.46.0-rc.2/tree&quot;&gt;around ~650 dependent&lt;/a&gt; projects. This is a &lt;em&gt;lot&lt;/em&gt; of dependencies. Remember that the JavaScript ecosystem does not have the &lt;a href=&quot;https://developer.apple.com/documentation/foundation&quot;&gt;equivalent of Foundation&lt;/a&gt;, and so to create a standard library, you use dependencies.&lt;/p&gt;

&lt;p&gt;A dependency can be as small as &lt;a href=&quot;https://yarnpkg.com/en/packages?q=lodash-a&amp;amp;p=1&quot;&gt;a single function&lt;/a&gt;, or as fully featured as React Native. So it doesn&#39;t really help to know the number in terms of anything other than &quot;it&#39;s a lot&quot;. In this case, it is just the culture of JavaScript and node to work in this fashion. It&#39;s like if you had to ship your version of Foundation and Cocoa with your app, instead of relying on the ones built into the OS. First you&#39;d have to pay the &lt;a href=&quot;https://twitter.com/mikeal/status/874711319412330496&quot;&gt;memory and load time&lt;/a&gt; price for it in your app, and then you have a bazillion dependencies you don&#39;t need like iAd or SpriteKit.&lt;/p&gt;

&lt;p&gt;These unused dependencies &lt;a href=&quot;https://rollupjs.org&quot;&gt;can be removed at deploy time&lt;/a&gt;, but React Native is not at this point yet.&lt;/p&gt;

&lt;a name=&quot;Places.where.React.Native.hasn.t.fit.for.us&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Places where React Native hasn&#39;t fit for us&lt;/h2&gt;

&lt;p&gt;My first draft had notes on some of our mobile apps where we thought it might not fit. After some discussion, we changed our mind. So then our answer: Nowhere.&lt;/p&gt;

&lt;p&gt;Note though, &lt;em&gt;the types of apps we create are exclusively API driven, with a unique visual style which totally covers the exposed UI surface. React Native is a great fit for this kind of app&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Our main app Eigen, is a &lt;code&gt;UIViewController&lt;/code&gt; browser, and React Native components are just one type of &lt;code&gt;UIViewController&lt;/code&gt; that can be browsed. Nearly every &lt;code&gt;UIViewController&lt;/code&gt; is the representation of an API endpoint, so React Native + &lt;a href=&quot;https://facebook.github.io/relay/&quot;&gt;Relay&lt;/a&gt; is a great match.&lt;/p&gt;

&lt;p&gt;I used to say that &lt;a href=&quot;http://artsy.github.io/blog/2014/11/13/eidolon-retrospective/&quot;&gt;our Kiosk app, Eidolon&lt;/a&gt;, might not be a good fit because of its reliance on handling a credit-card reader and that the app was good fit for being a storyboard-driven app. However, I&#39;m not so sure about this anymore.&lt;/p&gt;

&lt;p&gt;The project &lt;a href=&quot;https://storybook.js.org&quot;&gt;React Storybooks&lt;/a&gt; is not a direct replacement for storyboards, but as a live-programming/prototyping environment it&#39;s üëç. The credit-card reader is already wrapped into a Reactive paradigm, going one step further and making it a JavaScript EventEmitter isn&#39;t a big-jump.&lt;/p&gt;

&lt;p&gt;Our tvOS app Emergence could probably be re-written in a week at this point. Is it worth a re-write? No. If I had to write it from scratch, would I use React Native? Probably, but it would depend on how stable tvOS support feels.&lt;/p&gt;

&lt;p&gt;Our oldest app, Energy, is an app for keeping your portfolio of artworks with you at all times. Again, API -&gt; UI. It&#39;s an app which currently has a lot of demands on running offline. This is the only part that used to make me feel a bit unsure what that could look like with respect to moving the interface to React Native. However, changes to the &lt;a href=&quot;https://facebook.github.io/relay/&quot;&gt;Relay ecosystem&lt;/a&gt; which could allow us to create a simple Core Data backend, have reduced those worries.&lt;/p&gt;

&lt;a name=&quot;When.to.choose.React.Native.&quot;&gt;&lt;/a&gt;
&lt;h2&gt;When to choose React Native?&lt;/h2&gt;

&lt;p&gt;React Native provides a cross-platform API, and so it can fall into a watered down version of the API it abstracts. This means that it can be a bit more work than normal to use obviously iOS-specific features like &lt;code&gt;ARKit&lt;/code&gt;, &lt;code&gt;UIUserActivity&lt;/code&gt;, &lt;code&gt;CSSearchableIndex&lt;/code&gt; or &lt;code&gt;UIUserNotification&lt;/code&gt;s.&lt;/p&gt;

&lt;p&gt;I say more work, because you definitely can still use them, but that transitions between your React code and your native code will require a bit more work than had you always been writing it natively.&lt;/p&gt;

&lt;p&gt;That&#39;s not enough of a downside to contrast against:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A &lt;em&gt;significantly&lt;/em&gt; better way to handle state and user-interfaces&lt;/li&gt;
&lt;li&gt;The potential to write code that is cross-platform, and also share ideas with the web&lt;/li&gt;
&lt;li&gt;An open development environment that respects your time&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Especially when there is an Xcode project which you can use to do whatever you want with, you just need to learn how to jump back and forth between the two worlds.&lt;/p&gt;

&lt;p&gt;React Native is a great fit for apps that:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Are driven by an API, or an obvious state-store&lt;/li&gt;
&lt;li&gt;Want to have a unique look and feel&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Here&#39;s the final thing. When React Native was proposed as an option for us, the majority of our mobile dev team were not exactly excited at the prospect of using it. As we grew to understand the positive changes it was bringing for us, and our users, I was really happy that &lt;a href=&quot;http://twitter.com/alloy&quot;&gt;Eloy&lt;/a&gt; was willing to say &lt;em&gt;&quot;I think this could work.&quot;&lt;/em&gt; Ash&#39;s &lt;a href=&quot;https://ashfurrow.com/blog/swift-vs-react-native-feels/&quot;&gt;experience feels similar&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It&#39;s less risky now, but it&#39;s obviously a big dependency inside your app. Ideally, someone in your team should be able to feel comfortable reading, and potentially fixing code inside React Native for the platforms you ship.&lt;/p&gt;

&lt;a name=&quot;Integrating.into.an.Existing.app&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Integrating into an Existing app&lt;/h2&gt;

&lt;p&gt;If you&#39;re thinking of adding React Native to an existing app, first read &lt;a href=&quot;/blog/2016/08/24/On-Emission/&quot;&gt;on emission&lt;/a&gt;. Our usage of React Native is that it offers a series of components which are consumed by our app as a CocoaPod. This CocoaPods exposes &lt;code&gt;UIViewController&lt;/code&gt;s which can be used anywhere inside the app. This is the probably same pattern Airbnb, and Facebook use.&lt;/p&gt;

&lt;p&gt;After you&#39;ve read post, check out AirBnB&#39;s experiences &lt;a href=&quot;https://www.youtube.com/watch?v=tWitQoPgs8w&quot;&gt;in this video&lt;/a&gt; and Facebook&#39;s &lt;a href=&quot;https://www.youtube.com/watch?v=cSUxHv-kH7w&amp;amp;list=PLb0IAmt7-GS0kj3saZuh4vzfldxEdH5RH&amp;amp;index=2&quot;&gt;in this video&lt;/a&gt;.&lt;/p&gt;

&lt;a name=&quot;Greenfield&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Greenfield&lt;/h2&gt;

&lt;p&gt;I&#39;d recommend to start with a CRNA app, it&#39;s a good starting point. I would feel safe that &lt;a href=&quot;https://github.com/react-community/create-react-native-app/blob/master/EJECTING.md&quot;&gt;you can eject&lt;/a&gt; out of the environment provided when the app becomes complex enough to warrant native code.&lt;/p&gt;

&lt;a name=&quot;Wrap-up&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Wrap-up&lt;/h1&gt;

&lt;p&gt;This is the right place for a big call to action, where I declare that React Native is the future for all development and that it fixes all problems. I&#39;m not going to do that. I think React Native is definitely the right choice for our team, and there are many apps that could have been created faster and cheaper by using React Native.&lt;/p&gt;

&lt;p&gt;It&#39;s safe to say we all were initially put off by JavaScript, but TypeScript has grown to be my favourite language, knocking Ruby off that pedestal. &lt;a href=&quot;https://bugs.ruby-lang.org/issues/9999&quot;&gt;There&#39;s potential that could change&lt;/a&gt; but we can only live in the present.&lt;/p&gt;

&lt;p&gt;For us, React Native is a well thought out library, that can really help build better products when you understand the right way to apply it. It can help you be cross-platform on mobile, but also cross-platform with the web. For example, our React Native project has a sibling project on the web with the &lt;a href=&quot;https://github.com/artsy/reaction&quot;&gt;exact same setup&lt;/a&gt;, so any improvements in one move to the other. Which was unimaginable 2 years ago. We can truly consider sharing logic and ideas with the web.&lt;/p&gt;

&lt;p&gt;If you&#39;re considering a new app, or a grand re-write, React Native should be considered as one of your options.&lt;/p&gt;
</description>
        <pubDate>Thu, 06 Jul 2017 00:00:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/07/06/React-Native-for-iOS-devs/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/07/06/React-Native-for-iOS-devs/</guid>
        
        
        <category>emission</category>
        
        <category>javascript</category>
        
        <category>react</category>
        
        <category>react-native</category>
        
        <category>reaction</category>
        
        <category>technology</category>
        
      </item>
    
      <item>
        <title>Danger</title>
        <description>&lt;p&gt;Danger came out of two needs. One from the needs of a growing dev team working together full-time, and the other from the needs of a completely asymmetric large Open Source project.&lt;/p&gt;

&lt;p&gt;A work environment dev team is a complex place. You naturally grow, and to grow safely you add process. Process is a mixed bag, it&#39;s a net benefit at the trade-off of individual&#39;s time vs team cohesion. You want to grow your team guided by smart applications of process.&lt;/p&gt;

&lt;p&gt;On the other hand, working on a large open source project, it&#39;s easy to feel overwhelmed at the amount of work that needs to get done on a daily basis. The growth of your OSS team probably doesn&#39;t tie to the amount of work that needs to be done. Especially if you&#39;re like me, and you don&#39;t want to be maintaining OSS as a 2nd full-time job.&lt;/p&gt;

&lt;p&gt;So what do you do? Well in a work environment you don&#39;t really have a choice, as a team you hold each other to the rules that you set. In OSS, you sacrifice your spare time or you can find time at work, you could stop or you could burn out.&lt;/p&gt;

&lt;p&gt;And this is the environment in which the idea of Danger was incubated.&lt;/p&gt;

&lt;p&gt;Today mark version 1.0 of the second version of Danger. I&#39;m going to cover what they are, how they continue to grow and what I see their trajectory as.&lt;/p&gt;

&lt;!-- more --&gt;


&lt;a name=&quot;Why.&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Why?&lt;/h1&gt;

&lt;p&gt;Danger came from a need to customise the GitHub workflow for pull requests. In a work context, we wanted to add process like CHANGELOGs and be more thorough about testing. In Open Source, we needed to stop asking the same things to drive-by contributors. Their patches are valuable for sure, but asking for the same changes each time gets tiring. We want to work at a higher level of abstraction.&lt;/p&gt;

&lt;p&gt;In both cases you want a way to give instant feedback for things that are &quot;Unit Tests have failed&quot; or &quot;Code could not compile&quot;. However, it&#39;s hard to give feedback that says &quot;You have not added a CHANGELOG entry in the right format.&quot;&lt;/p&gt;

&lt;p&gt;Typically CI would only provide a binary: true or false response to the changes for review. We want a more shades of grey.&lt;/p&gt;

&lt;a name=&quot;What.does.Danger.do.&quot;&gt;&lt;/a&gt;
&lt;h2&gt;What does Danger do?&lt;/h2&gt;

&lt;p&gt;Danger acts as a way of creating unit tests at code review level. It gives you the ability to write tests that say: &quot;has this file changed?&quot;, &quot;does the contents of new files include this string?&quot;, &quot;does the build log include a warning we know is bad news?&quot; then the results of those tests are moved back into the place you&#39;re talking about the code.&lt;/p&gt;

&lt;p&gt;To do this, you need to be able to create your own rules. Every team has different dynamics, and while it makes sense to offer a set of a set of standard rules that can work across a lot of projects - I&#39;m pretty sure that the needs of the Artsy engineering team is different from the needs of your team.&lt;/p&gt;

&lt;p&gt;Danger runs your code, and provides a set of easy to use APIs for you to build these useful culture rules. You write your rules in code, we call these files Dangerfiles. Similar to how a testing framework would give a set of expectations. The general gist is Danger provides access to:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Changes from Git&lt;/li&gt;
&lt;li&gt;Changes from GitHub/GitLab/BitBucket&lt;/li&gt;
&lt;li&gt;Interacting with Danger&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;By making per-project rules with these APIs, you can cover most rote tasks involved in code review. To make it easy for anyone to run Danger on every pull request, Danger was made to run during continuous integration.&lt;/p&gt;

&lt;a name=&quot;OK..so..2.versions.of.Danger..&quot;&gt;&lt;/a&gt;
&lt;h1&gt;OK, so &quot;2 versions of Danger&quot;?&lt;/h1&gt;

&lt;p&gt;I first implemented Danger in Ruby. Ruby is a great language for building terminal apps, in the iOS community it&#39;s the language in which the largest OSS projects are built in. So, as someone used to building apps in that space, it wasn&#39;t really a debate what language to work with.&lt;/p&gt;

&lt;p&gt;The Ruby build of Danger is now at 5.x with almost 100 releases, it&#39;s a solid exploration into code review automation. Ultimately though, I started to feel three main pain-points:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;At Artsy, we moved our mobile team to React Native, and other teams were also consolidating on JavaScript everywhere. It felt weird using a Ruby inside a strictly JS only context.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Trying to re-create the environment of a PR was tricky from inside the CI. For example most providers are good at about saving on space and bandwidth during a run, and Danger often has to ruin that in order to replicate the PR locally.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;I wanted to explore server-side Dangerfiles. I wouldn&#39;t feel comfortable hosting a server that allows anyone to run their own Ruby code. Ruby isn&#39;t built with sandboxing in mind.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;a name=&quot;JavaScript&quot;&gt;&lt;/a&gt;
&lt;h2&gt;JavaScript&lt;/h2&gt;

&lt;p&gt;First I explored the idea of having JavaScript based Dangerfiles inside the Ruby version of Danger. I did this by &lt;a href=&quot;https://github.com/danger/danger/pull/422&quot;&gt;bridging Danger&#39;s Ruby objects into a JavaScript context&lt;/a&gt; and allowing bi-directional communication between the two. This handled some of the immediate needs, but proved inadequate when working with JavaScript&#39;s simple system library and it ignored all other JavaScript tooling.&lt;/p&gt;

&lt;p&gt;After enough time, I came to the conclusion that realistically, to use JavaScript properly, you need node modules and npm.&lt;/p&gt;

&lt;p&gt;So 10 months ago I decided it was worth starting from scratch and re-created Danger in JavaScript. I had time to consider what I would do differently, and this time I added one key additional restraints on the system: Data can only come from an API.&lt;/p&gt;

&lt;p&gt;This constraint negates one of the key problems with running running a Dangerfile on a server - having to have a copy of the code and the PR&#39;s environment.&lt;/p&gt;

&lt;p&gt;In addition, JavaScript has a much simpler model for evaluating, importing and exporting code and so whitelisting modules and functions can be feasible for a hosted version of Danger.&lt;/p&gt;

&lt;center&gt;&lt;img src =&quot;/images/danger/danger.png&quot; style=&quot;width:50%&quot;&gt;&lt;/center&gt;


&lt;a name=&quot;L1.0.is.my.middle.name&quot;&gt;&lt;/a&gt;
&lt;h1&gt;1.0 is my middle name&lt;/h1&gt;

&lt;p&gt;Any software project used in production should probably be 1.0, but in addition to production use a library needs documentation to be 1.0.&lt;/p&gt;

&lt;p&gt;Calling Danger production ready means doing the entire &lt;a href=&quot;http://artsy.github.io/blog/2016/07/03/handling-big-projects/&quot;&gt;Defensive OSS&lt;/a&gt; process: Documentation, Guides, API Reference, Website and Branding.&lt;/p&gt;

&lt;p&gt;Once each version of Danger had started to mature to a point that the user-facing aspect stopped changing I started focusing on the documentation engine and website. In both cases, a considerable amount of documentation is generated from the source code of Danger. I&#39;m a big fan of keeping that inside the source code and building documentation sites which import it directly.&lt;/p&gt;

&lt;a name=&quot;So.what.can.I.do.with.Danger.&quot;&gt;&lt;/a&gt;
&lt;h1&gt;So what can I do with Danger?&lt;/h1&gt;

&lt;p&gt;In one way this is a bit like asking, so what can I test with unit tests? Anything, within the scope of: the PR, build artifacts and introspecting the codebase.&lt;/p&gt;

&lt;p&gt;I&#39;ll cover a quick API overview, then talk about how you can work with these:&lt;/p&gt;

&lt;a name=&quot;Git&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Git&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;What files have been added, removed or changed.&lt;/li&gt;
&lt;li&gt;Changes specific to a file.&lt;/li&gt;
&lt;li&gt;Looking into Commits.&lt;/li&gt;
&lt;li&gt;Exploring the Diff.&lt;/li&gt;
&lt;/ul&gt;


&lt;a name=&quot;GitHub...GitLab...BitBucket&quot;&gt;&lt;/a&gt;
&lt;h3&gt;GitHub / GitLab / BitBucket&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Access to the PR&#39;s JSON representation.&lt;/li&gt;
&lt;li&gt;Consistent access for PR body, title, author across all platforms.&lt;/li&gt;
&lt;li&gt;Util functions for linking to files.&lt;/li&gt;
&lt;/ul&gt;


&lt;a name=&quot;Danger&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Danger&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Handle running other Dangerfiles.&lt;/li&gt;
&lt;li&gt;Handles plugin management.&lt;/li&gt;
&lt;li&gt;Provides a set of utility functions that would often get used.&lt;/li&gt;
&lt;/ul&gt;


&lt;a name=&quot;Messaging&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Messaging&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Leave warnings, messages and markdown comments.&lt;/li&gt;
&lt;li&gt;Leave errors, marking the build as failed.&lt;/li&gt;
&lt;li&gt;Post any of the above of the above inside a file.&lt;/li&gt;
&lt;li&gt;Create a GitHub review, and use the above messaging.&lt;/li&gt;
&lt;/ul&gt;


&lt;a name=&quot;Plugins&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Plugins&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;Infrastructure for shared rules.&lt;/li&gt;
&lt;li&gt;Opens up the ability to validate tricky things with an easy API.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The API differs between the JS and Ruby version, not drastically - but there are no plugins for Danger JS yet. That&#39;s still a bit away.&lt;/p&gt;

&lt;a name=&quot;OK..got.it.&quot;&gt;&lt;/a&gt;
&lt;h2&gt;OK, got it.&lt;/h2&gt;

&lt;p&gt;Let&#39;s cover a few examples of the kind of tests can you write.&lt;/p&gt;

&lt;a name=&quot;Checking.for.changes.to.a.specific.file&quot;&gt;&lt;/a&gt;
&lt;h4&gt;Checking for changes to a specific file&lt;/h4&gt;

&lt;p&gt;Checking for a CHANGELOG. This was the first rule imagined for Danger, I add it to every project.&lt;/p&gt;

&lt;p&gt;The first implementation of this rule can just be a check if the file &lt;code&gt;CHANGELOG.md&lt;/code&gt; is modified in any PR, that can then be
revised to also check whether there are git changes related to your app. Then documentation, README, tooling updates
don&#39;t require an entry. We also check if the PR title says &quot;trivial&quot; and skip the CHANGELOG check.&lt;/p&gt;

&lt;p&gt;If you&#39;re interested in standardizing on the &lt;a href=&quot;http://keepachangelog.com/en/0.3.0/&quot;&gt;keepachangelog.com&lt;/a&gt; format there is &lt;a href=&quot;https://github.com/dblock/danger-changelog&quot;&gt;danger-changelog&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Some other examples around this is pinging specific people when a file has changed, or failing if a file that&#39;s never meant
to be modified is changed, warning about potential semantic version updates for changes to specific files.&lt;/p&gt;

&lt;a name=&quot;Checking.the.results.of.command-line.tools&quot;&gt;&lt;/a&gt;
&lt;h4&gt;Checking the results of command-line tools&lt;/h4&gt;

&lt;p&gt;The Artsy developer blog runs both a spell checker, and a prose linter. These report back on files added or
modified during the PR. As someone known for writing loose and quick, having a machine provide some automatic feedback
makes it easy to not waste my reviewers time.&lt;/p&gt;

&lt;p&gt;This is done by the &lt;a href=&quot;https://github.com/dbgrandi/danger-prose&quot;&gt;danger-prose&lt;/a&gt; plugin, which wraps both an &lt;a href=&quot;https://github.com/lukeapage/node-markdown-spellcheck&quot;&gt;npm module&lt;/a&gt; and a &lt;a href=&quot;https://github.com/amperser/proselint/&quot;&gt;python egg&lt;/a&gt;.
The plugin handles installing and running the CLI, then converts the output into markdown for github.&lt;/p&gt;

&lt;a name=&quot;Handling.build.artifacts&quot;&gt;&lt;/a&gt;
&lt;h4&gt;Handling build artifacts&lt;/h4&gt;

&lt;p&gt;If Danger runs after the build process, you can read build logs to provide better feedback. This can range from taking
the results of a test run and posting what has failed (e.g. &lt;a href=&quot;https://github.com/orta/danger-junit&quot;&gt;danger-junit&lt;/a&gt;), to finding specific strings inside
build logs and highlighting them.&lt;/p&gt;

&lt;p&gt;In our native iOS app, when a developer accidentally adds code which accesses the network in a test. That is logged out
during the build. Then later, danger will read the logs to find any mentions of this and post it in the comment.&lt;/p&gt;

&lt;a name=&quot;PR.Metadata&quot;&gt;&lt;/a&gt;
&lt;h4&gt;PR Metadata&lt;/h4&gt;

&lt;p&gt;Every team&#39;s workflow is different, but it&#39;s pretty common to use a tool other than code review for keeping track of a project&#39;s momentum. You can use Danger to warn people that they haven&#39;t included a Trello, or JIRA ticket reference on
every PR.&lt;/p&gt;

&lt;p&gt;A similar approach could be to warn if someone is sending a PR to a branch other than the preferred branch. This works
well if you use the git-flow model for branches.&lt;/p&gt;

&lt;p&gt;We nearly always add a check to see if someone is assigned to a PR, and warn it it&#39;s unassigned in front-end projects.&lt;/p&gt;

&lt;a name=&quot;Using.the.platform.API&quot;&gt;&lt;/a&gt;
&lt;h4&gt;Using the platform API&lt;/h4&gt;

&lt;p&gt;There&#39;s no limits here, by using the API from your platform you can perform any sorts of checks. In the Danger repo
we use the GitHub API to note whether someone is in the Danger org, to remind the core team to invite them to the org
after submitting a PR.&lt;/p&gt;

&lt;a name=&quot;Introducing.Danger&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Introducing Danger&lt;/h2&gt;

&lt;p&gt;OK, maybe that&#39;s got you thinking &lt;em&gt;&quot;ah, I know a process I can automate&quot;&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;It can be easy to try and jump straight from no Dangerfile to a many-hundred lined complex set of cultural rules. I&#39;d advise against introducing a long list of rules for Danger all at once. In my experience, gradual integration works better. The entire team may have agreed on the changes upfront, but slower adoption has worked better for teams new to working with Danger.&lt;/p&gt;

&lt;p&gt;At Artsy we&#39;ve found that first just integrating Danger with a single simple rule (like checking for a CHANGELOG entry) then starting to introduce them piece-meal from different contributors has made it easier to go from &quot;Ah, we shouldn&#39;t do that again&quot; to &quot;Oh, we could make a Danger rule for that&quot; to &quot;Here&#39;s the PR&quot;.&lt;/p&gt;

&lt;a name=&quot;Which.Danger.should.I.use.&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Which Danger should I use?&lt;/h2&gt;

&lt;p&gt;This definitely depends on the project, there&#39;s a longer discussion &lt;a href=&quot;http://danger.systems/js/js-vs-ruby.html&quot;&gt;on the site&lt;/a&gt; too, but here&#39;s the main gist:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Danger Ruby&lt;/strong&gt; is more mature, has more features, a solid plugin eco-system and covers more platforms. It&#39;s in a great place and is unlikely to have breaking changes from this point onwards.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;Danger JS&lt;/strong&gt; has a bigger potential for growth, is &quot;stable enough&quot;, you can create plugins and will be able to do things that the Ruby version could not - eventually. Right now it only works with GitHub.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;a name=&quot;Onwards.and.Upwards&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Onwards and Upwards&lt;/h2&gt;

&lt;p&gt;With the JavaScript version of Danger in a great place ready for production, I can start more serious work on &lt;a href=&quot;https://github.com/danger/peril#peril&quot;&gt;Peril&lt;/a&gt;. Peril is a hosted web-service that runs Dangerfiles against GitHub events, see &lt;a href=&quot;https://github.com/danger/peril/blob/master/VISION.md&quot;&gt;the VISION.md&lt;/a&gt;. Those events span from a new user being created, to a new issue on a repo. Peril lets you run your own complex rules across an entire org. This can be a really powerful way to audit and improve entire-company culture.&lt;/p&gt;

&lt;p&gt;We started using Peril in Artsy &lt;a href=&quot;https://github.com/artsy/reaction-force/pull/184&quot;&gt;last week&lt;/a&gt;. So it&#39;s starting to become a thing internally. It&#39;ll be awesome to explore the idea of org-wide rules. I think we&#39;re starting with making sure we assign someone on a PR.&lt;/p&gt;

&lt;p&gt;So give Danger a shot, and if you&#39;re bold. give &lt;a href=&quot;https://github.com/danger/peril#peril&quot;&gt;Peril&lt;/a&gt; a shot.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;This post uses the CC license image from &lt;a href=&quot;https://twitter.com/CloudyConway/status/880426417024114688&quot;&gt;this tweet&lt;/a&gt; with some changes to make it fit with the design of the blog. Thanks &lt;a href=&quot;https://www.patreon.com/vexorian&quot;&gt;Vexorian&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Fri, 30 Jun 2017 00:00:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/06/30/danger-one-oh-again/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/06/30/danger-one-oh-again/</guid>
        
        
        <category>culture</category>
        
        <category>danger</category>
        
      </item>
    
      <item>
        <title>Encrypting ActiveRecord Fields Without Downtime.</title>
        <description>&lt;p&gt;After examining the data stored in one of our high-throughput systems, we realized it might include sensitive user data. To reduce the number of people that are technically able to access the data and reduce the risks associated with a potential data theft, we decided to encrypt certain database fields.&lt;/p&gt;

&lt;a name=&quot;Our.Goal&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Our Goal&lt;/h1&gt;

&lt;p&gt;Encrypt sensitive fields without any downtime.&lt;/p&gt;

&lt;!-- more --&gt;


&lt;a name=&quot;Approach&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Approach&lt;/h1&gt;

&lt;p&gt;While we wanted to encrypt existing rows, new rows were constantly being added. In order to achieve zero downtown we have devised the following path:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Add new &lt;em&gt;encrypted&lt;/em&gt; fields to the database.&lt;/li&gt;
&lt;li&gt;Start populating new &lt;em&gt;encrypted&lt;/em&gt; fields with &lt;em&gt;encrypted&lt;/em&gt; values while still populating &lt;em&gt;un-encrypted&lt;/em&gt; fields.&lt;/li&gt;
&lt;li&gt;In the background, migrate existing records by populating their &lt;em&gt;encrypted&lt;/em&gt; fields.&lt;/li&gt;
&lt;li&gt;Refactor to use &lt;em&gt;encrypted&lt;/em&gt; fields.&lt;/li&gt;
&lt;li&gt;Drop &lt;em&gt;un-encrypted&lt;/em&gt; fields.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Each step above was relatively simple and was tested properly before moving to the next step.&lt;/p&gt;

&lt;a name=&quot;Choosing.an.Encryption.Library&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Choosing an Encryption Library&lt;/h2&gt;

&lt;p&gt;We looked at a few gems, mainly &lt;a href=&quot;https://github.com/attr-encrypted/attr_encrypted&quot;&gt;attr_encrypted&lt;/a&gt;, &lt;a href=&quot;https://github.com/jmazzi/crypt_keeper&quot;&gt;crypt_keeper&lt;/a&gt; and &lt;a href=&quot;https://github.com/rocketjob/symmetric-encryption&quot;&gt;symmetric-encryption&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;While all these libraries were reliable, we used &lt;a href=&quot;https://github.com/rocketjob/symmetric-encryption&quot;&gt;symmetric-encryption&lt;/a&gt;, based on its robust &lt;a href=&quot;https://rocketjob.github.io/symmetric-encryption/&quot;&gt;documentation&lt;/a&gt;, ease of use and easy integration with other libraries (in our case &lt;code&gt;ActiveRecord&lt;/code&gt;). It provides some useful &lt;a href=&quot;https://rocketjob.github.io/symmetric-encryption/rake_tasks.html&quot;&gt;Rake tasks&lt;/a&gt; for configurations inside/outside of Heroku. Overall &lt;code&gt;symmetric-encryption&lt;/code&gt; seemed really üîí .&lt;/p&gt;

&lt;a name=&quot;Configuration&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Configuration&lt;/h2&gt;

&lt;p&gt;The &lt;code&gt;config/symmetric-encryption.yml&lt;/code&gt; file is used to define what algorithm to use and where to find the related keys for different environments.&lt;/p&gt;

&lt;p&gt;Symmetric Encryption uses OpenSSL to encrypt and decrypt the data which means we are able to use any of the algorithms supported by OpenSSL. We used &lt;code&gt;aes-256-cbc&lt;/code&gt; which is also the recommended default algorithm.&lt;/p&gt;

&lt;p&gt;In order to create a new set of keys:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;bash&#39;&gt;&lt;span class=&#39;line&#39;&gt;rails generate symmetric_encryption:new_keys production
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Above command will create an encryption key and an Initialization Vector (&lt;a href=&quot;https://en.wikipedia.org/wiki/Initialization_vector&quot;&gt;IV&lt;/a&gt;). Generated key &lt;strong&gt;must not&lt;/strong&gt; be committed into source code. Depending on how your application is deployed, there are two approaches for storing this key. In both scenarios encryption keys are encrypted before storing on file/environment variable. Secret used for encrypting the encryption key itself can be committed into source code.&lt;/p&gt;

&lt;p&gt;To access sensitive data, a malicious party would require access to:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The database,&lt;/li&gt;
&lt;li&gt;Our source code,&lt;/li&gt;
&lt;li&gt;Encryption keys from files or configuration&lt;/li&gt;
&lt;/ul&gt;


&lt;a name=&quot;Outside.of.Heroku&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Outside of Heroku&lt;/h3&gt;

&lt;p&gt;Key can be stored in a file on disk outside of source code. We can use &lt;code&gt;key_filename&lt;/code&gt; in configuration &lt;code&gt;yml&lt;/code&gt; to point to this file. In this scenario we would use the operating system to limit access to key file.&lt;/p&gt;

&lt;p&gt;Here is a sample configuration file:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;21&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;22&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;23&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;24&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;25&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;26&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;27&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;28&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;29&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;30&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;31&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;32&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;33&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;34&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;35&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;yaml&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c1&quot;&gt;#config/symmetric_encryption.yml&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;production&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# Since the key to encrypt and decrypt with must NOT be stored along with the&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# source code, we only hold a RSA key that is used to unlock the file&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# containing the actual symmetric encryption key&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# Sample RSA Key, DO NOT use this RSA key, generate a new one using&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;#    openssl genrsa 2048&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;l-Scalar-Plain&quot;&gt;private_rsa_key&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p-Indicator&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;no&quot;&gt;-----BEGIN RSA PRIVATE KEY-----&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;no&quot;&gt;MIIEpAIBAAKCAQEAxIL9H/jYUGpA38v6PowRSRJEo3aNVXULNM....&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;no&quot;&gt;r1URaMAun2PfAB4g2N/kEZTExgeOGqXjFhvvjdzl97ux2cTyZhaTXg==&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;no&quot;&gt;-----END RSA PRIVATE KEY-----&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# List Symmetric Key files in the order of current / latest first&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;l-Scalar-Plain&quot;&gt;ciphers&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;     &lt;span class=&quot;p-Indicator&quot;&gt;-&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;# Filename containing Symmetric Encryption Key encrypted using the&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;# RSA public key derived from the private key above&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;l-Scalar-Plain&quot;&gt;key_filename&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;l-Scalar-Plain&quot;&gt;/etc/rails/.rails.key&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;l-Scalar-Plain&quot;&gt;iv_filename&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;l-Scalar-Plain&quot;&gt;/etc/rails/.rails.iv&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;# Encryption cipher_name&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;#   Recommended values:&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;#      aes-256-cbc&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;#         256 AES CBC Algorithm. Very strong&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;#         Ruby 1.8.7 MRI Approximately 100,000 encryptions or decryptions per second&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;#         JRuby 1.6.7 with Ruby 1.8.7 Approximately 22,000 encryptions or decryptions per second&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;#      aes-128-cbc&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;#         128 AES CBC Algorithm. Less strong.&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;#         Ruby 1.8.7 MRI Approximately 100,000 encryptions or decryptions per second&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;c1&quot;&gt;#         JRuby 1.6.7 with Ruby 1.8.7 Approximately 22,000 encryptions or decryptions per second&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;l-Scalar-Plain&quot;&gt;cipher_name&lt;/span&gt;&lt;span class=&quot;p-Indicator&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;l-Scalar-Plain&quot;&gt;aes-256-cbc&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;a name=&quot;On.Heroku&quot;&gt;&lt;/a&gt;
&lt;h3&gt;On Heroku&lt;/h3&gt;

&lt;p&gt;Since the filesystem on Heroku is &lt;a href=&quot;https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem&quot;&gt;ephemeral&lt;/a&gt;, &lt;code&gt;symmetric-encryption&lt;/code&gt; suggests to set encryption key as an environment variable. Configuration is same as above except we replace &lt;code&gt;key_filename&lt;/code&gt; with &lt;code&gt;encrypted_key: &quot;&amp;lt;%= ENV[&#39;PRODUCTION_ENCRYPTION_KEY1&#39;] %&amp;gt;&quot;&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;You can use the following rake task to generate a Heroku-specific configuration file:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;yaml&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;l-Scalar-Plain&quot;&gt;rails g symmetric_encryption:heroku_config&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;This creates a &lt;code&gt;config/symmetric-encryption.yml&lt;/code&gt; file and also outputs commands you can run to set the &lt;em&gt;encrypted&lt;/em&gt; encryption key on Heroku as an environment variable.&lt;/p&gt;

&lt;a name=&quot;ActiveRecord.Integration&quot;&gt;&lt;/a&gt;
&lt;h3&gt;ActiveRecord Integration&lt;/h3&gt;

&lt;p&gt;Symmetric Encryption provides a seamless integration with &lt;code&gt;ActiveRecord&lt;/code&gt;. We can use &lt;code&gt;attr_encrypted&lt;/code&gt; helper method to define &lt;em&gt;encrypted&lt;/em&gt; fields. Let&#39;s say we wanted to encrypt a &lt;code&gt;Note&lt;/code&gt; model that has &lt;code&gt;note&lt;/code&gt; and &lt;code&gt;subject&lt;/code&gt;. You can add the following to your &lt;code&gt;ActiveRecord&lt;/code&gt; model:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;ruby&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c1&quot;&gt;# app/models/note.rb&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;n&quot;&gt;attr_encrypted&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:note&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;n&quot;&gt;attr_encrypted&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:subject&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;This means whenever you set &lt;code&gt;note&lt;/code&gt; for this model &lt;code&gt;symmetric-encryption&lt;/code&gt; will set &lt;code&gt;encrypted_note&lt;/code&gt; field in the database. Whenever you retrieve an instance of this model, &lt;code&gt;symmetric-encryption&lt;/code&gt; will decrypt &lt;code&gt;encrypted_note&lt;/code&gt; field and you can access &lt;em&gt;decrypted&lt;/em&gt; value by just accessing &lt;code&gt;note&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;In our case we couldn&#39;t use this helper immediately. Using encrypted_attr would prevent us from directly accessing the existing, un-encrypted fields in our database (which is necessary through step 3 in our approach). To work around this, we started by adding a &lt;code&gt;before_validation&lt;/code&gt; callback to our model to set encrypted fields based on un-encrypted ones.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;ruby&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c1&quot;&gt;# app/models/note.rb&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;n&quot;&gt;before_validation&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:encrypt_notes_fields&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;encrypt_note_fields&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encrypted_note&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SymmetricEncryption&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encrypt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;note&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encrypted_subject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;SymmetricEncryption&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encrypt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;subject&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;In the above code &lt;code&gt;SymmetricEncryption.encrypt(note, true, true, :string)&lt;/code&gt; means encrypt &lt;code&gt;note&lt;/code&gt; field, use random IV(Initialization Vector), compress the string and also use string when decrypting.&lt;/p&gt;

&lt;p&gt;Once we got to the 4th step and stopped populating/reading un-encrypted fields we can easily switch above to&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;ruby&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;c1&quot;&gt;# app/models/note.rb&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;n&quot;&gt;attr_encrypted&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:note&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;n&quot;&gt;attr_encrypted&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:subject&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;a name=&quot;Query.encrypted.fields&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Query encrypted fields&lt;/h1&gt;

&lt;p&gt;Generally when we encrypt a field we can&#39;t do a partial query on the content of that field. On the other hand if we use the same IV each time we encrypt a value, we can do an exact match query. Using same IV means encrypting the same value always end up with the same encrypted string. If exact match query is not something you need, the recommended approach is to use random IV for each encryption.&lt;/p&gt;

&lt;a name=&quot;Conclusion&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;With this approach we were able to encrypt a database with ~1.5 million rows without any downtime in about a week.&lt;/p&gt;
</description>
        <pubDate>Tue, 30 May 2017 11:03:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/05/30/database-encryption/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/05/30/database-encryption/</guid>
        
        
        <category>database</category>
        
        <category>encryption</category>
        
        <category>security</category>
        
      </item>
    
      <item>
        <title>iOS Retrospectives</title>
        <description>&lt;p&gt;In the 1990s, Harvard researcher Amy Edmonson made the unexpected discovery that in hospitals, &lt;a href=&quot;https://www.researchgate.net/publication/250959492_Learning_from_Mistakes_Is_Easier_Said_Than_Done_Group_and_Organizational_Influences_on_the_Detection_and_Correction_of_Human_Error&quot;&gt;higher performing teams reported making more mistakes&lt;/a&gt;. This is unexpected because one would assume that &lt;em&gt;better&lt;/em&gt; performers would make &lt;em&gt;fewer&lt;/em&gt; mistakes. In fact, the number of mistakes isn&#39;t what distinguishes higher-performing teams, but rather it&#39;s their attitude towards discussing ‚Äì and learning from ‚Äì their failures.&lt;/p&gt;

&lt;p&gt;I&#39;ve spent the past eight months reading more about &lt;a href=&quot;https://en.wikipedia.org/wiki/Psychological_safety&quot;&gt;psychological safety&lt;/a&gt;: the shared belief that team members won&#39;t be punished for speaking up with mistakes or questions or ideas. As a result, I&#39;ve been trying to operationalize psychological safety on my own team, and part of that includes discussing and learning from our mistakes. At Artsy, we candidly discuss site outages or production bugs on the web, but haven&#39;t historically been great at communicating about iOS problems.&lt;/p&gt;

&lt;p&gt;I want to start doing more retrospectives after things go wrong. So this week, I held my first iOS retrospective.&lt;/p&gt;

&lt;!-- more --&gt;


&lt;p&gt;It consisted of three parts:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;Preparation.&lt;/li&gt;
&lt;li&gt;A meeting.&lt;/li&gt;
&lt;li&gt;Follow-up.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Let&#39;s discuss each one. And remember: the most important part of a bug retrospective is to &lt;em&gt;learn&lt;/em&gt;. Encourage others to ask questions, or propose ideas.&lt;/p&gt;

&lt;a name=&quot;Prep.Work&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Prep Work&lt;/h3&gt;

&lt;p&gt;Prep work involved adapting Artsy&#39;s &lt;a href=&quot;https://artsy.github.io/blog/2014/11/19/how-to-write-great-outage-post-mortems/&quot;&gt;site outage post-mortem&lt;/a&gt; for this less serious bug. I drafted a short document with the following information:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Summary&lt;/strong&gt;: A short paragraph about what happened, and a timeline of when the bug was reported, when it was first introduced, when it was fixed, and when the fix was submitted to the App Store. Include screenshots if available.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cause&lt;/strong&gt;: Technical details about the cause of the problem. Include code snippets if appropriate.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Resolution&lt;/strong&gt;: Technical details about the fix for the problem, including links to pull requests. The fix was one-line, so I included a git diff as well.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Post-Mortem&lt;/strong&gt;: A discussion of what contributed to the bug, and how can the team can avoid those problems in the future.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Remember, each section is frame around learning from what went wrong with the goal of preventing similar issues from happening in the future.&lt;/p&gt;

&lt;p&gt;The preparation took me about a half hour, but would have been faster if I had taken more notes earlier. The bug in question had taken place three weeks ago ‚Äì I wish I had held the retrospective earlier.&lt;/p&gt;

&lt;a name=&quot;Meeting&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Meeting&lt;/h3&gt;

&lt;p&gt;I invited our Auctions dev team to the meeting and our product manager, but I made it clear that everyone&#39;s attendence was optional. During the meeting, I went through the retrospective document I had prepared, answered some questions, and took some notes for further follow-up.&lt;/p&gt;

&lt;a name=&quot;Follow-up&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Follow-up&lt;/h3&gt;

&lt;p&gt;After the meeting, I addressed the follow-up items. In our case, this involved fixing a problem where our staging servers use data that&#39;s not reprepsentive of the data used in production. Additionally, we&#39;ve made changes to how we test certain scenarious in our iOS app.&lt;/p&gt;

&lt;p&gt;Finally, I shared the document with the wider team. In this case, it was the Auctions Operations team. As a developer, I want to empower my teammates to understand why software sometimes behaves unexpectedly.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;So when should you do a retrospective? The answer is &quot;probably more often than you do now.&quot; I know our team could benefit from more of them, and I think the Artsy Engineering team could too. I&#39;m not concerned about doing them too often ‚Äì I would rather that than not doing them enough.&lt;/p&gt;

&lt;p&gt;Remember that the benefits of a retrospective aren&#39;t limited to learning from a single mistake; retrospectives encourage a &lt;em&gt;culture&lt;/em&gt; of learning from mistakes, which (as Edmonson discovered in hospital settings) is far more valuable.&lt;/p&gt;
</description>
        <pubDate>Sat, 27 May 2017 00:00:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/05/27/ios-retrospectives/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/05/27/ios-retrospectives/</guid>
        
        
        <category>eigen</category>
        
        <category>ios</category>
        
      </item>
    
      <item>
        <title>Relay Mutations</title>
        <description>&lt;blockquote&gt;&lt;p&gt;Hey there everyone, it took us two years to &lt;a href=&quot;https://github.com/artsy/metaphysics/pull/583&quot;&gt;make our&lt;/a&gt; GraphQL implementation support any mutations. We opted to keep it read-only for quite a long time because we use GraphQL to consolidate multiple APIs, but as we start new projects as GraphQL + databases then understanding mutations becomes much more important.&lt;/p&gt;

&lt;p&gt;Last month, I talked with the team at &lt;a href=&quot;https://www.graph.cool/&quot;&gt;Graph.cool&lt;/a&gt; about having them talk through Relay mutations comprehensively as a guest post on the Artsy Engineering blog. So, I&#39;m really excited to introduce this great post on the topic by &lt;a href=&quot;http://twitter.com/nikolasburk&quot;&gt;Nikolas Burk&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;-- Orta&lt;/p&gt;&lt;/blockquote&gt;

&lt;a name=&quot;The.Magic.behind.Relay.Mutations&quot;&gt;&lt;/a&gt;
&lt;h1&gt;The Magic behind Relay Mutations&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://facebook.github.io/relay/&quot;&gt;Relay&lt;/a&gt; is a powerful GraphQL client for React and React Native applications. It was open sourced by Facebook alongside GraphQL in 2015 and is a great tool for supporting you with managing your app&#39;s data layer.&lt;/p&gt;

&lt;p&gt;In this post, we are going to explore how Relay mutations work by looking at a React Native app. The code can be found on &lt;a href=&quot;https://github.com/graphcool-examples/react-native-relay-pokedex-example&quot;&gt;GitHub&lt;/a&gt;. Our sample application is a simple &lt;em&gt;Pokedex&lt;/em&gt;, where users can manage their Pokemons.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://i.imgur.com/S21GfEo.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Note: We&#39;re going to assume a basic familiarity with GraphQL in this article. If you haven&#39;t heard of GraphQL before, the &lt;a href=&quot;www.graphql.org&quot;&gt;documentation&lt;/a&gt; and the &lt;a href=&quot;http://artsy.github.io/blog/2016/06/19/graphql-for-mobile/&quot;&gt;GraphQL for iOS Developers&lt;/a&gt; post are great places to start. If you&#39;re interested in learning more about Relay in general, head over to &lt;a href=&quot;www.learnrelay.org&quot;&gt;Learn Relay&lt;/a&gt; for a comprehensive tutorial.&lt;/p&gt;&lt;/blockquote&gt;

&lt;!-- more --&gt;


&lt;p&gt;If you want to run the example with your own GraphQL server, you can use &lt;a href=&quot;https://www.graph.cool/graphql-up/&quot;&gt;graphql-up&lt;/a&gt; to quickly spin one up yourself from within your browser. Simply click the pink button and follow the instructions on the website.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://www.graph.cool/graphql-up/new?source=https://raw.githubusercontent.com/graphcool-examples/react-native-relay-pokedex-example/master/pokedex.schema&quot;&gt;&lt;img src=&quot;http://static.graph.cool/images/graphql-up.svg&quot; alt=&quot;graphql-up&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;a name=&quot;Relay.-.A.brief.Overview&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Relay - A brief Overview&lt;/h2&gt;

&lt;p&gt;Relay is the most sophisticated GraphQL client available at the moment. Like GraphQL, it has been used and battle-tested internally by Facebook for many years before it was open sourced.&lt;/p&gt;

&lt;p&gt;Relay surely isn&#39;t the easiest framework to learn - but when used correctly, it takes care of managing large parts of your app&#39;s data layer in a consistent and reliable manner! It therefore is particularly well-suited for complex applications with lots of data interdependencies and provides outstanding longterm developer productivity.&lt;/p&gt;

&lt;a name=&quot;Declarative.API.and.Colocation&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Declarative API and Colocation&lt;/h3&gt;

&lt;p&gt;With Relay, React components specify their data requirements in a declarative fashion, making use of GraphQL &lt;em&gt;fragments&lt;/em&gt;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;A &lt;a href=&quot;https://learngraphql.com/basics/fragments&quot;&gt;GraphQL fragment&lt;/a&gt; is a selection of fields on a GraphQL type. You can use them to define &lt;em&gt;reusable sub-parts&lt;/em&gt; of queries or mutations.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Considering the &lt;code&gt;PokemonDetails&lt;/code&gt; view above, we need to display the Pokemon&#39;s name and image. The fragment that represents these data requirements looks as follows:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;&#39;&gt;&lt;span class=&#39;line&#39;&gt;fragment PokemonDetails on Node {
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  ... on Pokemon {
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    id
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    name
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    url
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  }
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Note that the &lt;code&gt;id&lt;/code&gt; is required so that Relay can identify the objects in the cache, so it&#39;s included in the payload as well (even if it&#39;s not displayed on the UI).&lt;/p&gt;

&lt;p&gt;These fragments are kept in the same file as the React component, so UI and data requirements are &lt;em&gt;colocated&lt;/em&gt;. Relay then uses a &lt;a href=&quot;https://facebook.github.io/react/docs/higher-order-components.html&quot;&gt;higher-order component&lt;/a&gt; called &lt;a href=&quot;https://facebook.github.io/relay/docs/guides-containers.html#content&quot;&gt;&lt;code&gt;Relay.Container&lt;/code&gt;&lt;/a&gt;, to wrap the component along with its data requirements. From this point, the developer doesn&#39;t have to worry about the data any more! It will be fetched behind the scenes and is made available to the component via its props.&lt;/p&gt;

&lt;a name=&quot;Build-time.Schema.Validation&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Build-time Schema Validation&lt;/h3&gt;

&lt;p&gt;Another great feature of Relay that ensures developer productivity is  &lt;em&gt;schema validation&lt;/em&gt;. At build time, Relay checks your GraphQL queries, fragments and mutations to ensure their compatibility with the GraphQL API. It is thus able to catch any typos or other schema-related errors before you run (or even worse: deploy) your app, saving your users from unpleasant experiences. Note that the schema validation step requires a &lt;a href=&quot;https://facebook.github.io/relay/docs/guides-babel-plugin.html&quot;&gt;Babel Relay Plugin&lt;/a&gt;.&lt;/p&gt;

&lt;a name=&quot;Mutations.in.Relay&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Mutations in Relay&lt;/h2&gt;

&lt;a name=&quot;GraphQL.Recap&quot;&gt;&lt;/a&gt;
&lt;h3&gt;GraphQL Recap&lt;/h3&gt;

&lt;p&gt;In GraphQL, a &lt;em&gt;mutation&lt;/em&gt; is the only way to create, update or delete data on the server - they effectively are the GraphQL abstraction for &lt;em&gt;changing state&lt;/em&gt; in your backend.&lt;/p&gt;

&lt;p&gt;As an example, creating a new Pokemon in our sample app uses the following mutation:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;&#39;&gt;&lt;span class=&#39;line&#39;&gt;mutation CreatePokemon($name: String!, $url: String!) {
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  createPokemon(input: {
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    name: $name,
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    url: $url
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  }) {
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    # payload of the mutation (will be returned by the server)
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    pokemon {
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      id 
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    }
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  }
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Notice that mutations, similar to queries, also require a &lt;em&gt;payload&lt;/em&gt; to be specified. This payload represents the information that we&#39;d like to have returned from the server after the mutation was performed. In the above example, we&#39;re asking for the &lt;code&gt;id&lt;/code&gt; of the new &lt;code&gt;pokemon&lt;/code&gt;.&lt;/p&gt;

&lt;a name=&quot;The.Magic:.Declarative.Mutations.....&quot;&gt;&lt;/a&gt;
&lt;h3&gt;The Magic: Declarative Mutations üîÆ&lt;/h3&gt;

&lt;p&gt;Relay doesn&#39;t (yet) give the developer the ability to manually modify the data that it stores internally. Instead, with every change, it requires a declarative &lt;em&gt;description&lt;/em&gt; of how the local cache should be updated after the change happened in the form of a &lt;a href=&quot;https://facebook.github.io/relay/docs/guides-mutations.html#content&quot;&gt;mutation&lt;/a&gt; and then takes care of the update under the hood.&lt;/p&gt;

&lt;p&gt;The description is provided by subclassing &lt;code&gt;Relay.Mutation&lt;/code&gt; and implementing (at least) four methods that help Relay to properly update the local store:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;getMutation()&lt;/code&gt;: the name of the mutation (from the GraphQL schema)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getVariables()&lt;/code&gt;: the input variables for the mutation&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getFatQuery()&lt;/code&gt;: a GraphQL query that fetches all data that potentially was changed due to the mutation&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getConfigs()&lt;/code&gt;: a precise specification how the mutation should be incorporated into the cache&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;In the following, we&#39;ll take a deeper look at the different kinds of mutations in our sample app, which are used for creating, updating and deleting Pokemons.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Note: We&#39;re using the &lt;a href=&quot;https://www.graph.cool/docs/reference/relay-api/overview-aizoong9ah&quot;&gt;Graphcool Relay API&lt;/a&gt; for this example. If you used &lt;code&gt;graphql-up&lt;/code&gt; to create your own backend, you can explore the API by pasting the endpoint for the Relay API into the address bar of a browser.&lt;/p&gt;&lt;/blockquote&gt;

&lt;a name=&quot;Creating.a.new.Pokemon:..code.RANGE_ADD..code.&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Creating a new Pokemon: &lt;code&gt;RANGE_ADD&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;http://i.imgur.com/yskx5KU.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Let&#39;s walk through the different methods and understand what information we have to provide so that Relay can successfully merge the newly created Pokemon into its store.&lt;/p&gt;

&lt;p&gt;The first two methods, &lt;code&gt;getMutation()&lt;/code&gt; and &lt;code&gt;getVariables()&lt;/code&gt; are relatively obvious and can be retrieved directly from the documentation where the API is described.&lt;/p&gt;

&lt;p&gt;The implementations look as follows:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getMutation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Relay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;QL&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mutation&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPokemon&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getVariables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Notice that the &lt;code&gt;props&lt;/code&gt; of a &lt;code&gt;Relay.Mutation&lt;/code&gt; are passed through its constructor. Here, we simply provide the &lt;code&gt;name&lt;/code&gt; and the &lt;code&gt;url&lt;/code&gt; of the Pokemon that is to be created.&lt;/p&gt;

&lt;p&gt;Now, on to the interesting parts. In &lt;code&gt;getFatQuery()&lt;/code&gt;, we need to specify the parts that might change due to the mutation. Here, we simply specify the &lt;code&gt;viewer&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getFatQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Relay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;QL&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;fragment&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CreatePokemonPayload&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;nx&quot;&gt;viewer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;nx&quot;&gt;allPokemons&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Notice that &lt;em&gt;every&lt;/em&gt; subfield of &lt;code&gt;allPokemons&lt;/code&gt; is also automatically included with this approach. In our example app, &lt;code&gt;allPokemons&lt;/code&gt; is the only point we expect to change after our mutation is performed.&lt;/p&gt;

&lt;p&gt;Finally, in &lt;code&gt;getConfigs()&lt;/code&gt;, we need to specify the &lt;a href=&quot;https://facebook.github.io/relay/docs/guides-mutations.html#mutator-configuration&quot;&gt;mutator configurations&lt;/a&gt;, telling Relay exactly how the new data should be incorporated into the cache. This is where the magic happens:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getConfigs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;RANGE_ADD&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;parentName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;viewer&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;parentID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;viewerId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;connectionName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;allPokemons&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;edgeName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;edge&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;rangeBehaviors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;s1&quot;&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;append&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;We first express that we want to &lt;em&gt;add&lt;/em&gt; the node using &lt;code&gt;RANGE_ADD&lt;/code&gt; for the &lt;code&gt;type&lt;/code&gt; (there are 5 different types in total).&lt;/p&gt;

&lt;p&gt;Relay internally represents the stored data as a graph, so the remaining information expresses where exactly the new node should be hooked into the existing structure.&lt;/p&gt;

&lt;p&gt;Let&#39;s consider the shape of the data before we move on:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;viewer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nx&quot;&gt;allPokemons&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;edges&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;nx&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Here we clearly see the direct connection between &lt;code&gt;viewer&lt;/code&gt; and the Pokemons goes through &lt;code&gt;allPokemons&lt;/code&gt; &lt;em&gt;connection&lt;/em&gt;, so the &lt;em&gt;parent&lt;/em&gt; of the new Pokemon is the &lt;code&gt;viewer&lt;/code&gt;. The name of that connection is &lt;code&gt;allPokemons&lt;/code&gt;, and lastly the &lt;code&gt;edgeName&lt;/code&gt; is taken from the payload of the mutation.&lt;/p&gt;

&lt;p&gt;The last piece, &lt;code&gt;rangeBehaviors&lt;/code&gt;, specifies whether we want to &lt;em&gt;append&lt;/em&gt; or &lt;em&gt;prepend&lt;/em&gt; the new node.&lt;/p&gt;

&lt;p&gt;Executing the mutation is as simple as calling &lt;code&gt;commitUpdate&lt;/code&gt; on the &lt;code&gt;relay&lt;/code&gt; prop that&#39;s injected to each component being wrapped with a &lt;code&gt;Relay.Container&lt;/code&gt;. An instance of the mutation and the expected variables are passed as arguments to the constructor:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;_sendCreatePokemonMutation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createPokemonMutation&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CreatePokemonMutation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;viewerId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;viewer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pokemonName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;pokemonUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;relay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;commitUpdate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createPokemonMutation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;a name=&quot;Updating.a.Pokemon:..code.FIELDS_CHANGE..code.&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Updating a Pokemon: &lt;code&gt;FIELDS_CHANGE&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;Like with creating a Pokemon, &lt;code&gt;getMutation()&lt;/code&gt; and &lt;code&gt;getVariables()&lt;/code&gt; are trivial to implement and can be derived directly from the API documentation:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getMutation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Relay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;QL&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mutation&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;updatePokemon&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getVariables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;In &lt;code&gt;getFatQuery()&lt;/code&gt;, we only include the &lt;code&gt;pokemon&lt;/code&gt; which includes the updated info this time, since that is the only part we expect to change after our mutation:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getFatQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Relay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;QL&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;fragment&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;UpdatePokemonPayload&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;nx&quot;&gt;pokemon&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Finally, &lt;code&gt;getConfigs()&lt;/code&gt;, this time specifies a mutator configuration of type &lt;code&gt;FIELDS_CHANGE&lt;/code&gt; since we&#39;re only updating properties on a single Pokemon:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getConfigs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;FIELDS_CHANGE&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;fieldIDs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;nx&quot;&gt;pokemon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;As sole additional piece of info, we declare the ID of the Pokemon that is being updated so that Relay has this information available when receiving the new Pokemon data.&lt;/p&gt;

&lt;a name=&quot;Deleting.a.Pokemon:..code.NODE_DELETE..code.&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Deleting a Pokemon: &lt;code&gt;NODE_DELETE&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;As before, &lt;code&gt;getMutation()&lt;/code&gt; and &lt;code&gt;getVariables()&lt;/code&gt; are self-explanatory:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getMutation&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Relay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;QL&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mutation&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;deletePokemon&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getVariables&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Then, in &lt;code&gt;getFatQuery()&lt;/code&gt;, we need to retrieve the &lt;code&gt;pokemon&lt;/code&gt; from the mutation payload:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getFatQuery&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Relay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;QL&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;fragment&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;DeletePokemonPayload&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;nx&quot;&gt;pokemon&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;In &lt;code&gt;getConfigs()&lt;/code&gt;, we&#39;re getting to know another mutator configuration type called &lt;code&gt;NODE_DELETE&lt;/code&gt;. This one requires a &lt;code&gt;parentName&lt;/code&gt; as well as a &lt;code&gt;connectionName&lt;/code&gt;, both coming from the mutation payload and specifying where that node existed in Relay&#39;s data graph. Another requirement, that is specifically relevant for the implementation of a GraphQL server, is that the mutation payload of a deleting mutation always needs to return the &lt;code&gt;id&lt;/code&gt; of the deleted node so that Relay can find that node in its store. Taking all of this together, our implementation of &lt;code&gt;getConfigs()&lt;/code&gt; can be written like so:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;js&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nx&quot;&gt;getConfigs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;NODE_DELETE&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;parentName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;pokemon&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;connectionName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;edge&amp;#39;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nx&quot;&gt;deletedIDFieldName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&amp;#39;deletedId&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;p&quot;&gt;}]&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;a name=&quot;Wrapping.Up&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Wrapping Up&lt;/h2&gt;

&lt;p&gt;Relay has a lot of benefits that make it a very compelling framework to use for state management and interaction with GraphQL APIs. Its major strengths are a highly optimized cache, thoughtful UI integration as well as the declarative API for data fetching and mutations.&lt;/p&gt;

&lt;p&gt;The initial version of Relay came with a notable learning curve due to lots of magic happening behind the scenes. However, Facebook recently released the first release candidates of &lt;a href=&quot;https://github.com/facebook/relay/releases/&quot;&gt;Relay v1.0.0&lt;/a&gt; (&lt;em&gt;Relay Modern&lt;/em&gt;) with the &lt;a href=&quot;https://code.facebook.com/posts/1362748677097871&quot;&gt;goal of making Relay generally more approachable&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;It&#39;s worth noting that Relay isn&#39;t the only available GraphQL client. Apollo Client is a great alternative which is a lot easier to get started with. &lt;a href=&quot;https://www.graph.cool/docs/tutorials/relay-vs-apollo-iechu0shia/&quot;&gt;For a detailed comparison please refer to this article.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you want to learn more about GraphQL and want to stay up-to-date with the latest news of the GraphQL community, subscribe to &lt;a href=&quot;https://graphqlweekly.com/&quot;&gt;GraphQL Weekly&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Wed, 26 Apr 2017 00:00:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/04/26/Relay-Mutations/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/04/26/Relay-Mutations/</guid>
        
        
        <category>graphql</category>
        
        <category>guest</category>
        
        <category>javascript</category>
        
        <category>relay</category>
        
      </item>
    
      <item>
        <title>Calculating the Importance of an Artwork with Apache Spark</title>
        <description>&lt;p&gt;How important is a single artwork within the artist&#39;s body of work? At Artsy we try to answer this question by extracting and scoring a set of features across roughly one million artworks. We call it an &lt;em&gt;iconicity&lt;/em&gt; score and we calculate that in Apache Spark for the entire dataset in under 5 minutes.&lt;/p&gt;

&lt;!-- more --&gt;


&lt;a name=&quot;Extracting.Features&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Extracting Features&lt;/h3&gt;

&lt;p&gt;First, we retrieve artwork features (eg. artwork size or number of users that liked the work), artist features (eg. number of users following an artist), the origin of the work (eg. the work is in a museum) and art genome data (eg. an art historically important sculpture) from HDFS using Hive. Here&#39;s a subset of the query.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;21&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;22&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;23&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;24&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;25&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;26&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;27&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;28&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;29&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;30&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;31&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;32&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;33&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;34&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;35&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;36&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;scala&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Artwork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;partnerType&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;artistFollowsCount&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isMuseumWork&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;n&quot;&gt;partnerType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&amp;quot;museum&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getArtworks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hc&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;HiveContext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RDD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Artwork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;hc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sql&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |SELECT&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |  artwork.id,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |  partner.type,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |  artist_follows_count,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |FROM&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |  db.artworks AS artwork&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |LEFT JOIN db.partners partner&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |  ON partner.id = partner_id&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |LEFT JOIN db.artists artist&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |  ON artist.id = artwork.artist_id&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |LEFT JOIN (&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |  SELECT follow_artists.artist_id, COUNT(*) AS artist_follows_count FROM db.follow_artists GROUP BY follow_artists.artist_id&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;     |) artist_follows_count ON artist_follows_count.artist_id = artwork.artist_id&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;s&quot;&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stripMargin&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rdd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;nc&quot;&gt;Artwork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;n&quot;&gt;partnerType&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;n&quot;&gt;artistFollowsCount&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getLong&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Some features are binary and others require minor transforms. For example, the fact that the work belongs to a museum scores 1, and otherwise scores a 0.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;scala&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;artworkId&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;artistFollowsCount&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Long&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;isMuseumWork&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extractFeatures&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;artworks&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RDD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Artwork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RDD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;artworks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;artwork&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nc&quot;&gt;Features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;n&quot;&gt;artworkId&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;artwork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;n&quot;&gt;artistFollowsCount&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;artwork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;artistFollowsCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;n&quot;&gt;isMuseumWork&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;artwork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;isMuseumWork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Features are packed in a vector to become usable by the built-in Spark functions.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;scala&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;   &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;Vector&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;nc&quot;&gt;Vectors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dense&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;n&quot;&gt;numArtistFollowers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toDouble&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;n&quot;&gt;isMuseumWork&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toDouble&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;a name=&quot;Normalizing.and.Weighing.Features&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Normalizing and Weighing Features&lt;/h3&gt;

&lt;p&gt;Since having 10,000 artist followers doesn&#39;t make a work 10,000 times more important than the fact that it belongs to a museum, we must normalize them for unit variance across the entire data set. This is also a good time to weigh some features more than others according to our understanding of the art world.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;scala&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.apache.spark.mllib.feature._&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.apache.spark.mllib.linalg._&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;normalize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RDD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;])&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RDD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;, &lt;span class=&quot;kt&quot;&gt;Vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scaler&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StandardScaler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weightAdjuster&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ElementwiseProduct&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Vectors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dense&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// number of users following an artist is a popularity contest&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;mf&quot;&gt;2.0&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// having a work in a museum is a big deal&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;artworkId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;n&quot;&gt;weightAdjuster&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        &lt;span class=&quot;n&quot;&gt;scaler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;transform&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;      &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;a name=&quot;Scoring.Artworks&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Scoring Artworks&lt;/h3&gt;

&lt;p&gt;The score is just the sum of the normalized and weighted features.&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;scala&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;score&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;normalizedFeatures&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RDD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;, &lt;span class=&quot;kt&quot;&gt;Vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)])&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;RDD&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;Int&lt;/span&gt;, &lt;span class=&quot;kt&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;normalizedFeatures&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;a name=&quot;Storing.Data&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Storing Data&lt;/h3&gt;

&lt;p&gt;We write this data in JSON format to S3, then load it in a system that serves the Artsy API.&lt;/p&gt;

&lt;a name=&quot;Conclusion&quot;&gt;&lt;/a&gt;
&lt;h3&gt;Conclusion&lt;/h3&gt;

&lt;p&gt;In our dataset this creates a nice distribution. Here&#39;s an example of iconicity across &lt;a href=&quot;https://www.artsy.net/artist/banksy/works&quot;&gt;works by the street artist Banksy&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/2017-04-21-calculating-the-importance-of-an-artwork-with-apache-spark/banksy-iconicity.png&quot; alt=&quot;banksy iconicity&quot; /&gt;&lt;/p&gt;

&lt;p&gt;We notably sort works by iconicity in &lt;a href=&quot;https://www.artsy.net/search?q=banksy&quot;&gt;search results&lt;/a&gt; and in the carousel on top of artist pages. We also have made it available in our &lt;a href=&quot;https://developers.artsy.net&quot;&gt;public API&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Fri, 21 Apr 2017 00:00:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/04/21/calculating-the-importance-of-an-artwork-with-apache-spark/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/04/21/calculating-the-importance-of-an-artwork-with-apache-spark/</guid>
        
        
        <category>apache spark</category>
        
        <category>big data</category>
        
      </item>
    
      <item>
        <title>Artsy&#39;s Technology Stack, 2017</title>
        <description>&lt;a name=&quot;History&quot;&gt;&lt;/a&gt;
&lt;h1&gt;History&lt;/h1&gt;

&lt;p&gt;Artsy was &lt;a href=&quot;http://www.nytimes.com/2012/10/09/arts/design/artsy-is-mapping-the-world-of-art-on-the-web.html&quot;&gt;launched in 2012 as the &quot;Art Genome Project&quot;&lt;/a&gt; and grew exponentially ever since.&lt;/p&gt;

&lt;p&gt;By 2014 we had 230,000 works of art from 600 museums and institutions and launched our first business, a subscription service for commercial galleries, bringing over 80,000 works for sale and partnerships with 37 art fairs and a handful of benefit auctions. That year collectors from 82 countries inquired on over $5.5B of art.&lt;/p&gt;

&lt;p&gt;By 2015 we doubled our &quot;for sale&quot; inventory and aggregated 4,000 of the world&#39;s leading galleries and 60 art fairs. We also launched two new businesses: commercial auctions and online media.&lt;/p&gt;

&lt;p&gt;Finally, in 2016 we, again, doubled our paid gallery network size to become the largest gallery network in the world and grew to become the most-read online art publication as our highly engaging editorial traffic ballooned 320%. We also launched a platform to bid in live auctions and a consignments service with all major auction houses.&lt;/p&gt;

&lt;a name=&quot;The.Artsy.Business.in.2017&quot;&gt;&lt;/a&gt;
&lt;h1&gt;The Artsy Business in 2017&lt;/h1&gt;

&lt;p&gt;Artsy in 2017 is a very wide platform and it can be challenging to characterize simply. But when you boil it down to its essence, Artsy offers information and a marketplace. Our written content and fair coverage keep people informed about the art world, and the Art Genome powers our tools for exploration. Through our partnerships with the major player in the art market, galleries and auction houses, we offer our users a unified platform for buying and selling art.&lt;/p&gt;

&lt;p&gt;Internally we consider Artsy to have three businesses: &lt;em&gt;Auctions&lt;/em&gt;, &lt;em&gt;Content&lt;/em&gt; and &lt;em&gt;Listings&lt;/em&gt;.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;em&gt;Auctions&lt;/em&gt;: Auction houses and charities use Artsy as a sales channel for a commission because collectors want to discover and buy art in a single, central platform that excels at surfacing the art they want from a global market.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;em&gt;Content&lt;/em&gt;: Brands pay Artsy to reach the first art audience at scale by enabling evergreen content online and for offline engagement during art world events.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;em&gt;Listings&lt;/em&gt;: Galleries, Fairs and Institutions subscribe to Artsy for a fee because we bring a very large audience of art collectors and enthusiasts to their virtual doors.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Artsy team is now 166 employees across three offices in New York, Berlin and London. The Engineering organization is now 28 engineers, including 4 leads, 3 directors and a CTO. In this post, we&#39;d like to comprehensively cover what, and how we make the technical and human sides of Artsy businesses work.&lt;/p&gt;

&lt;!-- more --&gt;




&lt;center&gt;
 &lt;img src=&quot;/images/tech-2017/businesses.svg&quot; style=&quot;width:100%;&quot;&gt;
&lt;/center&gt;


&lt;a name=&quot;Organizational.Structures&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Organizational Structures&lt;/h1&gt;

&lt;p&gt;In 2016, we &lt;a href=&quot;/blog/2016/03/28/artsy-engineering-organization-stack&quot;&gt;updated the Engineering organization&lt;/a&gt; to be oriented around product verticals for businesses. We used to focus more on practices to group engineers working with the same technologies across product teams to facilitate knowledge sharing and avoid redundant efforts.&lt;/p&gt;

&lt;p&gt;Since then, web and mobile &quot;practices&quot; have largely been subsumed into the separate product teams. Mobile&#39;s increasing reliance on React Native has aligned nicely with web tooling. It no longer made sense to keep the teams separate, so where product teams used to have 2 separate sub-teams of engineers, they&#39;ve now merged into 1.&lt;/p&gt;

&lt;p&gt;The Platform &quot;practice&quot; has remained as a way to coordinate and share work among product teams, as well as monitor and upgrade Artsy&#39;s platform over time. Most platform engineers operate from within product teams, while a few focusing on data and infrastructure form a core, dedicated Platform team.&lt;/p&gt;

&lt;center&gt;
 &lt;img src=&quot;/images/tech-2017/engineering-teams.svg&quot; style=&quot;width:100%;&quot;&gt;
&lt;/center&gt;


&lt;a name=&quot;Artsy.Technology.Infrastructure.2017.-.Splitting.the.Monolith&quot;&gt;&lt;/a&gt;
&lt;h1&gt;Artsy Technology Infrastructure 2017 - Splitting the Monolith&lt;/h1&gt;

&lt;p&gt;&lt;/article&gt;
&lt;a href=&#39;/images/tech-2017/artsy-stack.svg&#39; style=&quot;&quot;&gt;
  &lt;img src=&quot;/images/tech-2017/artsy-stack.svg&quot; alt=&quot;The Artsy Tech Stack 2017&quot; style=&quot;width:100%;&quot;&gt;
&lt;/a&gt;
&lt;article class=&quot;post&quot;&gt;&lt;/p&gt;

&lt;a name=&quot;User.Facing&quot;&gt;&lt;/a&gt;
&lt;h2&gt;User Facing&lt;/h2&gt;

&lt;p&gt;A lot of the user-facing focus is on being able to present interfaces with a quality worthy of art.&lt;/p&gt;

&lt;p&gt;What you see today when you go to &lt;a href=&quot;https://artsy.net&quot;&gt;www.artsy.net&lt;/a&gt; is a website built with &lt;a href=&quot;http://ezeljs.com&quot;&gt;Ezel.js&lt;/a&gt;, which is a boilerplate for &lt;a href=&quot;http://backbonejs.org&quot;&gt;Backbone&lt;/a&gt; projects running on &lt;a href=&quot;https://nodejs.org&quot;&gt;Node&lt;/a&gt; and using &lt;a href=&quot;http://expressjs.com&quot;&gt;Express&lt;/a&gt; and &lt;a href=&quot;http://browserify.org&quot;&gt;Browserify&lt;/a&gt;. We used to have separate projects for mobile and desktop web, but they &lt;a href=&quot;https://github.com/artsy/force/pull/890&quot;&gt;are now merged&lt;/a&gt;. The combined app is hosted on &lt;a href=&quot;http://heroku.com&quot;&gt;Heroku&lt;/a&gt; and uses &lt;a href=&quot;http://redis.io&quot;&gt;Redis&lt;/a&gt; for caching. Assets, including artwork images, are served from &lt;a href=&quot;http://aws.amazon.com/s3&quot;&gt;Amazon S3&lt;/a&gt; via the &lt;a href=&quot;http://aws.amazon.com/cloudfront&quot;&gt;CloudFront CDN&lt;/a&gt;. This &lt;a href=&quot;https://github.com/artsy/force&quot;&gt;code is open-source&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;What you see today when you open the &lt;a href=&quot;https://itunes.apple.com/us/app/artsy-collect-and-bid-on-fine-art-design/id703796080?mt=8&quot;&gt;Artsy iOS app&lt;/a&gt; is a mix of Objective-C, Swift and React Native. Objective-C and Swift continue to provide a lot of over-arching cross-View Controller code. While individual representations of Artsy resources tend to be built in React Native. All of our React Native code uses Relay to handle API integration. This &lt;a href=&quot;https://github.com/artsy/eigen&quot;&gt;code is open-source&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;You can also find Artsy on &lt;a href=&quot;http://alexa.artsy.net&quot;&gt;Alexa&lt;/a&gt; and &lt;a href=&quot;http://assistant.artsy.net&quot;&gt;Google Home&lt;/a&gt;, which are both open-source Node.js applications. There is also an open-source &lt;a href=&quot;https://github.com/artsy/emergence/&quot;&gt;Apple TV&lt;/a&gt; app built in Swift.&lt;/p&gt;

&lt;p&gt;Our core API serves the public facets of our product, many of our own internal applications, and even &lt;a href=&quot;https://developers.artsy.net&quot;&gt;some of your own projects&lt;/a&gt;. It&#39;s built with &lt;a href=&quot;https://www.ruby-lang.org/en&quot;&gt;Ruby&lt;/a&gt;, &lt;a href=&quot;http://rack.github.io&quot;&gt;Rack&lt;/a&gt;, &lt;a href=&quot;http://rubyonrails.org&quot;&gt;Rails&lt;/a&gt;, and &lt;a href=&quot;https://github.com/intridea/grape&quot;&gt;Grape&lt;/a&gt; serving primarily JSON. The API is hosted on &lt;a href=&quot;http://aws.amazon.com/opsworks&quot;&gt;AWS OpsWorks&lt;/a&gt; and retrieves data from several &lt;a href=&quot;http://www.mongodb.com&quot;&gt;MongoDB&lt;/a&gt; databases hosted with &lt;a href=&quot;https://www.compose.io&quot;&gt;Compose&lt;/a&gt;. It also uses &lt;a href=&quot;http://memcached.org&quot;&gt;Memcached&lt;/a&gt; for caching and &lt;a href=&quot;https://redis.io&quot;&gt;Redis&lt;/a&gt; for background queues with &lt;a href=&quot;https://github.com/mperham/sidekiq/&quot;&gt;Sidekiq&lt;/a&gt;. It runs background jobs with &lt;a href=&quot;https://github.com/collectiveidea/delayed_job&quot;&gt;delayed_job&lt;/a&gt;. We used to employ &lt;a href=&quot;http://lucene.apache.org/solr&quot;&gt;Apache Solr&lt;/a&gt; and even &lt;a href=&quot;https://www.google.com/cse&quot;&gt;Google Custom Search&lt;/a&gt; for the many search functions, but have since consolidated on &lt;a href=&quot;https://www.elastic.co&quot;&gt;Elasticsearch&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Most modern code for both the website and the iOS app use an orchestration layer which is powered by &lt;a href=&quot;http://graphql.org&quot;&gt;GraphQL&lt;/a&gt; to streamline their data fetching and reduce front-end complexity. Our GraphQL server is an &lt;a href=&quot;http://expressjs.com&quot;&gt;Express&lt;/a&gt; app, using &lt;a href=&quot;https://github.com/graphql/express-graphql&quot;&gt;express-graphql&lt;/a&gt; to provide a single API end-point. The API does not access our data directly, but forwards requests to the core API or other services. We have been migrating shared display logic into the GraphQL server, to make it easier to build consistent clients. This &lt;a href=&quot;https://github.com/artsy/metaphysics&quot;&gt;code is open-source&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Consistently, our front-end code &lt;a href=&quot;/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/&quot;&gt;has moved towards&lt;/a&gt; using React across all platforms along with introducing stricter JavaScript languages like TypeScript over CoffeeScript in order to provide better tooling.&lt;/p&gt;

&lt;p&gt;We continue to have a &lt;a href=&quot;https://developers.artsy.net&quot;&gt;public HAL+JSON API&lt;/a&gt; for external developers. This API is in active use for contemporary production services inside Artsy and the &lt;a href=&quot;https://github.com/artsy/doppler&quot;&gt;website is open-source&lt;/a&gt;, too.&lt;/p&gt;

&lt;center&gt;
 &lt;img src=&quot;/images/tech-2017/languages.svg&quot; style=&quot;width:100%;&quot;&gt;
&lt;/center&gt;


&lt;a name=&quot;Partner-Facing&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Partner-Facing&lt;/h2&gt;

&lt;p&gt;The vast customer-facing business is powered by a Content Management System (CMS) for gallery and institutional partners. This CMS lets them upload and manage gallery shows, fair booths, create artists, and edit artwork metadata. All CMS components talk to our core API. We also have a number of CMS-like internal applications to manage partners, auctions, art genomes, configuring fairs or performing recurrent billing (we use Stripe for storing and charging credit cards and ACH) with invoicing.&lt;/p&gt;

&lt;p&gt;CMS applications are based on stable, mature technologies like &lt;a href=&quot;http://rubyonrails.org&quot;&gt;Rails&lt;/a&gt;, &lt;a href=&quot;http://getbootstrap.com&quot;&gt;Bootstrap&lt;/a&gt;, &lt;a href=&quot;https://github.com/turbolinks/turbolinks&quot;&gt;Turbolinks&lt;/a&gt; and &lt;a href=&quot;http://coffeescript.org&quot;&gt;CoffeeScript&lt;/a&gt;, and gradually adopts modern client-side technologies like &lt;a href=&quot;https://facebook.github.io/react&quot;&gt;React&lt;/a&gt; and &lt;a href=&quot;http://browserify.org&quot;&gt;Browserify&lt;/a&gt;. They share a lot of common infrastructure.&lt;/p&gt;

&lt;p&gt;We have a generic image-processing service in-house, which uses &lt;a href=&quot;http://rubyonrails.org&quot;&gt;Rails&lt;/a&gt;, &lt;a href=&quot;https://github.com/mperham/sidekiq/&quot;&gt;Sidekiq&lt;/a&gt;, &lt;a href=&quot;https://redis.io&quot;&gt;Redis&lt;/a&gt;, and &lt;a href=&quot;https://github.com/rmagick/rmagick&quot;&gt;RMagick&lt;/a&gt; with &lt;a href=&quot;http://www.imagemagick.org/script/index.php&quot;&gt;ImageMagick&lt;/a&gt;. It receives image processing requests from many Artsy applications and generates thumbnails, tiles and watermarks images on S3.&lt;/p&gt;

&lt;a name=&quot;Collector-Facing&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Collector-Facing&lt;/h2&gt;

&lt;p&gt;Collectors inquire on artworks and engage in conversations with partners. For this purpose we have built a generic messaging system that manages communications between different parties. It receives messages via API or e-mail, finds or creates a conversation based on the recipients and forwards them to the proper addresses in that conversation. Its doesn&#39;t assume anything about the contents of the messages, which makes it a generic system for any type of conversation. The conversations surface to our partners via CMS.&lt;/p&gt;

&lt;a name=&quot;Running.Auctions&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Running Auctions&lt;/h2&gt;

&lt;p&gt;The Auctions business began with doing the occasional benefit auctions for charities. Most of these auctions are online-only, timed sales. The initial version of our auction systems came together before we began our move to microservices, and so it is baked into our core API. Last year, we launched a live auction integration product to allow users to bid on works at commercial sales at the actual auction house sale rooms. The real-time requirements of this system required a rethinking of how we process our bids.&lt;/p&gt;

&lt;p&gt;The core API for a commercial auction is a Scala micro-service that uses &lt;a href=&quot;http://akka.io&quot;&gt;Akka&lt;/a&gt; for distributed computing. It stores information in an append-only storage engine, based on Akka Persistence, with a small library we developed called &lt;a href=&quot;https://github.com/artsy/atomic-store&quot;&gt;atomic-store&lt;/a&gt;. Communication with external clients can either be done via a REST API, or via WebSockets. People visiting a Live Auction on the web are interacting with a &lt;a href=&quot;https://medium.com/@mjackson/universal-javascript-4761051b7ae9#.ev1yd3juy&quot;&gt;universal&lt;/a&gt; &lt;a href=&quot;https://facebook.github.io/react&quot;&gt;React&lt;/a&gt;+&lt;a href=&quot;http://redux.js.org&quot;&gt;Redux&lt;/a&gt; JavaScript app, served from an &lt;a href=&quot;http://expressjs.com&quot;&gt;Express&lt;/a&gt; server. Bidders visiting a Live Auction on iOS are interacting with a Swift application built with &lt;a href=&quot;https://github.com/JensRavens/Interstellar&quot;&gt;Interstellar&lt;/a&gt;, &lt;a href=&quot;https://github.com/daltoniam/starscream&quot;&gt;Starscream&lt;/a&gt; and &lt;a href=&quot;https://github.com/SwiftyJSON/SwiftyJSON&quot;&gt;SwiftyJSON&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;A more detailed overview of the Auctions stack can be found in &lt;a href=&quot;/blog/2016/08/09/the-tech-behind-live-auction-integration&quot;&gt;The Tech Behind Live Auction Integration&lt;/a&gt;.&lt;/p&gt;

&lt;a name=&quot;Publishing&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Publishing&lt;/h2&gt;

&lt;p&gt;Our in-house editorial team and partners use an &lt;a href=&quot;https://github.com/artsy/positron&quot;&gt;open-source&lt;/a&gt; platform called &quot;Writer&quot; (which we&#39;ve built) to publish rich content across the web. Writer is split in two parts: the editorial-focused CMS and a JSON API that stores and distributes content separately from the rest of Artsy&#39;s stack.&lt;/p&gt;

&lt;p&gt;Writer&#39;s frontend is built with &lt;a href=&quot;http://ezeljs.com&quot;&gt;Ezel.js&lt;/a&gt;, which is a boilerplate for &lt;a href=&quot;http://backbonejs.org&quot;&gt;Backbone&lt;/a&gt; projects running on &lt;a href=&quot;https://nodejs.org&quot;&gt;Node&lt;/a&gt; and using &lt;a href=&quot;http://expressjs.com&quot;&gt;Express&lt;/a&gt; and &lt;a href=&quot;http://browserify.org&quot;&gt;Browserify&lt;/a&gt;. We also heavily use &lt;a href=&quot;https://facebook.github.io/react&quot;&gt;React&lt;/a&gt; and write in &lt;a href=&quot;http://coffeescript.org&quot;&gt;CoffeeScript&lt;/a&gt;. Writer&#39;s backend exposes &lt;a href=&quot;https://en.wikipedia.org/wiki/Representational_state_transfer&quot;&gt;REST&lt;/a&gt;-based and &lt;a href=&quot;http://graphql.org&quot;&gt;GraphQL&lt;/a&gt; APIs that are consumed by our applications.&lt;/p&gt;

&lt;p&gt;You can see Writer being put to work when you see articles on &lt;a href=&quot;https://www.artsy.net&quot;&gt;www.artsy.net&lt;/a&gt;, Facebook Instant Articles, Google AMP, RSS, Apple News, and email. We handle the distribution and display in all of these channels. We also support brand sponsorship deals and produce front-end heavy projects such as &lt;a href=&quot;https://www.artsy.net/2016-year-in-art&quot;&gt;Year in Art 2016&lt;/a&gt;, and &lt;a href=&quot;https://www.artsy.net/article/artsy-editorial-2015-the-year-in-art&quot;&gt;Year in Art 2015&lt;/a&gt;.&lt;/p&gt;

&lt;a name=&quot;Data.Pipeline&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Data Pipeline&lt;/h2&gt;

&lt;p&gt;Data generally flows from consumer applications and services into &lt;a href=&quot;https://aws.amazon.com/redshift&quot;&gt;AWS RedShift&lt;/a&gt;. We use a set of &lt;a href=&quot;https://github.com/ruby/rake&quot;&gt;rake&lt;/a&gt; tasks run on &lt;a href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin&quot;&gt;Jenkins&lt;/a&gt; to move data from our several MongoDB and PostgreSQL databases to Redshift via &lt;a href=&quot;https://aws.amazon.com/s3&quot;&gt;S3&lt;/a&gt;. These rake tasks shell out to &lt;a href=&quot;https://www.postgresql.org/docs/9.3/static/sql-copy.html&quot;&gt;psql&lt;/a&gt; or &lt;a href=&quot;https://docs.mongodb.com/manual/reference/program/mongoexport&quot;&gt;mongo-export&lt;/a&gt; to generate CSV files for a list of services and upload them to an S3 bucket, then load those CSV files plus others found in that bucket (placed there by other services) into Redshift. If a &lt;a href=&quot;http://docs.aws.amazon.com/redshift/latest/dg/r_COPY.html&quot;&gt;Redshift copy&lt;/a&gt; fails due to data changes we sample the CSV and generate a working schema from its contents.&lt;/p&gt;

&lt;p&gt;We also store application usage data provided by &lt;a href=&quot;https://segment.com/warehouses&quot;&gt;Segment Warehouses&lt;/a&gt; as well as data from vendors such as &lt;a href=&quot;https://www.salesforce.com&quot;&gt;Salesforce&lt;/a&gt; and &lt;a href=&quot;http://www.sailthru.com&quot;&gt;Sailthru&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;For production data processing (such as recommendations), large-scale machine learning or even simpler parallel processing such as generating website sitemaps, we have our own Hadoop cluster configured and managed by &lt;a href=&quot;https://www.cloudera.com/products/product-components/cloudera-manager.html&quot;&gt;Cloudera Manager&lt;/a&gt; and running on EC2. We leverage &lt;a href=&quot;http://spark.apache.org&quot;&gt;Apache Spark&lt;/a&gt; and &lt;a href=&quot;https://www.cloudera.com/products/open-source/apache-hadoop.html&quot;&gt;Hadoop&lt;/a&gt; with some &lt;a href=&quot;http://oozie.apache.org&quot;&gt;Ooozie&lt;/a&gt; workflow scheduling. The same data pipeline that writes data to S3 also pumps data to HDFS with either Ruby code or &lt;a href=&quot;http://sqoop.apache.org&quot;&gt;Sqoop&lt;/a&gt; and is read by Spark jobs written in Scala using &lt;a href=&quot;https://hive.apache.org&quot;&gt;Hive&lt;/a&gt;. Spark has improved performance and capacity tenfold over our older in-house systems and we will be moving all lengthy processing implemented in Ruby to this system gradually.&lt;/p&gt;

&lt;a name=&quot;Analytics&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Analytics&lt;/h2&gt;

&lt;p&gt;For general data access and dashboards we rely on &lt;a href=&quot;https://looker.com&quot;&gt;Looker&lt;/a&gt;. This system empowers all non-engineers to access all of our data. At the time of writing, there are 50 users running 3,500 queries a day against Redshift via Looker. We&#39;ve found it expedient to pre-compute common denormalized views, and to create our own session rollups from raw pageviews and events for the additional flexibility it gives us in understanding user behavior.&lt;/p&gt;

&lt;p&gt;For more in-depth work, we use &lt;a href=&quot;https://ipython.org/notebook.html&quot;&gt;Jupyter Notebooks&lt;/a&gt; to connect to our Redshift cluster and by default import &lt;a href=&quot;http://pandas.pydata.org&quot;&gt;pandas&lt;/a&gt;, &lt;a href=&quot;http://scikit-learn.org/stable&quot;&gt;sci-kit learn&lt;/a&gt;, and &lt;a href=&quot;http://matplotlib.org/api/pyplot_api.html&quot;&gt;pyplot&lt;/a&gt; for data analysis.&lt;/p&gt;

&lt;a name=&quot;Search&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Search&lt;/h2&gt;

&lt;p&gt;We completed our full migration from &lt;a href=&quot;http://lucene.apache.org/solr&quot;&gt;Solr&lt;/a&gt; to &lt;a href=&quot;https://www.elastic.co&quot;&gt;Elasticsearch&lt;/a&gt; in the last 18 months, and now use Elasticsearch across all front-ends. This ranges from our artwork filter interfaces through to our real-time artwork similarity features. Elasticsearch gives us high availability clustering features out of the box and easy horizontal scaling on demand.&lt;/p&gt;

&lt;a name=&quot;Platform.Services&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Platform Services&lt;/h2&gt;

&lt;p&gt;As Artsy&#39;s business has grown more complex, so has the data and concepts handled by its core API. We&#39;ve begun supporting certain product areas with separate, dedicated API services, and even extracting existing API domains into separate services when practical. These services tend to expose simple &lt;a href=&quot;https://en.wikipedia.org/wiki/Representational_state_transfer&quot;&gt;REST&lt;/a&gt;-ful HTTP APIs, maintain separate data sources, and even do their own &lt;a href=&quot;/blog/2016/10/26/jwt-artsy-journey&quot;&gt;authentication&lt;/a&gt;. This has certain advantages:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Each system can be deployed and scaled independently.&lt;/li&gt;
&lt;li&gt;Each chooses the best-suited languages and technologies for its purpose.&lt;/li&gt;
&lt;li&gt;Code bases remain more focused and developers&#39; cognitive overhead is minimized.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Balancing these out are some very real disadvantages:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Development must sometimes touch multiple systems.&lt;/li&gt;
&lt;li&gt;Some data is copied between services. These can become out-of-sync, though we always try to have a single &lt;em&gt;authoritative&lt;/em&gt; source in such cases.&lt;/li&gt;
&lt;li&gt;Deploys must be coordinated.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;At our size and complexity, a single code base is simply impractical. So, we&#39;ve tried to be consistent in the coding, deployment, monitoring, and logging practices of these services. The more repeatable and disciplined our process, the less overhead is introduced by additional systems.&lt;/p&gt;

&lt;p&gt;We&#39;ve also explored alternate communication patterns, so systems aren&#39;t as dependent on each other&#39;s APIs. Recently we&#39;ve begun publishing a stream of data events from our core systems that other systems can consume. Other systems can simply subscribe to the notifications they care about, so the source system doesn&#39;t need to be concerned about integrating with one more destination. After experimenting with &lt;a href=&quot;https://kafka.apache.org&quot;&gt;Kafka&lt;/a&gt; but finding it hard to manage, we switched to &lt;a href=&quot;https://www.rabbitmq.com&quot;&gt;RabbitMQ&lt;/a&gt; for this purpose. To provide consistency when publishing events we have &lt;a href=&quot;https://github.com/artsy/artsy-eventservice&quot;&gt;our own gem&lt;/a&gt;.&lt;/p&gt;

&lt;a name=&quot;Operations&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Operations&lt;/h2&gt;

&lt;p&gt;All our recent AWS infrastructure is configured in code using &lt;a href=&quot;https://www.terraform.io&quot;&gt;Terraform&lt;/a&gt;. This approach has allowed us to quickly replicate entire deployments along with their dependencies and has increased visibility into the state of our infrastructure across our teams. We started developing an open source &lt;a href=&quot;https://www.docker.com&quot;&gt;Docker&lt;/a&gt; workflow toolkit named &lt;a href=&quot;https://github.com/artsy/hokusai&quot;&gt;Hokusai&lt;/a&gt; in order to manage a containerized workflow, CI and deployment to &lt;a href=&quot;https://kubernetes.io&quot;&gt;Kubernetes&lt;/a&gt;. Our Kubernetes clusters are managed using &lt;a href=&quot;https://github.com/kubernetes/kops&quot;&gt;Kops&lt;/a&gt; and similarly provisioned using Terraform. This new workflow is reducing our dependence on Heroku, giving us more flexibility in our deployments and a more efficient use of server resources.&lt;/p&gt;

&lt;a name=&quot;Closing.Remarks&quot;&gt;&lt;/a&gt;
&lt;h2&gt;Closing Remarks&lt;/h2&gt;

&lt;p&gt;Like any attempts at mapping something as large as the daily work for a thirty-ish person engineering team, &lt;a href=&quot;https://en.wikipedia.org/wiki/Map%E2%80%93territory_relation&quot;&gt;the map is not the territory&lt;/a&gt;. However, the exploration is worth the time it takes to keep notes for reading again in the next two years.&lt;/p&gt;

&lt;p&gt;If you&#39;re interested in helping us make this an even longer post in two more years, or &lt;em&gt;more interestingly&lt;/em&gt; shorter - we nearly always have a &lt;a href=&quot;https://www.artsy.net/jobs&quot;&gt;position open for engineers&lt;/a&gt;.&lt;/p&gt;
</description>
        <pubDate>Fri, 14 Apr 2017 00:00:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/04/14/artsy-technology-stack-2017/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/04/14/artsy-technology-stack-2017/</guid>
        
        
        <category>eigen</category>
        
        <category>force</category>
        
        <category>gravity</category>
        
        <category>technology</category>
        
      </item>
    
      <item>
        <title>What is fastlane match?</title>
        <description>&lt;p&gt;Like anyone working on a non-trivial app in the iOS world who values their time, we use fastlane. &lt;a href=&quot;https://fastlane.tools&quot;&gt;fastlane&lt;/a&gt; is a suite
of tools that makes it much simpler to automate the very manual processes provided by Apple for deployment.&lt;/p&gt;

&lt;p&gt;We&#39;ve adopted it in a relatively piece-meal manner in different projects, converting custom in-house code to something
provided by the gem.  Over time we found what pieces of the suite work for us. &lt;a href=&quot;https://github.com/artsy/energy/pull/266&quot;&gt;I&#39;ve adopted another today&lt;/a&gt;: &lt;a href=&quot;https://github.com/fastlane/fastlane/tree/master/match&quot;&gt;match&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;match automates setting up your iOS projects for code signing. One of the most arduous orthogonal tasks which every dev team learns and then forgets.&lt;/p&gt;

&lt;p&gt;In using match, we have given away a bit of control with code signing, and so this post is going to dig into; what we used
to have, and how it works now with match instead.&lt;/p&gt;

&lt;!-- more --&gt;


&lt;p&gt;When match came out, I knew this was a üåü idea.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Automatically generate the right certificates and keys for your different apps and environments.&lt;/li&gt;
&lt;li&gt;Take all your developer certificates and keys, move them to a central place accessible via private git repos.&lt;/li&gt;
&lt;li&gt;Encrypt all your certs and keys, the team just needs to share one password.&lt;/li&gt;
&lt;li&gt;Migrate all of those keys on both the developer&#39;s and CI&#39;s computers.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can now have a consistent signing setup between how you work, and how your CI runs. After understanding this, I migrated
Artsy&#39;s app store apps to deploy via &lt;a href=&quot;https://circleci.com&quot;&gt;Circle CI&lt;/a&gt;. We initially gave match a shot, but ended up having issues with supporting
multiple apps. So, I replicated the core ideas in match into our Fastfile. It looked like this:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;21&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;22&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;23&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;24&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;25&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;26&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;27&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;28&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;29&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;30&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;31&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;32&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;33&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;34&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;35&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;36&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;ruby&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;n&quot;&gt;lane&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:setup_for_app_store&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;app_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;eigen&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;signing_root&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;signing&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;sb&quot;&gt;`git clone https://github.com/artsy/mobile_code_signing.git &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signing_root&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# prints out the codesigning identities&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;system&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;security find-identity -v -p codesigning&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# Install the iOS distribution certificate, -A&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;system&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;security import &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signing_root&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/ios_distribution.cer  -k ~/Library/Keychains/login.keychain -A&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# Move our provisioning profile in&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;profile_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;expand_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;~&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;/Library/MobileDevice/Provisioning Profiles/&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;destination&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;profile_path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;.mobileprovision&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;profile&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signing_root&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;/profiles/&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;/*&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# Ensure folder exists&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;unless&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;directory?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;profile_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    &lt;span class=&quot;no&quot;&gt;FileUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mkdir_p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;profile_path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# Migrate it in&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;no&quot;&gt;FileUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;profile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;destination&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;Installed Profile&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# Install the key&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Dir&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;glob&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signing_root&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;/keys/&amp;quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;app_name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;/*&amp;quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;system&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;security import &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; -k ~/Library/Keychains/login.keychain -P &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ENV&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&amp;#39;MATCH_PASSWORD&amp;#39;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;  -A &amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# prints out the codesigning identities&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;nb&quot;&gt;system&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&amp;quot;security find-identity -v -p codesigning&amp;quot;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;c1&quot;&gt;# Clean-up&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;  &lt;span class=&quot;sb&quot;&gt;`rm -rf &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;signing_root&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Pretty neat, huh? It handles the centralization and migration of certificates. The trade-off against match is:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;We continue to maintain our own certificates, keys and provisioning profiles.&lt;/li&gt;
&lt;li&gt;There is no easy way to update these.&lt;/li&gt;
&lt;li&gt;There is tooling which makes it easy to see the state of all the code signing process.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;A year later, on a project which gets no-where near as much developer attention, I discovered that we had got multiple
parts of the certs, keys and profiles wrong when updating our central repo. So, for &lt;a href=&quot;http://folio.artsy.net&quot;&gt;this project&lt;/a&gt;, I have switched to use match.&lt;/p&gt;

&lt;hr /&gt;

&lt;a name=&quot;So.how.does.it.work.now.&quot;&gt;&lt;/a&gt;
&lt;h1&gt;So how does it work now?&lt;/h1&gt;

&lt;p&gt;First, I ran &lt;code&gt;bundle exec fastlane appstore&lt;/code&gt; and &lt;code&gt;bundle exec fastlane dev&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;This creates the certificates, keys and profiles on iTunes connect and gives you output similar to this:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;17&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;18&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;19&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;20&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;21&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;22&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;23&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;24&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;25&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;26&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;27&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;28&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;29&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;30&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;31&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;32&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;33&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;34&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;35&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;36&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;37&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;38&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;39&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;40&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;41&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;42&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;43&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;44&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;45&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;46&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;47&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;48&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;49&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;50&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;51&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;52&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;53&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;54&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;sh&#39;&gt;&lt;span class=&#39;line&#39;&gt;+-----------------------+------------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;                        Summary &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; match 2.25.0                        &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;+-----------------------+------------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;readonly&lt;/span&gt;              &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;                                           &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; git_url               &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; https://github.com/artsy/mobile_fastlane_match &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;                  &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; appstore                                       &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; git_branch            &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; master                                         &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; app_identifier        &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; sy.art.folio                                   &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; username              &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; it@artsymail.com                               &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; keychain_name         &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; login.keychain                                 &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; team_id               &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; 23KMWZ572J                                     &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; team_name             &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Art.sy Inc.                                    &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; verbose               &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;                                          &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; force                 &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;                                          &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; skip_confirmation     &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;                                          &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; shallow_clone         &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;                                          &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; force_for_new_devices &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;                                          &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; skip_docs             &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;                                          &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; platform              &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; ios                                            &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;+-----------------------+------------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;17:03:52&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;: Cloning remote git repo...
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;17:03:54&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;: üîì  Successfully decrypted certificates repo
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;17:03:54&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;: Installing certificate...
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;+-------------------+-----------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;                       Installed Certificate                       &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;+-------------------+-----------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; User ID           &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; 23KMWZ572J                                    &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Common Name       &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; iPhone Distribution: Art.sy Inc. &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;23KMWZ572J&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Organisation Unit &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; 23KMWZ572J                                    &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Organisation      &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Art.sy Inc.                                   &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Country           &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; US                                            &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Start Datetime    &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Apr  &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt; 13:59:06 &lt;span class=&quot;m&quot;&gt;2017&lt;/span&gt; GMT                      &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; End Datetime      &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Apr  &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt; 13:59:06 &lt;span class=&quot;m&quot;&gt;2018&lt;/span&gt; GMT                      &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;+-------------------+-----------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;17:03:56&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;: Installing provisioning profile...
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;+---------------------+-----------------------------------------+-------------------------------------------------------------------------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;                                                                       Installed Provisioning Profile                                                                        &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;+---------------------+-----------------------------------------+-------------------------------------------------------------------------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Parameter           &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Environment Variable                    &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Value                                                                                                       &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;+---------------------+-----------------------------------------+-------------------------------------------------------------------------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; App Identifier      &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;                                         &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; sy.art.folio                                                                                                &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Type                &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;                                         &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; appstore                                                                                                    &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Platform            &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;                                         &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; ios                                                                                                         &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Profile UUID        &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; sigh_sy.art.folio_appstore              &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; b045df0f-a691-4b7a-ac34-8349a3684030                                                                        &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Profile Name        &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; sigh_sy.art.folio_appstore_profile-name &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; match AppStore sy.art.folio                                                                                 &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Profile Path        &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; sigh_sy.art.folio_appstore_profile-path &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; /Users/orta/Library/MobileDevice/Provisioning Profiles/b045df0f-a691-4b7a-ac34-8349a3684030.mobileprovision &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; Development Team ID &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; sigh_sy.art.folio_appstore_team-id      &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; 23KMWZ572J                                                                                                  &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;+---------------------+-----------------------------------------+-------------------------------------------------------------------------------------------------------------+
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;17:03:56&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;: All required keys, certificates and provisioning profiles are installed üôå
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;p&gt;Which at a glimpse gives a lot of the most useful information about how all the pieces come together. The new repo looks like this:&lt;/p&gt;

&lt;div class=&#39;bogus-wrapper&#39;&gt;&lt;notextile&gt;&lt;figure class=&#39;code&#39;&gt;&lt;figcaption&gt;&lt;span&gt;&lt;/span&gt;&lt;/figcaption&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre class=&quot;line-numbers&quot;&gt;&lt;span class=&#39;line-number&#39;&gt;1&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;2&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;3&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;4&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;5&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;6&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;7&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;8&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;9&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;10&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;11&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;12&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;13&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;14&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;15&lt;/span&gt;
&lt;span class=&#39;line-number&#39;&gt;16&lt;/span&gt;
&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#39;code&#39;&gt;&lt;pre&gt;&lt;code class=&#39;sh&#39;&gt;&lt;span class=&#39;line&#39;&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;tree mobile_fastlane_match
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ README.md
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ certs
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îú‚îÄ‚îÄ development
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ P4K6FACAUD.cer
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ P4K6FACAUD.p12
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬† ‚îî‚îÄ‚îÄ distribution
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ N5BMJ28RQ2.cer
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ N5BMJ28RQ2.p12
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îú‚îÄ‚îÄ match_version.txt
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;‚îî‚îÄ‚îÄ profiles
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    ‚îú‚îÄ‚îÄ appstore
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ AppStore_sy.art.folio.mobileprovision
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;    ‚îî‚îÄ‚îÄ development
&lt;/span&gt;&lt;span class=&#39;line&#39;&gt;        ‚îî‚îÄ‚îÄ Development_sy.art.folio.mobileprovision
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;&lt;/figure&gt;&lt;/notextile&gt;&lt;/div&gt;


&lt;a name=&quot;So..what.is.Match.doing.here.&quot;&gt;&lt;/a&gt;
&lt;h2&gt;So, what is Match doing here?&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;match creates a new key (the &lt;code&gt;*.p12&lt;/code&gt;) - normally you would generate one of these through Keychain, and the entire team would
to share this. We keep ours in team &lt;a href=&quot;http://1password.com&quot;&gt;1Password&lt;/a&gt;. It needs to be used consistently when request certificates from Apple
though the &quot;Request a Certificate from a Certificate Authority&quot; part of getting your certs set up.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Using &lt;a href=&quot;https://github.com/fastlane/fastlane/tree/master/cert&quot;&gt;cert&lt;/a&gt;: match will use this key &lt;a href=&quot;https://github.com/fastlane/fastlane/blob/14dea61e4c81bf9be13bb86c09aa225c6e572618/cert/lib/cert/runner.rb#L141&quot;&gt;to create a signing request&lt;/a&gt; for you.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Using &lt;a href=&quot;https://github.com/fastlane/fastlane/tree/master/cert&quot;&gt;cert&lt;/a&gt;: match will generate a certificate for &lt;a href=&quot;https://github.com/fastlane/fastlane/blob/14dea61e4c81bf9be13bb86c09aa225c6e572618/cert/lib/cert/runner.rb#L79&quot;&gt;development or distribution&lt;/a&gt; for you.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Using &lt;a href=&quot;https://github.com/fastlane/fastlane/tree/master/cert&quot;&gt;cert&lt;/a&gt;: match will &lt;a href=&quot;https://github.com/fastlane/fastlane/blob/14dea61e4c81bf9be13bb86c09aa225c6e572618/match/lib/match/runner.rb#L133&quot;&gt;generate a Provisioning Profile&lt;/a&gt; using your certificate and data pulled from your Xcode Project.
In my case, for development and distribution.&lt;/p&gt;

&lt;p&gt;These profiles are tied directly to one app and the certificate in step 3. For development, all devices in the dev center are also added.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;These files are then installed in their various methods.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;These files are then moved into your git repo, a commit is made for you, then pushed and the repo is removed from your computer.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This process is nice, because this ^ is a lot of work. I only had to run a command.&lt;/p&gt;

&lt;p&gt;It would take at about 30 minutes to do this if I knew exactly what I wanted through the web interface + Keychain.&lt;/p&gt;

&lt;p&gt;We currently need to do this for every app. This works fine for the app where we are deploying multiple betas a month,
but for one when we&#39;re deploying &lt;em&gt;maybe&lt;/em&gt; a beta once a month or two (&lt;em&gt;eek! sorry...&lt;/em&gt;) then it feels like every time you&#39;ve come
back to do some work, the world has shifted a bit.&lt;/p&gt;

&lt;p&gt;We do lose the fact that we know someone has specifically set everything up to work right at some point, but given how
Xcode updates, &lt;a href=&quot;http://stackoverflow.com/questions/4057241/iphone-what-is-a-wwdr-intermediate-certificate&quot;&gt;WWDR updates&lt;/a&gt; and certificate expirations tend to crop up - it can be frustrating to maintain.&lt;/p&gt;

&lt;p&gt;So would I move &lt;a href=&quot;https://github.com/artsy/eigen&quot;&gt;Eigen&lt;/a&gt; to match? Maybe, next time something breaks. Till then I think new apps, and less-often updated
apps should use match.&lt;/p&gt;
</description>
        <pubDate>Wed, 05 Apr 2017 12:17:00 +0000</pubDate>
        <link>http://artsy.github.io/blog/2017/04/05/what-is-fastlane-match/</link>
        <guid isPermaLink="true">http://artsy.github.io/blog/2017/04/05/what-is-fastlane-match/</guid>
        
        
        <category>energy</category>
        
        <category>fastlane</category>
        
        <category>ios</category>
        
        <category>mobile</category>
        
      </item>
    
  </channel>
</rss>
