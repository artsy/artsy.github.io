<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: swift | Artsy Engineering]]></title>
  <link href="https://artsy.github.io/blog/categories/swift/atom.xml" rel="self"/>
  <link href="https://artsy.github.io/"/>
  <updated>2022-05-09T12:47:47+00:00</updated>
  <id>https://artsy.github.io/</id>
  <author>
    <name><![CDATA[]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[It's time to use Swift Package Manager]]></title>
    <link href="https://artsy.github.io/blog/2019/01/05/its-time-to-use-spm/"/>
    <updated>2019-01-05T00:00:00+00:00</updated>
    <id>https://artsy.github.io/blog/2019/01/05/its-time-to-use-spm</id>
    <content type="html"><![CDATA[<p>It’s been three years, and <a href="https://swift.org/package-manager/">Swift Package Manager</a> (SPM) is at a point where it can be useful for iOS
projects. It’ll take a bit of sacrifice and a little bit of community spirit to fix some holes probably but <strong>in my
opinion, it’s time for teams to start adopting SPM for their 3rd party dev tools</strong>.</p>

<p><strong>TLDR:</strong> You should be using SPM for 3rd party dev tools like: <a href="https://github.com/realm/SwiftLint">SwiftLint</a>, <a href="https://github.com/nicklockwood/SwiftFormat">SwiftFormat</a>, <a href="https://danger.systems/swift/">Danger</a>,
<a href="https://github.com/krzysztofzablocki/Sourcery">Sourcery</a>, <a href="https://github.com/SwiftGen/SwiftGen/">SwiftGen</a> and <a href="https://github.com/orta/Komondor">Git Hook management</a>.</p>

<p>This post covers: What made it feasible to use SPM now? What are the downsides of the status quo? Why use SPM at
all? What are the downsides to using SPM?</p>

<!-- more -->

<h3 id="what-changed-to-make-spm-usable">What changed to make SPM usable?</h3>

<p>From my perspective, David Hart’s <a href="https://github.com/apple/swift-package-manager/pull/1187">addition of <code class="language-plaintext highlighter-rouge">swift run</code></a> to SPM which shipped with Swift 4.0 is what
pushed the project over the finish line to being useful for iOS developers. <code class="language-plaintext highlighter-rouge">swift run</code> is contextually the same as
<code class="language-plaintext highlighter-rouge">bundle exec</code> in that it will run a locally bundled version of your executable.</p>

<p>This means you can run <code class="language-plaintext highlighter-rouge">swift run swiftlint</code> and reliably get the same results as your CI and fellow developers.</p>

<p>Second, all of the big third party tools support SPM already. So, you probably don’t need to send any upstream PRs.</p>

<h3 id="what-are-the-downsides-of-the-status-quo">What are the downsides of the status quo</h3>

<p><strong>Using Homebrew</strong></p>

<p>Right now, a lot of folks use <a href="https://brew.sh">homebrew</a> to manage these types of dependencies. Homebrew is useful for rarely
updated tools (like unix-y CLI apps) but it does not handle having different versions of tool available. This is a
totally reasonable call from Homebrew’s perspective but it makes homebrew a bad choice for your <strong>project</strong>
dependencies - because it only installs things globally.</p>

<p>This means a developer (or your CI) would get the most recent version of that tool when they last installed the
tool. This isn’t a problem for many projects (for example, check out their <a href="https://formulae.brew.sh/analytics/install/90d/">most installed</a> formulas to
see that it’s lot of system libraries, languages and global tools like <code class="language-plaintext highlighter-rouge">node</code>, <code class="language-plaintext highlighter-rouge">git</code> and <code class="language-plaintext highlighter-rouge">python</code>)</p>

<p><strong>Using CocoaPods</strong></p>

<p>You can hijack CocoaPod’s dependency resolver, and locking system mixed with consistent dependency paths to handle
your tools. This is better than using Homebrew, because everyone has the same version - and so you could reliably
run SwiftLint via <code class="language-plaintext highlighter-rouge">./Pods/SwiftLint/swiftlint</code>.</p>

<p>This is a great hack, and CocoaPods is smart here - because these dependencies don’t ship any code for your app for
compiling it won’t set up a library or framework for you. You can even use CocoaPods to set up <a href="https://guides.cocoapods.org/syntax/podfile.html#script_phase">a build
phase</a> for you too (I have feelings on this but we’ll get to those later.)</p>

<p>I don’t really have much of a “you shouldn’t do this” for using hacking CocoaPods for your tools, outside of SPM
it’s probably the right way to do it.</p>

<h3 id="why-use-swiftpm">Why Use SwiftPM?</h3>

<ol>
  <li>SPM works</li>
  <li>SPM can lock your dependencies correctly. <code class="language-plaintext highlighter-rouge">:tada:</code></li>
  <li>The primary tools used in our ecosystem already support it, so you don’t need to do any extra work</li>
  <li>Easy to cache (everything lives in <code class="language-plaintext highlighter-rouge">.build</code>) which means fast CI builds</li>
  <li>You’re using Swift’s tools to manage tools built in Swift, promoting and encouraging the ecosystem you want to
thrive</li>
  <li>Your team can get used to how SPM works now, because it should be useful for code dependencies some day</li>
  <li>SPM is still in a pretty early phase for usage like this, maybe you can find features to add once you’ve got
started and contribute back</li>
</ol>

<h3 id="what-are-the-downsides">What are the downsides?</h3>

<ol>
  <li>
    <p>Running a tool will compile it the first time you use <code class="language-plaintext highlighter-rouge">swift run</code>. Running <code class="language-plaintext highlighter-rouge">swift run danger-swift</code> would first
build <code class="language-plaintext highlighter-rouge">danger-swift</code> from source and then it would run the executable.</p>
  </li>
  <li>
    <p>SPM’s dependency resolution step is very naive, and will clone all the dependencies in the tree - even if you
don’t need them. So, the dependencies of your dependencies (a.k.a transitive dependencies) will have full clones
locally - e.g. the test runner for SwiftLint has to be fully cloned locally in <code class="language-plaintext highlighter-rouge">.build</code> if you use SPM for
SwiftLint. I’m hoping <a href="https://github.com/apple/swift-package-manager/pull/1918">this PR</a> and subsequent
improvements will fix this.</p>
  </li>
  <li>
    <p>You need to reference a single Swift file in your project to make this work. SPM today does not support a
dependencies only project (it won’t build), so you’ll need to reference one Swift file in your codebase.</p>
  </li>
</ol>

<p>All of these are fixable, and the first two can be worked around on CI, by caching the <code class="language-plaintext highlighter-rouge">.build</code> directory. Locally
these actions normally only happens once when you install, or update.</p>

<h3 id="show-me-it-in-action">Show me it in action</h3>

<p>What would this look like for a project? IMO, for a reasonably complex Swift app, I think you should have:</p>

<ul>
  <li><a href="https://github.com/realm/SwiftLint">SwiftLint</a> for catching potential code issues</li>
  <li><a href="https://github.com/nicklockwood/SwiftFormat">SwiftFormat</a> so you don’t argue about code style</li>
  <li><a href="https://github.com/orta/Komondor">Komondor</a> to automate the above tools, so people don’t have to remember to run the tools</li>
  <li><a href="https://danger.systems/swift/">Danger Swift</a> to handle cultural rules for PRs like “Please add Changelogs entries”</li>
</ul>

<p>You would write a <code class="language-plaintext highlighter-rouge">Package.swift</code> file like this:</p>

<div class="language-swift highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// swift-tools-version:4.2</span>
<span class="kd">import</span> <span class="kt">PackageDescription</span>

<span class="k">let</span> <span class="nv">package</span> <span class="o">=</span> <span class="kt">Package</span><span class="p">(</span>
    <span class="nv">name</span><span class="p">:</span> <span class="s">"Eigen"</span><span class="p">,</span>
    <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span>
      <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/danger/swift.git"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"1.0.0"</span><span class="p">),</span>
      <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/nicklockwood/SwiftFormat"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"0.35.8"</span><span class="p">),</span>
      <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/Realm/SwiftLint"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"0.28.1"</span><span class="p">),</span>
      <span class="o">.</span><span class="nf">package</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"https://github.com/orta/Komondor"</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="s">"1.0.0"</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="nv">targets</span><span class="p">:</span> <span class="p">[</span>
        <span class="c1">// This is just an arbitrary Swift file in the app, that has</span>
        <span class="c1">// no dependencies outside of Foundation, the dependencies section</span>
        <span class="o">.</span><span class="nf">target</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"eigen"</span><span class="p">,</span> <span class="nv">dependencies</span><span class="p">:</span> <span class="p">[</span><span class="s">"Danger"</span><span class="p">],</span> <span class="nv">path</span><span class="p">:</span> <span class="s">"Artsy"</span><span class="p">,</span> <span class="nv">sources</span><span class="p">:</span> <span class="p">[</span><span class="s">"Stringify.swift"</span><span class="p">]),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="c1">// The settings for the git hooks for our repo</span>
<span class="cp">#if canImport(PackageConfig)</span>
    <span class="kd">import</span> <span class="kt">PackageConfig</span>

    <span class="k">let</span> <span class="nv">config</span> <span class="o">=</span> <span class="kt">PackageConfig</span><span class="p">([</span>
        <span class="s">"komondor"</span><span class="p">:</span> <span class="p">[</span>
            <span class="c1">// When someone has run `git commit`, first run</span>
            <span class="c1">// SwiftFormat and the auto-correcter for SwiftLint</span>
            <span class="s">"pre-commit"</span><span class="p">:</span> <span class="p">[</span>
                <span class="s">"swift run swiftformat ."</span><span class="p">,</span>
                <span class="s">"swift run swiftlint autocorrect --path Artsy/"</span><span class="p">,</span>
                <span class="s">"git add ."</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">]</span>
    <span class="p">])</span>
<span class="cp">#endif</span>
</code></pre></div></div>

<p>Which gives you access to the following commands:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">swift run komondor install</code> - to set up your repo’s git hooks</li>
  <li><code class="language-plaintext highlighter-rouge">swift run swiftformat .</code> - to run SwiftFormat over your project</li>
  <li><code class="language-plaintext highlighter-rouge">swift run swiftlint --autocorrect</code> - to highlight your linter issues</li>
  <li><code class="language-plaintext highlighter-rouge">swift run danger-swift ci</code> - to run Danger Swift on your CI</li>
</ul>

<p>Because you can reliably run both SwiftFormat and SwiftLint via Komondor on a git hook, you can remove build phase
steps that run these tools.</p>

<p>An iOS app’s compile and run cycle already takes on the order of seconds, so you should avoid adding extra build
steps in Xcode. I realise that people are only doing this due to the (unreasonably) limited extension support in
Xcode, but the build steps are critical path code. When your build and run cycle is already on the order of many
seconds that iteration cycle has to be as tight as possible.</p>

<p>This setup gives you version-locked access to common linting/formating tools (with the ability to use komondor to
add extra checks if needed) in a self-contained <code class="language-plaintext highlighter-rouge">Package.swift</code>.</p>

<p>We’ve started migrating our Artsy projects to use this setup when we work on our native codebases. With our main
iOS app Eigen already using this pattern for Danger Swift, but we don’t created/modify enough <code class="language-plaintext highlighter-rouge">*.swift</code> files to
warrant linters/formatters yet.</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Why is the Swift Package Manager taking so long?]]></title>
    <link href="https://artsy.github.io/blog/2018/12/21/why-is-swiftpm-taking-so-long/"/>
    <updated>2018-12-21T00:00:00+00:00</updated>
    <id>https://artsy.github.io/blog/2018/12/21/why-is-swiftpm-taking-so-long</id>
    <content type="html"><![CDATA[<p>Last month I was chatting at a bar with an engineer working on the Swift team, and we welcomed someone to our
conversation where they opened with the question: <em>“When can I stop using CocoaPods and switch to Swift PM?”</em> I
chuckled, because I get this a lot (I have been helping to maintain CocoaPods for about 6 years now) but they had
made mistake of asking an Apple employee about something which sounds even remotely like a future product question.
So, it didn’t go anywhere.</p>

<p>Well, <em>person whose name I don’t remember</em>, let me try to re-frame that question into something I can take a
reasonable stab at: <strong>“Why are we all still using CocoaPods now instead of Swift PM for iOS apps three years after
its release?”</strong></p>

<!-- more -->

<p>Three years ago in December 2015, Swift became open source. Inside the source code was a <a href="https://twitter.com/orta/status/672436829250052102">pleasant
surprise</a> that Apple were going to start making their own package manager. Great, CocoaPods was
<a href="https://www.urbandictionary.com/define.php?term=sherlocked">sherlocked</a>, but Apple had control of Xcode and the entire toolchain so they could integrate it natively. I
thought this was pretty cool, and wrote the following about Swift PM in my annual write-up that year:</p>

<blockquote>
  <p>[On the Swift PM team] They’re actively talking with the community and us, finding ways to share work and to
promote collaboration. It’s eased a lot of the friction I had been feeling. Apple has a fresh start in a way we
could not, and will be able to do things much better than the CocoaPods team could.</p>
</blockquote>

<blockquote>
  <p>All in all, when people have been asking what I want to do in the next year, I’m feeling pretty done on the
“lowering the barrier to entry” space, this year it became less fun.</p>
</blockquote>

<p><em>Fun fact: This is what gave me the space to start working on <a href="https://danger.systems/">Danger</a>.</em></p>

<p>The announcement of Swift PM came out to some fan-fare as the “end of CocoaPods” from the iOS community, and I was
also pretty happy to get some time back to work on other problems. However, a few years down the line it’s not
really turned out that way. What gives?</p>

<h1 id="why-swift-pm-exists">Why Swift PM exists</h1>

<p>Before Swift PM, you couldn’t reasonably manage Swift projects in Linux. Apple have exclusively been building dev
tools for macOS because that’s what they own, and so, all their dev-tools customers (internal and external) have to
use Macs to make their software. It’s not particularly unreasonable.</p>

<p>However, to make Swift a language with a larger scope than “making iOS and macOS apps” and it’s usage being limited
to just the Cocoa community: they would need to support running and compiling Swift apps on Linux.</p>

<p>It’s safe to say Apple probably has no plans to port Xcode to Linux, (though look at what Microsoft achieved when
they decided that they needed to support Visual Studio on macOS <a href="https://code.visualstudio.com">somehow</a>) but what’s more important here
is the underlying tooling <strong>above</strong> the compiler but <strong>below</strong> Xcode: <code class="language-plaintext highlighter-rouge">xcodebuild</code>, wouldn’t make any sense in that
context. It’s deeply macOS and Cocoa specific.</p>

<p>So, Apple needed something to handle the following problems if you were working in a Xcode-less Swift project:</p>

<ul>
  <li>Handling build dependencies</li>
  <li>Linking to existing code</li>
  <li>Creating library abstractions</li>
  <li>Creating executable for the language</li>
  <li>Handling sharing code between projects</li>
</ul>

<p>Roughly in that order of precedence too. In short, they needed a build system first, and then a dependency manager
to support remote packages.</p>

<p>There are a few big existing build systems: <a href="https://www.github.com/facebook/buck">Buck</a> and <a href="https://ninja-build.org">Ninja</a> are the biggest players in the game,
but they aim to be language agnostic build tools. This makes them a bit too abstract to be useful as the main way
to build a modular system for building projects in a language. So, each language from Swift’s generation of <em>“As
fast as C, but safe”</em> like Rust, Go and D all implement a build system unique to their language.</p>

<h1 id="llbuild">llbuild</h1>

<p>Apple’s approach to building a build system is smart. Instead of from scratch creating a build tool for Swift, they
created an abstraction which makes it feasible to build complex builds systems quicker. That’s <a href="https://www.github.com/apple/swift-llbuild">llbuild</a>, a
low-level build system. This was used to create the Swift build system. Then, llbuild was re-used to create
<a href="https://lists.swift.org/pipermail/swift-build-dev/Week-of-Mon-20170605/001019.html">Xcode’s build system</a>.</p>

<p>The new build system for Xcode came out in 2017 with Xcode 9, and became the default in 2018 with Xcode 10. What’s
impressive about the new build system is how much it was just like the last, but better, to quote <a href="https://jamesdempsey.net/2017/06/13/new-xcode-build-system-and-buildsettingextractor/">James
Dempsey</a>:</p>

<blockquote>
  <p>New build system. Same build settings</p>
</blockquote>

<p>Which is impressive, because the existing system is <a href="https://pewpewthespells.com/blog/xcode_build_system.html">complex</a>.</p>

<h1 id="build-system--package-manager">Build System != Package Manager</h1>

<p>CocoaPods was “useful” for Cocoa development very quickly in comparison (roughly a month from initial commit to
supporting a few existing libraries in an app back in 2011), this was because CocoaPods completely skipped the
build tool stage. There was no need, Xcode has a working build system and you can control it via <code class="language-plaintext highlighter-rouge">.xcodeproj</code>
files. This meant that the key output for CocoaPods is to reliably support generating xcode projects and the
underlying abstractions making it actually compile is left to the Xcode team.</p>

<p>The Swift PM team couldn’t do this without making it deeply dependent on Xcode. CocoaPods can be in-different to
something like Linux support (fun fact: last month <a href="https://github.com/CocoaPods/CocoaPods/pull/8189">Windows support</a> was added) because no-one is writing
Cocoa apps on Linux, and it’s only concern is shipping those Xcode project files to your project’s file system.</p>

<p>This difference in abstraction level allowed CocoaPods to work on comprehensive support of the existing library
ecosystem considerably sooner. The config options were already set, the types of projects were known they had to
map to whatever Xcode supported rather than the more mundane task of actually figuring out how to make a project
build, compile and scale.</p>

<p>CocoaPods got focus on more user-facing issues that a dependency manager has considerably quicker, and could focus
on building the most used features first then moving to more niche features (which could be the abstractions those
popular feature relied on) when someone needed it. This meant that the user-facing, and interesting to me, work was
feasible considerably earlier:</p>

<ul>
  <li>Discovery of packages</li>
  <li>A lot of documentation</li>
  <li>Access rights for owners</li>
  <li>Creating plugin systems giving hooks for all sorts of projects to be built</li>
  <li>Support for esoteric compiler features</li>
  <li>Support for esoteric Xcode features</li>
  <li>Providing useful metrics on quality/usage</li>
  <li>Cool stickers</li>
</ul>

<p>Which generally speaking are problems that Swift PM will eventually have to hit, but instead of jumping straight to
it, the team has to first build the foundations before making the decorations.</p>

<h1 id="the-cost">The cost</h1>

<p>These choices came with a cost though, right now there’s only 1 or 2 contexts where Swift PM is useful, the most
prominent is Swift on a Server. It’s likely that Swift on a server probably isn’t as widely adopted as Apple hoped
it would be by the programming community on whole. Unless you are an iOS developer with existing skills, Swift
probably doesn’t even register as being a language you would consider building your web API/apps in. Yes, I know
there are a <a href="https://www.pointfree.co">few</a> <a href="https://talk.objc.io/collections/server-side-swift">good</a> exceptions, but they come from the iOS community.</p>

<p>Which probably hasn’t helped with resourcing Swift PM at Apple, where the user-facing team has
<a href="https://github.com/apple/swift-package-manager/graphs/contributors">basically</a> been a one-man operation for about a year and a half. From my external perspective,
this is lower than I’d like. It’s a problem close to my heart though.</p>

<p>Given that we’re talking about Apple, you shouldn’t judge activity entirely from their open source contributions,
but given the project isn’t useful for most people who could contribute, they don’t. I started working on CocoaPods
because it was fixing a really hard problem that I had, and I knew that working on this would fix it for everyone
else in the industry too, making it worth my time. So, external contributions outside Apple are pretty low.</p>

<p>Build systems are a hard problem, and the Swift PM team very reasonably needs to work on that first, but is
basically doing it pretty much solo. I think this is one of those “<a href="https://ryanparman.com/posts/2011/skating-to-where-the-puck-will-be/">skate where the puck will be</a>”
situations, instead of where it is, which CocoaPods’ aimed for. This means it’s going to take a much longer time to
be useful and widely adopted. While I don’t really know where Swift PM aims to be in the long-term, I think Xcode
integration will probably be the major adoption turning point but in the meantime I’ve got an idea for a smaller
way to make Swift PM useful to the iOS community. That, however, is another blog post.</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Workshop: React Native]]></title>
    <link href="https://artsy.github.io/blog/2017/02/06/React-Native-Workshop/"/>
    <updated>2017-02-06T12:18:00+00:00</updated>
    <id>https://artsy.github.io/blog/2017/02/06/React-Native-Workshop</id>
    <content type="html"><![CDATA[<p>Hey there, so you’ve decided to take a look at React Native? Well, last week I ran a workshop inside Artsy on <a href="https://facebook.github.io/react-native/">React Native</a> and <a href="https://facebook.github.io/relay/">Relay</a>.</p>

<p>The video takes you from <code class="language-plaintext highlighter-rouge">react-native init</code> to having the initial structure of a View Controller based on Relay with a real working API request. The video is about 45 minutes, with inline questions.</p>

<p>If you wanted to just run through the notes, you could probably get it working in about 10 minutes.</p>

<p>Jump <a href="https://www.youtube.com/watch?v=PYC47YKnK4k">to YouTube</a> for the video, or click more for a smaller inline preview, as well as all of the speakers notes to copy &amp; paste from. There is also a full copy of the end-result at <a href="https://github.com/orta/Relay-Artist-Example">orta/Relay-Artist-Example</a>.</p>

<!-- more -->

<iframe width="100%" height="400" src="https://www.youtube.com/embed/PYC47YKnK4k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p>Beautiful right?</p>

<p><img src="https://github.com/orta/Relay-Artist-Example/blob/master/screenshots/workshop.png?raw=true" /></p>

<p>Below are the notes so you can follow along</p>

<hr />

<h1 id="setup">Setup</h1>

<ul>
  <li>Install <a href="https://yarnpkg.com">Yarn</a></li>
  <li>Install React Native - https://facebook.github.io/react-native/docs/getting-started.html</li>
  <li>Create a new project via <code class="language-plaintext highlighter-rouge">react-native init ArtistExample</code></li>
</ul>

<h1 id="verifying-your-install">Verifying your install</h1>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cd ArtistExample</code></li>
  <li>Run <code class="language-plaintext highlighter-rouge">yarn run jest</code> to verify specs</li>
</ul>

<h1 id="starting-out">Starting out</h1>

<ul>
  <li>Run <code class="language-plaintext highlighter-rouge">yarn start</code> - this loads the packager.</li>
</ul>

<p>The packager is the part of React Native which compiles your JavaScript. This JavaScript creates a virtual DOM, which React Native uses to create an equivilent view heirarchy.</p>

<ul>
  <li>Run <code class="language-plaintext highlighter-rouge">react-native run-ios</code> to launch the project in a sim.</li>
</ul>

<h3 id="tada---its-your-1st-rn-app">Tada - it’s your 1st RN app</h3>

<p>That’s it. Let’s look at some real code. Browse the source code.</p>

<h3 id="relay">Relay</h3>

<p>We’re using Relay, this will take a bit of setup. <a href="https://github.com/artsy/emission/commit/c6660fe505f38491f4a1d23dc7f41a2baec5657d">Here is @alloy setting up Relay in Emission</a></p>

<p>Add <code class="language-plaintext highlighter-rouge">relay</code> and <code class="language-plaintext highlighter-rouge">babel-relay-plugin</code> - we <a href="https://github.com/facebook/relay/issues/1061">use a fork</a></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yarn add react-relay@https://github.com/alloy/relay/releases/download/v0.9.3/react-relay-0.9.3.tgz
yarn add babel-relay-plugin@https://github.com/alloy/relay/releases/download/v0.9.3/babel-relay-plugin-0.9.3.tgz
</code></pre></div></div>

<p>Then the schema into a data folder:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mkdir </span>data
curl https://raw.githubusercontent.com/artsy/emission/master/data/schema.graphql <span class="o">&gt;</span> data/schema.graphql
curl https://raw.githubusercontent.com/artsy/emission/master/data/schema.js <span class="o">&gt;</span> data/schema.js
curl https://raw.githubusercontent.com/artsy/emission/master/data/schema.json <span class="o">&gt;</span> data/schema.json
</code></pre></div></div>

<p>Then hook up the plugin:</p>
<ul>
  <li>Add <code class="language-plaintext highlighter-rouge">"plugins": ["./data/schema"],</code> to <code class="language-plaintext highlighter-rouge">.babelrc</code>.</li>
</ul>

<h3 id="first-edit">First edit</h3>

<ul>
  <li>Turn on Live Reloading and HMR with <code class="language-plaintext highlighter-rouge">cmd + d</code></li>
  <li>Turn BG white. Awesome.</li>
</ul>

<p>Magic, it does it in real-time.</p>

<h3 id="making-components">Making components</h3>

<ul>
  <li>Make <code class="language-plaintext highlighter-rouge">lib</code>, <code class="language-plaintext highlighter-rouge">lib/artists</code> and <code class="language-plaintext highlighter-rouge">lib/artists/artist.js</code></li>
  <li>Move <code class="language-plaintext highlighter-rouge">ArtistExample</code> Component from <code class="language-plaintext highlighter-rouge">index.ios.js</code> to <code class="language-plaintext highlighter-rouge">lib/artists/artist.js</code></li>
  <li>Change the class to <code class="language-plaintext highlighter-rouge">Artist</code>, and edit the title to reflect a different component</li>
  <li>Go back and nuke most of the <code class="language-plaintext highlighter-rouge">index.ios.js</code> make it just refer to <code class="language-plaintext highlighter-rouge">Artist</code>`</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Artist</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./lib/artist/artist</span><span class="dl">"</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">ArtistExample</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">Artist</span> <span class="o">/&gt;</span>
    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="relay-setup">Relay Setup</h3>

<p>Explain there are three useful bits <a href="https://sgwilym.github.io/relay-visual-learners/">parts of Relay</a>:</p>

<ul>
  <li>Routes</li>
  <li>RootContainer</li>
  <li>Relay.Container</li>
</ul>

<p>We will talk about them as we go on, but first we need to tell Relay where Metaphysics is. So we need to set up a network layer:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Relay</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-relay</span><span class="dl">'</span>

<span class="kd">const</span> <span class="nx">metaphysicsURL</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">https://metaphysics-staging.artsy.net</span><span class="dl">'</span>

<span class="nx">Relay</span><span class="p">.</span><span class="nx">injectNetworkLayer</span><span class="p">(</span>
  <span class="k">new</span> <span class="nx">Relay</span><span class="p">.</span><span class="nx">DefaultNetworkLayer</span><span class="p">(</span><span class="nx">metaphysicsURL</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">'</span><span class="s1">X-XAPP-Token</span><span class="dl">'</span><span class="p">:</span> <span class="dl">"</span><span class="s2">[go to staging.artsy.net and do `sd.ARTSY_XAPP_TOKEN` in console]</span><span class="dl">"</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">)</span>
</code></pre></div></div>

<p>Next we need to create a Relay Route, this <em>doesnt</em> directly represent a URL representation, but it often can/does. 
E.g. in our case this will represent <code class="language-plaintext highlighter-rouge">/artist/:artistID</code>.</p>

<ul>
  <li>create <code class="language-plaintext highlighter-rouge">lib/artist/route.js</code> add</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Relay</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-relay</span><span class="dl">'</span>

<span class="k">export</span> <span class="k">default</span>  <span class="kd">class</span> <span class="nx">ArtistRoute</span> <span class="kd">extends</span> <span class="nx">Relay</span><span class="p">.</span><span class="nx">Route</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">queries</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">artist</span><span class="p">:</span> <span class="p">(</span><span class="nx">component</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">Relay</span><span class="p">.</span><span class="nx">QL</span><span class="s2">`
      query {
        artist(id: $artistID) {
          </span><span class="p">${</span><span class="nx">component</span><span class="p">.</span><span class="nx">getFragment</span><span class="p">(</span><span class="dl">'</span><span class="s1">artist</span><span class="dl">'</span><span class="p">,</span> <span class="nx">params</span><span class="p">)}</span><span class="s2">
        }
      }
    `</span><span class="p">,</span>
  <span class="p">};</span>

  <span class="kd">static</span> <span class="nx">paramDefinitions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">artistID</span><span class="p">:</span> <span class="p">{</span> <span class="na">required</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span>
  <span class="p">};</span>

  <span class="kd">static</span> <span class="nx">routeName</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">ArtistRoute</span><span class="dl">'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>Hook this up inside <code class="language-plaintext highlighter-rouge">index.ios.js</code>, add an import, and create instance of Route:</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">ArtistRoute</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">./lib/artist/route</span><span class="dl">"</span>

<span class="kd">const</span> <span class="nx">glennRoute</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ArtistRoute</span><span class="p">({</span>
  <span class="na">artistID</span><span class="p">:</span> <span class="dl">"</span><span class="s2">glenn-brown</span><span class="dl">"</span>
<span class="p">})</span>
</code></pre></div></div>

<p>Then change the components render function:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">ArtistExample</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
    <span class="nx">render</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="o">&lt;</span><span class="nx">Relay</span><span class="p">.</span><span class="nx">RootContainer</span> <span class="nx">Component</span><span class="o">=</span><span class="p">{</span><span class="nx">Artist</span><span class="p">}</span> <span class="nx">route</span><span class="o">=</span><span class="p">{</span><span class="nx">glennRoute</span><span class="p">}</span> <span class="sr">/</span><span class="err">&gt;
</span><span class="p">}</span>
</code></pre></div></div>

<p>See error, that means it’s trying to access a Relay Component, and we have a React component. Let’s make it a Relay Component:</p>

<ul>
  <li>
    <p>Remove the <code class="language-plaintext highlighter-rouge">export default</code> from the <code class="language-plaintext highlighter-rouge">Artist</code> class in <code class="language-plaintext highlighter-rouge">lib/artist/artist.js</code></p>
  </li>
  <li>
    <p>Add Relay fragment at the bottom</p>
  </li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="nx">Relay</span><span class="p">.</span><span class="nx">createContainer</span><span class="p">(</span><span class="nx">Artist</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">fragments</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">artist</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">Relay</span><span class="p">.</span><span class="nx">QL</span><span class="s2">`
      fragment on Artist {
        _id
        id
        name
      }
    `</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Artist</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="s2">`Hello, I am </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">artist</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">welcome</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<hr />

<p>Prove the Relay concept by adding <code class="language-plaintext highlighter-rouge">years</code> to GraphQL and add this to the render function:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nx">Artist</span> <span class="kd">extends</span> <span class="nx">Component</span> <span class="p">{</span>
  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">title</span> <span class="o">=</span> <span class="s2">`Hey </span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">artist</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span>
    <span class="k">return</span> <span class="p">(</span>
      <span class="o">&lt;</span><span class="nx">View</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">container</span><span class="p">}</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">welcome</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">welcome</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">artist</span><span class="p">.</span><span class="nx">years</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span>      <span class="o">&lt;</span><span class="sr">/View</span><span class="err">&gt;
</span>    <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Tada! You’ve made a working relay component. Just start making more of these now, and you have an app!</p>

<h3 id="looking-stylish">Looking Stylish!</h3>

<p>OK, we now have the minimum we need - we got API data coming in as props. Now we want to make it look pretty.</p>

<ul>
  <li>Add <code class="language-plaintext highlighter-rouge">mkdir assets</code>, and <code class="language-plaintext highlighter-rouge">mkdir assets/fonts</code></li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-L</span> https://github.com/artsy/Artsy-OSSUIFonts/raw/master/Pod/Assets/EBGaramond12-Italic.ttf <span class="o">&gt;</span> assets/EBGaramond12-Italic.ttf
curl <span class="nt">-L</span> https://github.com/artsy/Artsy-OSSUIFonts/raw/master/Pod/Assets/EBGaramond12-Regular.ttf <span class="o">&gt;</span> assets/EBGaramond12-Regular.ttf
curl <span class="nt">-L</span> https://github.com/artsy/Artsy-OSSUIFonts/raw/master/Pod/Assets/texgyreadventor-bold.ttf <span class="o">&gt;</span> assets/texgyreadventor-bold.ttf
</code></pre></div></div>

<ul>
  <li>edit <code class="language-plaintext highlighter-rouge">package.json</code></li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> "rnpm": {
    "assets": ["./assets"]
  }
</code></pre></div></div>

<ul>
  <li>run <code class="language-plaintext highlighter-rouge">react-native link</code>, restart iOS app, by killing it.</li>
  <li>
    <p>run <code class="language-plaintext highlighter-rouge">react-native run-ios</code></p>
  </li>
  <li>Add custom styles to the two bits of info on screen:</li>
</ul>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">artist</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">Text</span> <span class="nx">style</span><span class="o">=</span><span class="p">{</span><span class="nx">styles</span><span class="p">.</span><span class="nx">subtitle</span><span class="p">}</span><span class="o">&gt;</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">artist</span><span class="p">.</span><span class="nx">years</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/Text</span><span class="err">&gt;
</span></code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">styles</span> <span class="o">=</span> <span class="nx">StyleSheet</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
  <span class="na">container</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">marginTop</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="na">alignItems</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">backgroundColor</span><span class="p">:</span> <span class="dl">'</span><span class="s1">white</span><span class="dl">'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="na">title</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="na">textAlign</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">margin</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="na">fontFamily</span><span class="p">:</span> <span class="dl">"</span><span class="s2">TeXGyreAdventor-Regular</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="na">subtitle</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">textAlign</span><span class="p">:</span> <span class="dl">'</span><span class="s1">center</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">color</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#333333</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">fontFamily</span><span class="p">:</span> <span class="dl">'</span><span class="s1">EBGaramond12-Regular</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">marginBottom</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">});</span>
</code></pre></div></div>

<p>And that is our styles. Covering all of the major use cases of React Native for us.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Retrospective: Swift at Artsy]]></title>
    <link href="https://artsy.github.io/blog/2017/02/05/Retrospective-Swift-at-Artsy/"/>
    <updated>2017-02-05T12:18:00+00:00</updated>
    <id>https://artsy.github.io/blog/2017/02/05/Retrospective-Swift-at-Artsy</id>
    <content type="html"><![CDATA[<center>
<img src="/images/swift-in-rn/swift-in-react-native.svg" style="width:300px;" />
</center>

<p>Swift became public in June 2014, by August we had started using it in Artsy. By October, we had <a href="http://artsy.github.io/blog/2014/11/13/eidolon-retrospective/">Swift in production</a> channelling hundreds of thousands of dollars in auction bids.</p>

<p>It is pretty obvious that Swift is the future of native development on Apple platforms. It was a no-brainer to then build an <a href="https://github.com/artsy/emergence">Apple TV app</a> in Swift, integrated Swift-support into our key app Eigen and built non-trivial parts of that <a href="http://artsy.github.io/blog/2016/08/09/the-tech-behind-live-auction-integration/">application in Swift</a>.</p>

<p>We first started experimenting with React Native in February 2016, and by August 2016, we announced that <a href="/blog/2016/08/15/React-Native-at-Artsy/">Artsy moved to React Native</a> effectively meaning new code would be in JavaScript from here onwards.</p>

<p>We’re regularly asked <em>why</em> we moved, and it was touched on briefly in our announcement but I’d like to dig in to this and try to cover a lot of our decision process. So, if you’re into understanding why a small team of iOS developers with decades of native experience switched to JavaScript, read on.</p>

<p>This post will cover: <a href="/blog/2017/02/05/Retrospective-Swift-at-Artsy/#What.are.Artsy.s.apps.">What are Artsy’s apps?</a>, Swifts <a href="/blog/2017/02/05/Retrospective-Swift-at-Artsy/#Swift.s.upsides">positives</a> and <a href="/blog/2017/02/05/Retrospective-Swift-at-Artsy/#Native.Downsides">negatives</a> for us, <a href="/blog/2017/02/05/Retrospective-Swift-at-Artsy/#React.Native">React Native</a>, and our <a href="/blog/2017/02/05/Retrospective-Swift-at-Artsy/#React.Native..one.year.later">1-year summary</a>.</p>

<!-- more -->

<p>We were finding that our current patterns of building apps were not scaling as the team and app scope grew. Building anything inside Eigen rarely re-used existing native code, and progressively took longer to build features. Our app and test target build times were increasing, till eventually it would take 2 iOS engineers to build a feature in a similar time-frame as a single web engineer. Our iOS engineers have a lot of experience across many platforms, are well versed in best practices and understand the value of building better tools to make it faster. We had the knowledge, but we weren’t finding ourselves in a great position product development wise.</p>

<p>By <a href="https://github.com/artsy/mobile/issues/22">March 2015</a>, we gave up trying to keep pace with the web.</p>

<p>Once we came to this conclusion, our discussion came to “what can we do to fix this?” Over the course of the 2015 winter break we explored ideas on how we could write more re-usable code.</p>

<h1 id="what-are-artsys-apps">What are Artsy’s apps?</h1>

<p>We have different apps with different trade-offs.</p>

<p><a href="https://github.com/artsy/eigen">Eigen</a> is an app where we take JSON data from the server, and convert it into a user interface. Each view controller can nearly always be described as a function taking data and mapping it to a UI. <a href="https://github.com/artsy/eidolon">Eidolon</a> (our Auctions Kiosk app) which contains a lot of Artsy-wide unique business logic which is handled with local state like card reader input, or unique user identification modes. <a href="https://github.com/artsy/emergence">Emergence</a> is a trivial-ish tvOS app which has a few view controllers, and is mostly handled by Xcode’s storyboards.</p>

<p><a href="/images/emission/eigen.svg" style="">
  <img src="/images/emission/eigen.svg" alt="Eigen separated into app + components" style="" />
</a></p>

<p>Eigen is where we worried about how we were building apps, other apps are limited in their scope, but Eigen is basically the mobile representation of Artsy. We’re never <em>not</em> going to have something like Eigen.</p>

<p>We eventually came to the conclusion that we needed to re-think our entire UIKit stack for Eigen. Strictly speaking, Objective-C was not a problem for us, our issues came from abstractions around the way we built apps.</p>

<p>Re-writing from scratch was not an option. That takes <a href="https://www.joelonsoftware.com/2000/04/06/things-you-should-never-do-part-i/">a lot of time and effort</a>, which will happily remove technical debt, but that’s not our issue. We also don’t need or have a big redesign. However, a lot of companies used the Objective-C -&gt; Swift transition as a time to re-write from scratch. We asked for the experiences from developers who had opted to do this, they said it was a great marketing tool for hiring - but was a lot of pain to actually work with day to day. They tend to talk about technical debt, and clean slates - but not that Objective-C was painful and Swift solves major architectural problems. With the notable exception of functional programming purists.</p>

<p>In the end, for Eigen, we came to the conclusion that we wanted to work with a component-based architecture. This architectural choice comes from studying how other larger apps handle code-reuse.</p>

<p>We were considering:</p>

<ul>
  <li>View Controllers being a mix of Components which could be extended using protocols in Swift.</li>
  <li>JSON defined Components ( which would have ended up like Spotify’s (<a href="https://cocoapods.org/pods/HubFramework">hub</a>) or Hyperslo’s (<a href="https://cocoapods.org/pods/Spots">Spots</a>) ).</li>
  <li>Building a Component structure heavily inspired by React ( like Bending Spoons’s (<a href="https://cocoapods.org/pods/Katana">Katana</a>) ).</li>
</ul>

<center>
 <img src="/images/js2017/swift.svg" style="width:250px;" />
</center>

<h1 id="swifts-upsides">Swift’s upsides</h1>

<p>Had we continued with native apps via native code, we’d have put more resources behind Swift, which had quite a bit running for it:</p>

<ul>
  <li>
    <p><strong>It was consistent with our existing code.</strong> We wrote hundreds of thousands of lines of code in Objective-C and maybe around a hundred thousand of Swift. The majority of the team had 5+ years of Cocoa experience and no-one needs to essentially argue that <em>continuing</em> with that has value.</p>
  </li>
  <li>
    <p><strong>Swift code can interact with Objective-C and can work on its own.</strong> We can write Swift libraries that can build on-top of our existing infrastructure to work at a higher level of abstraction. Building a component-based infrastructure via Swift could allow easy-reuse of existing code, while providing a language difference for “new app code” vs “infra.”</p>
  </li>
  <li>
    <p><strong>People are excited about Swift.</strong> It’s an interesting, growing language, and one of the few ones non-technical people ask about. “Oh you’re an iOS developer, do you use Swift?” is something I’ve been asked a lot. The developers outside of the mobile team have signed up multiple times for Swift workshops and want to know what Swift is, and what its trade-offs are.</p>
  </li>
  <li>
    <p><strong>It’s evolving</strong> the language changes at a fast rate, with new ideas coming from, and influencing other languages. People inside the community influence and shape its growth. There are some great claims being made <a href="https://twitter.com/wilshipley/status/565001293975257091">about Swift</a> by people we respect.</p>
  </li>
  <li>
    <p><strong>Swift improves on a lot of Objective-C.</strong> Most of the patterns that we use in Objective-C are verbose, and they can become extremely terse inside Swift. Potentially making it easier to read and understand.</p>
  </li>
  <li>
    <p><strong>We would be using the official route.</strong> Apple obviously <em>wants</em> you to be using Swift, they are putting a <em>lot</em> of resources into the language. There are smart people working on the project, and it’s become more stable and useful every year. There aren’t any <em>Swift-only</em> APIs yet, but obviously they’ll be coming.</p>
  </li>
  <li>
    <p><strong>It’s a <a href="https://en.wikipedia.org/wiki/There_are_known_knowns">known-unknown</a> territory.</strong> We have a lot of knowledge around building better tooling for iOS apps. From libraries like <a href="https://github.com/moya/moya">Moya</a>, to foundational projects like <a href="https://cocoapods.org">CocoaPods</a>. Coming up with, and executing dramatic tooling improvements is possible. Perhaps we had overlooked a smarter abstraction which would have worked around the downsides, and thus making it worth expanding our search.</p>

    <p>If we end up building something which gains popularity, we get the advantage of working with a lot of fresh perspectives, and being able to gain from other people working on the same project. This is what happened with <a href="https://github.com/moya/moya">Moya</a>. It’s a pattern Basecamp discuss when they <a href="https://signalvnoise.com/posts/660-ask-37signals-the-genesis-and-benefits-of-rails">talk about rails</a> by beginning with a real project and abstracting outwards.</p>
  </li>
</ul>

<h1 id="native-downsides">Native Downsides</h1>

<p>The dominant two issues come from differences in opinions in how software should be built</p>

<ul>
  <li>
    <p><strong>Types.</strong> Types are useful. Overly strict typing systems make it too hard to <em>quickly</em> change codebases.</p>

    <p>Strictly typed languages work <em>really</em> well for <a href="http://mjtsai.com/blog/2014/10/14/hypothetical-objective-c-3-0/#comment-2177091">building systems</a>, or completely atomic apps - the sort Apple have to build on a day to day basis. When I say an atomic app, I mean one where the majority of the inputs and outputs exist within the domain of the application. Think of apps with their own filetypes, that can control inputs and outputs really easily.</p>

    <p>Even in Objective-C, a looser-typed language where you were not discouraged from using meta–programming, handling JSON required <em>a tonne</em> of boilerplate laden, inelegant code when working with an API. Considering how bread-and-butter working with an API is for most 3rd party developers it should come as no surprise that the most popular CocoaPods are about handling JSON parsing, and making network requests.</p>

    <p>Problems which Apple, generally speaking, don’t have. They use iCloud, or CloudKit, or whatever, and expect you will also. The official Apple opinion was neatly summed up on the official Swift blog on how to handle JSON parsing <a href="https://developer.apple.com/swift/blog/?id=37">exhibits the problem well</a>.</p>

    <blockquote>
      <p>Swift’s built-in language features make it easy to safely extract and work with JSON data decoded with Foundation APIs — without the need for an external library or framework.</p>
    </blockquote>

    <p>They do, but it’s not great code to write nor maintain. I don’t know anyone who does what they recommend in production.</p>

    <p>The stricter type system in Swift made it harder to work on JSON-driven apps.</p>
  </li>
  <li>
    <p><strong>Slow.</strong> Native development when put next to web development is slow. Application development requires full compilation cycles, and full state restart of the application that you’re working on. A trivial string change in Eigen takes <a href="https://twitter.com/orta/status/778242899821621249">25 seconds</a> to show up. When I tell some developers that time, they laugh and say I have it good.</p>

    <center><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Making a single edit in a string takes 25 seconds to see the difference in the swift parts of Eigen <a href="https://t.co/MOPGPEWqxX">pic.twitter.com/MOPGPEWqxX</a></p>&mdash; 💍rta Therox (@orta) <a href="https://twitter.com/orta/status/778242899821621249">September 20, 2016</a></blockquote></center>

    <p>The moment that this really stood out for me was when I <a href="https://twitter.com/orta/status/271559616888967168">re</a>-discovered <a href="https://twitter.com/orta/status/705890397810257921">Injection for Xcode</a> which ruined my appetite for building apps the traditional way. It reduced an iteration cycle to about <a href="https://twitter.com/orta/status/706165678177390592">a second</a>. With Apple’s resources, and the fact that Injection for Xcode has existed for years by a single developer, it’s frustrating that iOS is a <a href="https://developer.android.com/studio/run/index.html#instant-run">mobile platform</a> with no support for code reloading. I filed bug reports (<a href="https://forums.developer.apple.com/thread/8796">radars</a>), they were marked as duped with no comment. I talked to Apple engineers at WWDC, the idea was dismissed as “didn’t work” when it was <a href="http://stpeterandpaul.ca/tiger/documentation/DeveloperTools/Conceptual/XcodeUserGuide/Contents/Resources/en.lproj/06_06_db_fix_and_continue/chapter_44_section_1.html">tried before</a>.</p>

    <p>I’ve heard developers say they use Playgrounds to work around some of these problems, and the Kickstarter app has probably the closest I’ve seen to an <a href="https://github.com/kickstarter/ios-oss/tree/master/Kickstarter-iOS.playground/Pages">actual implementation of this</a>, so check that out if you’re hitting these issues.</p>

    <p>The Swift compiler is slow. Yes, it will improve. One of my favourite Swift features, inferred typing, can accidentally increase compile times non-obviously. Which can make it feel arbitrary about what code takes longer to compile or not. We eventually <a href="https://github.com/artsy/eigen/pull/1465">automated having our CI warn us</a> whether the code we were adding was slow as it felt hard to predict.</p>
  </li>
</ul>

<center>
 <img src="/images/react-native/artsy_react_logo.svg" style="width:300px;" />
</center>

<h1 id="react-native">React Native</h1>

<p>You may want to read our announcement of switching to <a href="/blog/2016/08/15/React-Native-at-Artsy/">React Native</a> in anticipation of this. However the big three reasons are:</p>

<ul>
  <li>Better developer experience.</li>
  <li>Same conceptual levels as the rest of the team.</li>
  <li>Ownership of the whole stack.</li>
</ul>

<p>However, the key part of this post is how does this compare to native development? Also, have these arguments stood up to the test of time a year later?</p>

<p><em>Sidenote:</em> I found it hard to write this without being able to comprehensively reference what we are doing now, and so, I’ll be referencing a sibling article: <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/">JS 2017</a>.</p>

<h3 id="developer-experience">Developer Experience</h3>

<p>The JavaScript ecosystem cares about how someone using the tool will feel. This is a part of what separates the good from the great in the community. It’s not enough to just provide a great API, and comprehensive documentation but it should substantially improve the way you work.</p>

<blockquote>
  <p>References from JS 2017: <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#Relay">Relay</a>, <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#Jest">Jest</a></p>
</blockquote>

<p>As <em>everyone</em> inside the community has both the ability and the tools to contribute to the ecosystem you get better tools.</p>

<p>Apple make <em>great</em> tools. I do miss Xcode sometimes. It’s cohesive, beautifully designed and doesn’t show its age. It’s a perfect Mac citizen.</p>

<p>Though it’s important to note that they make tools for Apple first and then for us 3rd party devs. Outside influence obviously exists, but they’re shipping whatever <em>they</em> want and you can only influence that via Radars and through going to a conference once a year and talking directly to the dev tools team. Only the Swift language is Open Source (and <a href="https://github.com/apple/swift-package-manager">SwiftPM</a>)</p>

<p>There are so few well built, large developer tools for the Apple ecosystem. Developers are wary <a href="https://twitter.com/orta/status/608013279433138176">of</a> <a href="https://twitter.com/mattt/status/473544723118837760">being copied by Apple</a> - something so prevalent that there is a common word for it, being <a href="https://www.cocoanetics.com/2011/06/on-getting-sherlocked/">Sherlocked</a>. The project I’ve worked on for 5 years, CocoaPods, had an announcement of being sherlocked in late-2015 - you just have to deal with it. The idea that only Apple should be shipping these kind of things kills community momentum.</p>

<center><blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr">Alfred, Dropbox, Snapchat, Parse, OpenGL, Objective-C… <br /><br />Quite the body count this WWDC.</p>&mdash; Mattt (@mattt) <a href="https://twitter.com/mattt/status/473544723118837760">June 2, 2014</a></blockquote> <script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></center>

<p>If you’re going to build something amazing, only to have all support pulled out from under you once it gets popular because Apple copied it and made it for free and with a full time team behind it - why bother?</p>

<p>This makes it tough for us, as the 3rd party community, to build useful tools on the kind of scale that is normal in other developer ecosystems.</p>

<p>This contrasts drastically with the JavaScript ecosystem, check out my explanation of Jest - and compare Jest to either Quick or Specta. Then remind yourself that only Apple has the power to do most of what Jest does.</p>

<blockquote>
  <p>Reference from JS 2017: <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#Jest">Jest</a></p>
</blockquote>

<center>
 <img src="/images/js2017/relay.svg" style="width:300px;" />
</center>

<h3 id="better-abstractions-better-developer-experience">Better Abstractions, Better Developer Experience</h3>

<p>I’ve mentioned that the apps we build have problems specific to API-driven applications. This means that the majority of our work tends to be that we have the full data already, and need to iterate to get the right styling and logic mapping correct, in doing so we want to also make it easy to re-use code.</p>

<p>The React component-oriented architecture makes it very easy to build these types of applications. Born out of the <a href="/blog/2016/11/14/JS-Glossary/#javascript-fatigue">JavaScript primordial soup</a>, where conceptual frameworks come and go every year or so. React has been around for a while now, and seems to have a lot of momentum.</p>

<p>All of these frameworks have the same domain problems that our iOS apps have, external API stores, complex user device state and a mature user-interface API (either the DOM, or UIKit.)</p>

<p>With React, the core concept of a virtual DOM means that you can simplify a lot of complicated state-management for your application. It becomes trivial, removing the need for more complicated state-handling ideas like functional or reactive programming.</p>

<p>With Relay, we got an genuinely ground-breaking change in how interactions get handled with our API. I don’t want to  work against an API without a tool like Relay again.</p>

<blockquote>
  <p>References from JS 2017: <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#React...React.Native">React</a>, <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#Relay">Relay</a></p>
</blockquote>

<p>Both of these tools provide a developer experience better than iOS native tooling. React’s strict state management rules allow external tools to extend a React application easily, so the onus is not on the React team to make better tools. Other projects provide tools like: <a href="https://github.com/jhen0409/react-native-debugger">debuggers</a>, <a href="https://github.com/infinitered/reactotron">external state viewers</a>, <a href="https://github.com/gaearon/react-hot-loader">runtime code injection</a>, <a href="https://github.com/storybooks/react-storybook">component storyboarding</a> all of which can be running simultaneously as you are building your application. Imagine being given the flow of all state in your app in <a href="https://logrocket.com">every bug report</a>.</p>

<p>A single press of save would take your changes, inject it into your current running application, keep you in the exact same place, depending on the type of change it could re-layout your views, and so you can stay in your editor and make your changes. <em>From 25 seconds, to less than one</em>. For a lot of my work, I can put my tests, debuggers and the application on another screen, and just move my head to watch changes propagate on pressing save.</p>

<p>So, you’re thinking <em>“Yeah, but JavaScript…“</em> - well, we use <a href="http://typescriptlang.org">TypeScript</a> and it fixes pretty much every issue with JavaScript. It’s also no problem for us to write native code when we need to, we are still adding to an existing native codebase. The last project I did on our React Native codebase required bi-directional JS &lt;-&gt; Swift communication.</p>

<p>React Native feels like the best of both worlds: Elegant, fast to work with application code, which the whole dev team understands. Falling back to native tooling when we think it will be best for the project.</p>

<blockquote>
  <p>Reference from JS 2017: <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#TypeScript">TypeScript</a></p>
</blockquote>

<p>There’s one more thing that I want to really stress around developer experience, it’s really easy to write tests for our React components. Testing in JavaScript is night-and-day better than native testing. Because we can run our tests outside of the simulator (due to React’s virtual DOM) we run tests whenever you press save. These tests are only the ones related to the current <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#Jest">changes in git</a>. The only thing we miss is visual snapshots <a href="https://www.objc.io/issues/15-testing/snapshot-testing/">from the simulator</a>, not having to restart a simulator to run tests makes it worth it though.</p>

<h4 id="same-tools-different-dev">Same Tools, Different Dev</h4>

<p>We wanted to stop being highly unique inside the dev team. Artsy has around 25 developers, the majority of which work with Ruby and JavaScript on a day-to-day basis. The mobile team was the single development team that didn’t make their own API changes, used different toolchains and were much slower in shipping anything.</p>

<p>This isn’t a great position to be in.</p>

<p>We wanted all developers to feel like they can contribute to any area of the company. For the past 5 years, the native mobile projects had close to zero contributions from anyone outside of the mobile team. Due to differences in tooling, and the idea that there was a cultural difference between us. Since the mobile team moved to React Native we have received features and bug fixes from the web team, and fit in better overall.</p>

<p>This expansion of a mobile team developer’s scope has made it much easier for us to reason about finding better ways to share code with the web team. At the end of 2015, the Collector Web team introduced GraphQL to Artsy. I wrote about how this affected the <a href="http://artsy.github.io/blog/2016/06/19/graphql-for-mobile/">mobile team</a>. This acts as an API layer owned by the front-end side of Artsy. Meaning that it could contain a lot of API-derived client-specific logic. Previously, this work was done by the web team, and then consumed by mobile - now both teams build their APIs and consume them.</p>

<blockquote>
  <p>Reference from JS 2017: <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#GraphQL">GraphQL</a></p>
</blockquote>

<p>This is not something we have explored too deeply, however we expect to be able to port a lot of our React Native to Android. I got a rough prototype ported in 2 days work. By working at React-level, and allowing the React Native bindings to handle the interactions with the host OS, we’ve been writing cross-platform code.</p>

<p>We consider ourselves blocked on Android support, specifically by not having an engineer in our team with <em>deep</em> experience in Android. Moving to React Native does not obviate our native skills, you’re going to be significantly better in that environment with those skills than without. As we mentioned in our <a href="/blog/2016/08/15/React-Native-at-Artsy/">announcement</a>:</p>

<blockquote>
  <p>If you’re not already knowledgeable about iOS development, are not motivated to put in the time to learn about the
  platform specific details, and think making rich iOS applications with React Native will be a breeze, you’ll
  <a href="http://www.dwotd.nl/2008/06/443-van-een-kouwe-kermis-thuiskomen.html">come home from a very cold fair</a> indeed.</p>
</blockquote>

<p>We need someone with a similar depth of knowledge in the Android ecosystem as our iOS, but we may need one or two for the entire team. The rest can continue to be a mix of Web and iOS engineers. You gain a subset of cross-platform skills using React Native. Had we continued down the path of using Swift, our skills would continue to be siloed.</p>

<p>There is an argument that Swift will be running servers soon, and so you can re-use Swift code across platforms. I could see myself writing server-side back-end code in Swift (you’re writing systems, not apps) but it has a <a href="https://ashfurrow.com/blog/swift-on-linux/">long way to go</a>. It also isn’t an argument towards using it in our native apps, we’d have to re-write servers and implement our own GraphQL and Relay stack. This also would not impact the front-end code for the web - they would still be using JavaScript.</p>

<p>With respect to Swift on Android, potentially, logic code could be shared between platforms but realistically for our setup that’s just not worth it. We’re moving that kind of logic into the GraphQL instance and sharing across <em>all</em> clients, not only native platforms. If you’re sharing model code, you could generate that per-project instead from the server. Since GraphQL is strongly-typed, we’re doing this for both <a href="https://github.com/alloy/relational-theory/pull/18">TypeScript + GraphQL</a> and <a href="https://github.com/alloy/vscode-relay">TypeScript + Relay</a>.</p>

<p>We don’t know where this will end, but we’ve prototyped porting one of our view controllers from React Native <a href="https://github.com/alloy/relational-theory/pull/16">to a website</a>. It’s almost source-compatible. This such a completely different mindset from where we were a year ago.</p>

<h4 id="owning-the-stack">Owning the stack</h4>

<p>Pick an abstraction level of our application above UIKit and we can fork it. All our tools can be also be forked. We can fix our own issues.</p>

<p>In native, there are no concepts like, <em>“We’ll use Steipete’s fork of UIKit for UIPopover rotation fixes”</em> or <em>“My version of Xcode will run tests when you press save.”</em>. Well, hopefully the latter <a href="https://twitter.com/orta/status/790589579552296966">may be fixed</a> in time, but the “you have no choice but to wait, and maybe it won’t happen” aspect is part of the problem.</p>

<p>You have your tools given to you, in a year you get some new ones and lose some old ones. In contrast, we’ve built <a href="https://github.com/orta/vscode-jest#vscode-jest-">many</a> <a href="https://github.com/orta/vscode-react-native-storybooks">extensions</a> <a href="https://github.com/alloy/vscode-relay">for</a> <a href="https://github.com/orta/vscode-ios-common-files">VS</a> <a href="https://github.com/orta/vscode-danger">Code</a> for our own use, and helped out on <a href="https://github.com/flowtype/flow-for-vscode/blob/master/CHANGELOG.md">major ones</a>. When VS Code didn’t do what I wanted, I started using <a href="https://github.com/orta/Essence">use my own fork</a>.</p>

<blockquote>
  <p>Reference from JS 2017: <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#Visual.Studio.Code">VS Code</a></p>
</blockquote>

<p>In the last year, we have submitted code to major JavaScript dependencies of ours: React Native, Relay, VS Code, Jest and a few libraries in-between - fixing problems where we see them, offering features if we need them. Some of these changes are <a href="https://github.com/Microsoft/vscode/pull/12628">small</a>, but some <a href="https://github.com/facebook/relay/issues/1061">are</a> <a href="https://github.com/facebook/jest/pull/2192">big</a> <a href="https://github.com/facebook/react-native/pull/6114">moves</a>. Being able to help out on any problem makes it much easier to live with the <a href="/blog/2016/08/15/React-Native-at-Artsy/">593 dependencies</a> that using React Native brings.</p>

<p>It’s worth highlighting that all of this is done on GitHub, in the open. We can write issues, get responses, and have direct line to the people who are working on something we depend on. This is a stark contrast to the Radar system used internally at Apple, and which external developers have write-only access to. For external contributors radar is opaque, and <a href="https://thenextweb.com/apple/2012/04/13/app-developers-frustrated-with-bug-reporting-tools-call-on-apple-to-fix-radar-or-gtfo/">often feels like a waste of time</a>. On the other hand, a GitHub issue doesn’t have to wait for the repo maintainers, others can get value from it and it’s publicly indexed. If we had put all our effort into Radars instead of <a href="https://github.com/artsy/eigen/issues/586">issues like</a> this, the whole community would be worse off.</p>

<p>This isn’t all doom and gloom. With Swift the language, and SwiftPM the package manager, Apple are more open with the feedback cycle using tools like <a href="https://lists.swift.org/pipermail/swift-build-dev/Week-of-Mon-20160530/000497.html">Slack</a>, Mailing Lists, JIRA and Twitter.</p>

<p>One aspect of working with JavaScript that has been particularly pleasant is the idea that your language is effectively a buffet. If you want to use the latest features of the language you can opt-in to it. We’ve slowly added language features, while retaining backwards compatibility. First using <a href="https://babeljs.io">Babel</a>, then <a href="https://flowtype.org">Flow</a> and finally with <a href="http://www.typescriptlang.org">TypeScript</a>.</p>

<p>In contrast, and this may be the last major time it happens, but people refer to the time it took to migrate <a href="https://engblog.nextdoor.com/migrating-to-swift-3-7add0ce0655#.rvyrohyhq">in</a> <a href="https://tech.zalando.com/blog/app-migration-to-swift-3/">the</a> <a href="https://github.com/kickstarter/ios-oss/pull/26">scale</a> <a href="https://twitter.com/guidomb/status/817363981216129025">of</a> <em>weeks</em> during the Swift 2 -&gt; 3 migration. Having the language evolve is great, sometimes in ways that you <a href="https://swift.org/documentation/api-design-guidelines/">agree with</a> and sometimes in ways <a href="http://mjtsai.com/blog/2016/07/17/swift-classes-to-be-non-publicly-subclassable-by-default/">you don’t</a>. Being able to use your own version of your tools frees you to make it work for you and your business. We have been talking about <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/#TypeScript-Extension">extending TypeScript</a> specifically for our applications.</p>

<h1 id="react-native-one-year-later">React Native, one year later</h1>

<p>In our announcement we talked about the lack of nuanced post-mortems on React Native. We’re now a year in, we can at least try to help out in that space. We’re sticking with React Native for the foreseeable future. It would take some <em>drastic</em> changes in the Apple ecosystem for us to re-consider this decision. So here’s the summary after 1 year.</p>

<ul>
  <li>We can share concepts with web</li>
  <li>Tools are built for apps like ours</li>
  <li>To do it right requires engineers willing to dive deep in JS</li>
  <li>You need native experience to have a polished app</li>
  <li>Dependency stack is still obscenely big</li>
  <li>Opens native engineers to more projects, makes yours more welcoming to others</li>
  <li>Problems do, and will occur, but everything is fixable by forking</li>
  <li>Extensive communication with native code gets tricky to test and maintain</li>
  <li>We ended up re-using quite a lot of existing native code</li>
  <li>It makes working in native code feel more like a chore, as you lose the JS developer experience</li>
  <li>Spending so much time in another environment will erode native knowledge</li>
  <li>Makes a lot of sense in an <a href="/blog/2016/08/24/On-Emission/">additive approach</a> to existing apps</li>
  <li>We’re not making plans to re-write other Apps into React Native, they are fine as-is</li>
  <li>New apps going forward we will default to React Native apps, unless there is a good reason to not</li>
</ul>

<p>So, should you use React Native? Maybe. If you have an API driven app, <em>probably.</em></p>

<p>It’s definitely worth a week of prototyping for any engineering team, then if that goes well you should look into GraphQL and Relay. They really make React Native shine.</p>

<h1 id="want-to-get-started">Want to get started?</h1>

<ul>
  <li>Here’s the <a href="https://facebook.github.io/react-native/">official site</a>.</li>
  <li>These <a href="https://egghead.io/courses/react-native-fundamentals">two</a> <a href="https://egghead.io/courses/build-a-react-native-todo-application">series</a> are high-quality. I studied JavaScript by watching hours of egghead videos.</li>
  <li>Run through the <a href="https://github.com/fbsamples/f8app/">f8 app</a> series on  <a href="http://makeitopen.com/">makeitopen.com</a>.</li>
  <li>Clone our React Native app, <a href="https://github.com/artsy/emission/">Emission</a>.</li>
  <li>Read the rest of our <a href="/series/react-native-at-artsy/">series on React Native</a>.</li>
  <li>Read our summary on <a href="/blog/2017/02/05/Front-end-JavaScript-at-Artsy-2017/">our JavaScript stack choices</a>.</li>
</ul>

<p>If you’d like to look into GraphQL + Relay, but don’t want to start building a server yourself, consider these GraphQL as a Services:</p>

<ul>
  <li><a href="https://scaphold.io">scraphold</a>.</li>
  <li><a href="https://www.graph.cool/">graphcool</a>.</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Learn Swift at Artsy, Beginners Lesson Three]]></title>
    <link href="https://artsy.github.io/blog/2016/08/30/swift-at-artsy-beginners-lesson-three/"/>
    <updated>2016-08-30T09:00:00+00:00</updated>
    <id>https://artsy.github.io/blog/2016/08/30/swift-at-artsy-beginners-lesson-three</id>
    <content type="html"><![CDATA[<p>And we’re back! With lesson three of the beginners’ Swift-at-Artsy course. To recap, Orta and I <a href="http://artsy.github.io/blog/2016/01/26/swift-at-artsy/">led a course at Artsy</a> to teach our colleagues Swift <em>last</em> August, and we’re doing it again. I’m leading the stream for people who’ve never programmed before.</p>

<p>Yesterday was lesson three and I have a <a href="https://youtu.be/e2ErzD8ibG8">screen recording</a> of my walkthrough of <a href="https://github.com/artsy/Swift-at-Artsy/tree/master/Beginners/Lesson%20Three">the material</a>.</p>

<!-- more -->

<iframe width="100%" height="400" src="https://www.youtube.com/embed/e2ErzD8ibG8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

]]></content>
  </entry>
  
</feed>
