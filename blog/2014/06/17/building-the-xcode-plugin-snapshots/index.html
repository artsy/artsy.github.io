
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Building the Xcode Plugin Snapshots - Artsy Engineering</title>
  <meta name="author" content="Artsy">

  
  <meta name="description" content="I&#8217;m the kind of guy who thinks better tooling means better outcomes. But when good tooling isn&#8217;t available, it&#8217;s time to build it &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://artsy.github.io/blog/2014/06/17/building-the-xcode-plugin-snapshots">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Artsy Engineering" type="application/atom+xml">
  <!--[if IE 8]>
<link href="/stylesheets/custom/ie_font.css" type="text/css">
<![endif]-->

<!--- MathJax Configuration -->
<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12450662-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>


<body>

  <a href="/">
    <h1 id="lrg-mark">
      <span>Artsy</span>
    </h1>
  </a>

  <header id="banner"><hgroup>
  <div id="header">
    <h2>Inspiration from the engineering team at <a href="https://artsy.net">Artsy</a> â€” Discover, Research, and Collect the World's Best Art Online.</h2>
  </div>
</hgroup>

</header>

  <div id="main">
    
      <div id="mobile_search">
        <form action="https://www.google.com/cse" method="get">
          <input type="hidden" value="010245880960712892902:tnjd4ryb3ci" name="cx" />
          <input class="search" type="text" name="q" results="0" placeholder="Search" />
        </form>
      </div>
    
    <div id="content">
      <style>

html #main #content {
  width: 900px;
}

html  #main #sidebar {
  display:block;
  width:900px;
}

html #main #sidebar section {
  float:left;
  width:260px;
  padding:20px;
}

html #main_footer {
  margin-top:40px;
  margin-bottom:20px;
  clear:both;
}

html #main_footer p {
  padding:10px;
}

</style>

<div>
  <article class="hentry" role="article">
    
  <header>
    
    <a href="">
      <div class="date">




  
<time datetime="2014-06-17T10:50:00-04:00" pubdate>06/17/14</time></div>
    
    
      <h1 class="entry-title">Building the Xcode Plugin Snapshots</h1>
    
    </a>
    
      <p class="meta">
        
      </p>
    
  </header>


<div class="entry-content"><p>I&#8217;m the kind of guy who thinks better tooling means better outcomes. But when good tooling isn&#8217;t available, it&#8217;s time to build it yourself. It&#8217;s this attitude that lead to my work on <a href="http://cocoadocs.org">CocoaDocs.org</a>, and then to <a href="http://cocoapods.org">CocoaPods.org</a> &amp; its documentation.</p>

<p>We&#8217;ve been trying to apply this to testing, and in order to pull this off I&#8217;ve had to extend Xcode to show off the results of failing tests in a more visual way. To that end, I&#8217;ve extended Xcode to show the results of failing <a href="https://github.com/facebook/ios-snapshot-test-case">view tests</a> in a more visual way by building <a href="https://github.com/orta/snapshots">Snapshots for Xcode</a>.  Let&#8217;s go through the process of building an Xcode plugin so you can do this too. Screw stability.</p>

<!-- more -->


<h2>Getting started</h2>

<p>Lets start of with some Xcode inception. The nicest way to start working on Xcode plugins is to install <a href="http://alcatraz.io">Alcatraz</a> the Xcode plugin package manager:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>curl -fsSL https://raw.github.com/supermarin/Alcatraz/master/Scripts/install.sh | sh</span></code></pre></td></tr></table></div></figure>


<p>From Alcatraz you should have <a href="https://github.com/edwardaux/XcodeExplorer">XcodeExplorer</a> installed. This lets you dig through internal notifications and the Xcode view heriarchy for debugging. Then you&#8217;ll want <a href="http://delisa.me">Delisa Mason</a>&#8217;s <a href="https://github.com/kattrali/Xcode5-Plugin-Template">Xcode 5 Plugin</a> template which also comes from Alcatraz. Now you can create a new project and pick <em>&#8220;Xcode 5 Plugin&#8221;</em>. This will do a bunch of the boring work around getting set up on a project, though it misses one bit that to me is essential, setting the Scheme Target. Once setup go to the Scheme editor and make it open Xcode as the target.</p>

<p><img src="/images/2014-06-17-building-the-xcode-plugin-snapshots/scheme.png" alt="Go set you target dangit" /></p>

<p>This means that when you do <code>cmd + r</code> on your project it will open a new instance of Xcode with your plugin installed, making the dev cycle for a plugin as simple as a normal OS X app. From here I can&#8217;t tell you how to build your plugin. It&#8217;s just normal development, however I can offer some general advice:</p>

<ul>
<li>When you see a class you don&#8217;t know, google it, chances are Luis Solano has you covered with <a href="https://github.com/luisobo/Xcode-RuntimeHeaders">Xcode-RuntimeHeaders</a>.</li>
<li>Use id with fake class interfaces to get around having the headers for Xcode&#8217;s classes.</li>
<li>Avoid 3rd party dependencies as much as possible as all plugin classes are in the same runtime.</li>
<li>A lot of work is done in notifications, so it&#8217;s easy to hook in to state changes.</li>
<li>Swizzle as little as possible</li>
<li>Wrap code you&#8217;re not 100% on with <code>@try {} @catch {}</code> once it&#8217;s working to crash elegantly</li>
<li>Look at the source code of other plugins</li>
<li>Read <a href="https://github.com/kattrali/Xcode5-Plugin-Template#notes">the notes</a> on the Xcode5 Plugin Template</li>
</ul>


<h2>Releasing</h2>

<p>Next up you want to get it on Alcatraz, this is just a pull request to the <a href="https://github.com/supermarin/alcatraz-packages">alcatraz-packages repo</a>, it&#8217;s like the old days of CocoaPods! Then you have a plugin, and people will always be using the master HEAD version of your plugin, so be wary around putting unstable code on that branch.</p>

<p>It&#8217;s easy to forget that if you build apps you have all the tools you need to improve your workflow, one improvement that saves you an hour today could save thousands of human-hours once it&#8217;s out in the community.</p>
</div>


    <footer>
      <div class="meta">
        
  



  <span class="byline author vcard">
    Posted by 
    <span class="fn">
      Orta
    </span>
    
    
    
    
      (
      
      <span class="fn">
        <a href="http://orta.github.io">blog</a>
      </span>
      
      
      <span class="fn">
        <a href="https://github.com/orta">github</a>
      </span>
      
      
      <span class="fn">
        <a href="http://twitter.com/orta">twitter</a>
      </span>
      
      )
    
    
  </span>


      </div>
      <div class="meta">
        Categories: 

<span class="categories">
  
    <a class='category' href='/blog/categories/cocoa/'>Cocoa</a>, <a class='category' href='/blog/categories/objc/'>Objc</a>, <a class='category' href='/blog/categories/plugins/'>Plugins</a>, <a class='category' href='/blog/categories/testing/'>Testing</a>, <a class='category' href='/blog/categories/xcode/'>Xcode</a>, <a class='category' href='/blog/categories/ios/'>iOS</a>
  
</span>


      </div>

      
      <p class="meta">
        
          <a class="basic-alignment left" href="/blog/2014/06/11/testing-core-data-migrations/" title="Previous Post: Testing Core Data Migrations">&laquo; Testing Core Data Migrations</a>
        
        
          <a class="basic-alignment right" href="/blog/2014/06/20/artsys-first-closed-source-pod/" title="next Post: Artsy's first closed source Pod">Artsy's first closed source Pod &raquo;</a>
        
      </p>
    </footer>
  </article>

</div>
    </div>
    <div id="sidebar">
      
  
    <section>
  <h1>Info</h1>
  <ul>
    <li> <a href="/about">About Us</a></li>
    <li> <a href="/open-source">Artsy Open-Source</a></li>
    <li> <a href="https://developers.artsy.net">Artsy Public API</a></li>
    <li> <a href="https://artsy.net/job/developer">Join the Artsy Engineering Team</a></li>
  </ul>
</section>
<section id="recent_posts_section">
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/04/28/how-we-open-sourced-eigen/">How we Open Source'd Eigen</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/09/so-you-want-an-ssl-certificate/">So You Want an SSL Certificate? A Pragmatic Handbook</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/08/creating-a-dynamic-single-page-app-for-our-genome-team-using-react/">Trying out React</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/03/artsy-engineering-compensation-framework/">Artsy's Engineering Compensation Framework</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/31/the-culture-of-openness-artsy-mobile/">The Culture of Openness in the Artsy Mobile Team</a>
      </li>
    
  </ul>
  <a class="archive_link" href="/blog/archives">Blog Archive</a>
</section>

<section>
  <h1>Search</h1>
  <form action="https://www.google.com/cse" method="get">
    <input type="hidden" value="010245880960712892902:tnjd4ryb3ci" name="cx" />
    <input class="search" type="text" name="q" results="0" />
  </form>
</section>


  


    </div>
  </div>
  <footer id="main_footer"><p>
  Copyright &copy; 2015 - Artsy -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
